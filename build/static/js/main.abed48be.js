/*! For license information please see main.abed48be.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,p(b,v.prototype),b.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,E={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function N(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(N(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},P={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:E};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,m=!1,p=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,b(e),!p)if(null!==r(c))p=!0,O(_);else{var t=r(u);null!==t&&P(x,t.startTime-e)}}function _(e,n){p=!1,g&&(g=!1,y(N),N=-1),m=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&P(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,k=!1,S=null,N=-1,T=5,C=-1;function I(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?E():(k=!1,S=null)}}else k=!1}if("function"===typeof w)E=function(){w(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,D=R.port2;R.port1.onmessage=A,E=function(){D.postMessage(null)}}else E=function(){v(A,0)};function O(e){S=e,k||(k=!0,E())}function P(e,n){N=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(N),N=-1):g=!0,P(x,s-o))):(e.sortIndex=a,n(c,e),p||m||(p=!0,O(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(m,e)||!h.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case _:return"Portal";case S:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(ji){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){X(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function se(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ee=null,ke=null;function Se(e){if(e=wi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),_e(e.stateNode,e.type,t))}}function Ne(e){Ee?ke?ke.push(e):ke=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=ke;if(ke=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ee||null!==ke)&&(Ie(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Oe=!1}function je(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Le=!1,Me=null,je.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $e(i),e;if(o===r)return $e(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,Et,kt,St,Nt=!1,Tt=[],Ct=null,It=null,At=null,Rt=new Map,Dt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Lt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Nt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==It&&Ut(It)&&(It=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Ft),Dt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==It&&zt(It,e),null!==At&&zt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,$t=!0;function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){if($t){var i=Qt(e,t,n,r);if(null===i)$r(e,t,r,Gt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Lt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Dt.set(s,Lt(Dt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&xt(s),null===(s=Qt(e,t,n,r))&&$r(e,t,r,Gt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=yi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=M({},cn,{view:0,detail:0}),dn=sn(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),mn=sn(fn),pn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},hn,{relatedTarget:0})),vn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(M({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return kn}var Nn=M({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Nn),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Rn),On=[9,13,27,32],Pn=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var Ln=u&&"TextEvent"in window&&!jn,Mn=u&&(!Pn||jn&&8<jn&&11>=jn),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ne(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Ur(e,0)}function Qn(e){if(K(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,xe(e)),Re(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function sr(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},kr={};function Sr(e){if(Er[e])return Er[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Er[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Ir=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dr(e,t){Ar.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Pr=Rr[Or];Dr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Dr(Nr,"onAnimationEnd"),Dr(Tr,"onAnimationIteration"),Dr(Cr,"onAnimationStart"),Dr("dblclick","onDoubleClick"),Dr("focusin","onFocus"),Dr("focusout","onBlur"),Dr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Mr(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re(function(){var r=s,i=xe(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Nr:case Tr:case Cr:l=vn;break;case Ir:l=An;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==d&&(null!=(p=De(m,d))&&u.push(Hr(m,p,f)))),h)break;m=m.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[mi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=mn,p="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,p="onPointerLeave",d="onPointerEnter",m="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(p,m+"leave",l,n,i)).target=h,a.relatedTarget=f,p=null,yi(i)===r&&((u=new u(d,m+"enter",c,n,i)).target=f,u.relatedTarget=h,p=u),h=p,l&&c)e:{for(d=c,m=0,f=u=l;f;f=Kr(f))m++;for(f=0,p=d;p;p=Kr(p))f++;for(;0<m-f;)u=Kr(u),m--;for(;0<f-m;)d=Kr(d),f--;for(;m--;){if(u===d||null!==d&&u===d.alternate)break e;u=Kr(u),d=Kr(d)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==h&&Gr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if($n(a))if(Xn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Hn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":($n(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Pn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?Vn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Wr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=zn(n))&&(w.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Pn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=De(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=De(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=De(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=De(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,mi="__reactContainer$"+hi,pi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var _i=[],Ei=-1;function ki(e){return{current:e}}function Si(e){0>Ei||(e.current=_i[Ei],_i[Ei]=null,Ei--)}function Ni(e,t){Ei++,_i[Ei]=e.current,e.current=t}var Ti={},Ci=ki(Ti),Ii=ki(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Di(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Ii),Si(Ci)}function Pi(e,t,n){if(Ci.current!==Ti)throw Error(s(168));Ni(Ci,t),Ni(Ii,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return M({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ni(Ci,e),Ni(Ii,Ii.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ii),Si(Ci),Ni(Ci,e)):Si(Ii),Ni(Ii,n)}var Fi=null,Vi=!1,zi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function qi(){if(!zi&&null!==Fi){zi=!0;var e=0,t=wt;try{var n=Fi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,qi),i}finally{wt=t,zi=!1}}return null}var $i=[],Hi=0,Wi=null,Ki=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){$i[Hi++]=Ki,$i[Hi++]=Wi,Wi=e,Ki=t}function es(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===Wi;)Wi=$i[--Hi],$i[Hi]=null,Ki=$i[--Hi],$i[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var rs=null,is=null,ss=!1,os=null;function as(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=ci(n.nextSibling);var r=rs;t&&ls(e,t)?as(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function hs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function ds(e){if(e!==rs)return!1;if(!ss)return hs(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=is)){if(cs(e))throw fs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(hs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ci(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=is;e;)e=ci(e.nextSibling)}function ms(){is=rs=null,ss=!1}function ps(e){null===os?os=[e]:os.push(e)}var gs=b.ReactCurrentBatchConfig;function vs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ws(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ws(s)===t.type)?((r=i(t,n.props)).ref=vs(e,t,n),r.return=e,r):((r=jc(n.type,n.key,n.props,null,e.mode,r)).ref=vs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=jc(t.type,t.key,t.props,null,e.mode,n)).ref=vs(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=Lc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case D:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case D:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function p(i,s,a,l){for(var c=null,u=null,h=s,p=s=0,g=null;null!==h&&p<a.length;p++){h.index>p?(g=h,h=null):g=h.sibling;var v=f(i,h,a[p],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,p),null===u?c=v:u.sibling=v,u=v,h=g}if(p===a.length)return n(i,h),ss&&Zi(i,p),c;if(null===h){for(;p<a.length;p++)null!==(h=d(i,a[p],l))&&(s=o(h,s,p),null===u?c=h:u.sibling=h,u=h);return ss&&Zi(i,p),c}for(h=r(i,h);p<a.length;p++)null!==(g=m(h,i,p,a[p],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),s=o(g,s,p),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),ss&&Zi(i,p),c}function g(i,a,l,c){var u=j(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,p=a,g=a=0,v=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(v=p,p=null):v=p.sibling;var w=f(i,p,y.value,c);if(null===w){null===p&&(p=v);break}e&&p&&null===w.alternate&&t(i,p),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,p=v}if(y.done)return n(i,p),ss&&Zi(i,g),u;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return ss&&Zi(i,g),u}for(p=r(i,p);!y.done;g++,y=l.next())null!==(y=m(p,i,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&p.forEach(function(e){return t(i,e)}),ss&&Zi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ws(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=vs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Lc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=jc(o.type,o.key,o.props,null,r.mode,l)).ref=vs(r,s,o),l.return=r,r=l)}return a(r);case _:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case D:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return p(r,s,o,l);if(j(o))return g(r,s,o,l);ys(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var xs=bs(!0),_s=bs(!1),Es=ki(null),ks=null,Ss=null,Ns=null;function Ts(){Ns=Ss=ks=null}function Cs(e){var t=Es.current;Si(Es),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){ks=e,Ns=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Ns!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===ks)throw Error(s(308));Ss=e,ks.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ds=null;function Os(e){null===Ds?Ds=[e]:Ds.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Os(t)):(n.next=i.next,i.next=n),t.interleaved=n,js(e,r)}function js(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Us(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,js(e,n)}return null===(i=r.interleaved)?(t.next=t,Os(r)):(t.next=i.next,i.next=t),r.interleaved=t,js(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,p=a;switch(d=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=p.payload)?m.call(f,h,d):m)||void 0===d)break e;h=M({},h,d);break e;case 2:Ls=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=h}}function $s(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},Ws=ki(Hs),Ks=ki(Hs),Gs=ki(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Ni(Gs,t),Ni(Ks,e),Ni(Ws,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ws),Ni(Ws,t)}function Xs(){Si(Ws),Si(Ks),Si(Gs)}function Js(e){Qs(Gs.current);var t=Qs(Ws.current),n=le(t,e.type);t!==n&&(Ni(Ks,e),Ni(Ws,n))}function Zs(e){Ks.current===e&&(Si(Ws),Si(Ks))}var eo=ki(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,oo=0,ao=null,lo=null,co=null,uo=!1,ho=!1,fo=0,mo=0;function po(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function vo(e,t,n,r,i,o){if(oo=o,ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?ea:ta,e=n(r,i),ho){o=0;do{if(ho=!1,fo=0,25<=o)throw Error(s(301));o+=1,co=lo=null,t.updateQueue=null,io.current=na,e=n(r,i)}while(ho)}if(io.current=Zo,t=null!==lo&&null!==lo.next,oo=0,co=lo=ao=null,uo=!1,t)throw Error(s(300));return e}function yo(){var e=0!==fo;return fo=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?ao.memoizedState=co=e:co=co.next=e,co}function bo(){if(null===lo){var e=ao.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===co?ao.memoizedState:co.next;if(null!==t)co=t,lo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===co?ao.memoizedState=co=e:co=co.next=e}return co}function xo(e,t){return"function"===typeof t?t(e):t}function _o(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=lo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((oo&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,ao.lanes|=h,Ml|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ao.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=bo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ko(){}function So(e,t){var n=ao,r=bo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Mo(Co.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Do(9,To.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&oo)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,Io(t)&&Ao(e)}function Co(e,t,n){return n(function(){Io(t)&&Ao(e)})}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ao(e){var t=js(e,1);null!==t&&rc(t,e,1,-1)}function Ro(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,ao,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Oo(){return bo().memoizedState}function Po(e,t,n,r){var i=wo();ao.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=bo();r=void 0===r?null:r;var s=void 0;if(null!==lo){var o=lo.memoizedState;if(s=o.destroy,null!==r&&go(r,o.deps))return void(i.memoizedState=Do(t,n,s,r))}ao.flags|=e,i.memoizedState=Do(1|t,n,s,r)}function Lo(e,t){return Po(8390656,8,e,t)}function Mo(e,t){return jo(2048,8,e,t)}function Uo(e,t){return jo(4,2,e,t)}function Fo(e,t){return jo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Vo.bind(null,t,e),n)}function Bo(){}function qo(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&go(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&oo)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=pt(),ao.lanes|=n,Ml|=n,e.baseState=!0),t)}function Wo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{wt=n,so.transition=r}}function Ko(){return bo().memoizedState}function Go(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Xo(t,n);else if(null!==(n=Ps(e,t,n,r))){rc(n,e,r,tc()),Jo(n,t,r)}}function Qo(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Os(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(rc(n,e,r,i=tc()),Jo(n,t,r))}}function Yo(e){var t=e.alternate;return e===ao||null!==t&&t===ao}function Xo(e,t){ho=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Zo={readContext:Rs,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},ea={readContext:Rs,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Lo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,ao,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Ro,useDebugValue:Bo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=Wo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ao,i=wo();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&oo)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Lo(Co.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Al.identifierPrefix;if(ss){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=fo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=mo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ta={readContext:Rs,useCallback:qo,useContext:Rs,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Uo,useLayoutEffect:Fo,useMemo:$o,useReducer:_o,useRef:Oo,useState:function(){return _o(xo)},useDebugValue:Bo,useDeferredValue:function(e){return Ho(bo(),lo.memoizedState,e)},useTransition:function(){return[_o(xo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:So,useId:Ko,unstable_isNewReconciler:!1},na={readContext:Rs,useCallback:qo,useContext:Rs,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Uo,useLayoutEffect:Fo,useMemo:$o,useReducer:Eo,useRef:Oo,useState:function(){return Eo(xo)},useDebugValue:Bo,useDeferredValue:function(e){var t=bo();return null===lo?t.memoizedState=e:Ho(t,lo.memoizedState,e)},useTransition:function(){return[Eo(xo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:So,useId:Ko,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(rc(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(rc(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(rc(t,e,r,n),zs(t,e,r))}};function oa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function aa(e,t,n){var r=!1,i=Ti,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(i=Di(t)?Ai:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function la(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Rs(s):(s=Di(t)?Ai:Ci.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sa.enqueueReplaceState(i,i.state,null),qs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var fa="function"===typeof WeakMap?WeakMap:Map;function ma(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),da(0,t)},n}function pa(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Nc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function xa(e,t,n,r){t.child=null===e?_s(t,null,n,r):xs(t,e.child,n,r)}function _a(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=vo(e,t,n,r,s,i),n=yo(),null===e||ba?(ss&&n&&ts(t),t.flags|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=jc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ka(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ta(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Pl,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Pl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ni(Pl,Ol),Ol|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ni(Pl,Ol),Ol|=r;return xa(e,t,i,n),t.child}function Na(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var s=Di(n)?Ai:Ci.current;return s=Ri(t,s),As(t,i),n=vo(e,t,n,r,s,i),r=yo(),null===e||ba?(ss&&r&&ts(t),t.flags|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ca(e,t,n,r,i){if(Di(n)){var s=!0;Mi(t)}else s=!1;if(As(t,i),null===t.stateNode)$a(e,t),aa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Ri(t,c=Di(n)?Ai:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&la(t,o,r,c),Ls=!1;var d=t.memoizedState;o.state=d,qs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ii.current||Ls?("function"===typeof u&&(ia(t,n,u,r),l=t.memoizedState),(a=Ls||oa(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Us(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ra(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Ri(t,l=Di(n)?Ai:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&la(t,o,r,l),Ls=!1,d=t.memoizedState,o.state=d,qs(t,r,o,i);var m=t.memoizedState;a!==h||d!==m||Ii.current||Ls?("function"===typeof f&&(ia(t,n,f,r),m=t.memoizedState),(c=Ls||oa(t,n,c,r,d,m,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,s,i)}function Ia(e,t,n,r,i,s){Na(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Ha(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=xs(t,e.child,null,s),t.child=xs(t,null,a,s)):xa(e,t,a,s),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Ys(e,t.containerInfo)}function Ra(e,t,n,r,i){return ms(),ps(i),t.flags|=256,xa(e,t,n,r),t.child}var Da,Oa,Pa,ja,La={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=eo.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ni(eo,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=La,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&xs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=La,o);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Va(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Al)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,js(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,is=ci(i.nextSibling),rs=t,ss=!0,os=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Pc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Pc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&ps(r),xs(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $a(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Di(t.type)&&Oi(),Ka(t),null;case 3:return r=t.stateNode,Xs(),Si(Ii),Si(Ci),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==os&&(ac(os),os=null))),Oa(e,t),Ka(t),null;case 5:Zs(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Qs(Ws.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Fr(jr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Da(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Fr(jr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)ja(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Ws.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ka(t),null;case 13:if(Si(eo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))fs(),ms(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==os&&(ac(os),os=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===jl&&(jl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Xs(),Oa(e,t),null===e&&Br(t.stateNode.containerInfo),Ka(t),null;case 10:return Cs(t.type._context),Ka(t),null;case 19:if(Si(eo),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Wa(o,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=to(e))){for(t.flags|=128,Wa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>ql&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ss)return Ka(t),null}else 2*Xe()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=eo.current,Ni(eo,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ns(t),t.tag){case 1:return Di(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Si(Ii),Si(Ci),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Si(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(eo),null;case 4:return Xs(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Da=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Pa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Ws.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},ja=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[pi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=r):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach(function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));ml(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Sc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;null!=m?ne(i,!!o.multiple,m,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Xe())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,gl(t,e),Xa=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(m=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==m?(m.return=f,Za=m):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var c=Xa;if(Ya=o,(Xa=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Za=l):El(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,Ya=a,Xa=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):xl(e)}}function xl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ra(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&$s(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}$s(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function _l(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Sc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var kl,Sl=Math.ceil,Nl=b.ReactCurrentDispatcher,Tl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Il=0,Al=null,Rl=null,Dl=0,Ol=0,Pl=ki(0),jl=0,Ll=null,Ml=0,Ul=0,Fl=0,Vl=null,zl=null,Bl=0,ql=1/0,$l=null,Hl=!1,Wl=null,Kl=null,Gl=!1,Ql=null,Yl=0,Xl=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Il)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Dl?Dl&-Dl:null!==gs.transition?(0===ec&&(ec=pt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));vt(e,n,r),0!==(2&Il)&&e===Al||(e===Al&&(0===(2&Il)&&(Ul|=n),4===jl&&lc(e,Dl)),ic(e,r),1===n&&0===Il&&0===(1&t.mode)&&(ql=Xe()+500,Vi&&qi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Al?Dl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi(function(){0===(6&Il)&&qi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Il;Il|=2;var o=pc();for(Al===e&&Dl===t||($l=null,ql=Xe()+500,fc(e,t));;)try{wc();break}catch(l){mc(e,l)}Ts(),Nl.current=o,Il=i,null!==Rl?t=0:(Al=null,Dl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ll,fc(e,0),lc(e,r),ic(e,Xe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=mt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ll,fc(e,0),lc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,zl,$l);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zl,$l),t);break}_c(e,zl,$l);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zl,$l),r);break}_c(e,zl,$l);break;default:throw Error(s(329))}}}return ic(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Il))throw Error(s(327));Ec();var t=dt(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),ic(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zl,$l),ic(e,Xe()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(ql=Xe()+500,Vi&&qi())}}function hc(e){null!==Ql&&0===Ql.tag&&0===(6&Il)&&Ec();var t=Il;Il|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Il=t))&&qi()}}function dc(){Ol=Pl.current,Si(Pl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Xs(),Si(Ii),Si(Ci),ro();break;case 5:Zs(r);break;case 4:Xs();break;case 13:case 19:Si(eo);break;case 10:Cs(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Al=e,Rl=e=Pc(e.current,null),Dl=Ol=t,jl=0,Ll=null,Fl=Ul=Ml=0,zl=Vl=null,null!==Ds){for(t=0;t<Ds.length;t++)if(null!==(r=(n=Ds[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ds=null}return e}function mc(e,t){for(;;){var n=Rl;try{if(Ts(),io.current=Zo,uo){for(var r=ao.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(oo=0,co=lo=ao=null,ho=!1,fo=0,Tl.current=null,null===n||null===n.return){jl=1,Ll=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=va(a);if(null!==m){m.flags&=-257,ya(m,a,l,0,t),1&m.mode&&ga(o,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==jl&&(jl=2),null===Vl?Vl=[o]:Vl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,ma(0,c,t));break e;case 1:l=c;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Kl||!Kl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Bs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=Nl.current;return Nl.current=Zo,null===e?Zo:e}function gc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Al||0===(268435455&Ml)&&0===(268435455&Ul)||lc(Al,Dl)}function vc(e,t){var n=Il;Il|=2;var r=pc();for(Al===e&&Dl===t||($l=null,fc(e,t));;)try{yc();break}catch(i){mc(e,i)}if(Ts(),Il=n,Nl.current=r,null!==Rl)throw Error(s(261));return Al=null,Dl=0,jl}function yc(){for(;null!==Rl;)bc(Rl)}function wc(){for(;null!==Rl&&!Qe();)bc(Rl)}function bc(e){var t=kl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):Rl=t,Tl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Ol)))return void(Rl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return jl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===jl&&(jl=5)}function _c(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Ec()}while(null!==Ql);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Al&&(Rl=Al=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ac(tt,function(){return Ec(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Il;Il|=4,Tl.current=null,function(e,t){if(ei=$t,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var m;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(m=d.firstChild);)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(m=d.nextSibling))break;f=(d=f).parentNode}d=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},$t=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ra(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}p=nl,nl=!1}(e,n),vl(n,e),mr(ti),$t=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Ye(),Il=l,wt=a,Cl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Yl)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,qi()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Ec(){if(null!==Ql){var e=bt(Yl),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,m=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=m,Za=f;break}Za=m}}}var p=o.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){Sc(l,l.return,_)}if(l===a){Za=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Za=x;break e}Za=l.return}}if(Il=i,qi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function kc(e,t,n){e=Vs(e,t=ma(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Vs(t,e=pa(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Nc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Dl&n)===n&&(4===jl||3===jl&&(130023424&Dl)===Dl&&500>Xe()-Bl?fc(e,0):Fl|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=js(e,t))&&(vt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Lc(n.children,i,o,t);case k:a=8,i|=8;break;case S:return(e=Dc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case I:return(e=Dc(13,n,t,i)).elementType=I,e.lanes=o,e;case A:return(e=Dc(19,n,t,i)).elementType=A,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case N:a=10;break e;case T:a=9;break e;case C:a=11;break e;case R:a=14;break e;case D:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Dc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Vc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Dc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Bc(e){if(!e)return Ti;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Di(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Fs(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function $c(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,o))&&(rc(e,i,o,s),zs(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),ms();break;case 5:Js(t);break;case 1:Di(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(Es,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ni(eo,1&eo.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ni(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Ha(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,ss&&0!==(1048576&t.flags)&&es(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$a(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);As(t,n),i=vo(null,t,r,e,i,n);var o=yo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Di(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=sa,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=Ia(null,t,r,!0,o,n)):(t.tag=0,ss&&o&&ts(t),xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($a(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ra(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,ra(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Us(e,t),qs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(is=ci(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,os=null,n=_s(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),r===i){t=Ha(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Na(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Ua(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xs(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_a(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ni(Es,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ii.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Rs(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=ra(r=t.type,t.pendingProps),Ea(e,t,r,i=ra(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ra(r,i),$a(e,t),t.tag=1,Di(r)?(e=!0,Mi(t)):e=!1,As(t,n),aa(t,r,i),ca(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}$c(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[mi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[mi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc(function(){$c(t,l,n,r)}),l}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));$c(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc(function(){$c(null,e,null,null)}),t[mi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Xe()),0===(6&Il)&&(ql=Xe()+500,qi()))}break;case 13:hc(function(){var t=js(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}}),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=js(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=js(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},kt=function(){return wt},St=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ie=hc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,xi,Ne,Te,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[mi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc(function(){eu(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==l)throw new a;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class a extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l=function(e){return function(e){const t=s(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},d=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},m=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=h())||void 0===t?void 0:t[`_${e}`]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(s)),""].join(".")}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return!function(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){try{return"object"===typeof indexedDB}catch(e){return!1}}class x extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(E,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new x(n,s,t)}}const E=/\{\$([^}]+)}/g;function k(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(S(n)&&S(s)){if(!k(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S(e){return null!==e&&"object"===typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function T(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function C(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class I{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=A),void 0===r.error&&(r.error=A),void 0===r.complete&&(r.complete=A);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function A(){}function R(e){return e&&e._delegate?e._delegate:e}class D{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const O="[DEFAULT]";class P{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:O})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===O?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;return this.component?this.component.multipleInstances?e:O:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class j{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const L=[];var M;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(M||(M={}));const U={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},F=M.INFO,V={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},z=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=V[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class B{constructor(e){this.name=e,this._logLevel=F,this._logHandler=z,this._userLogHandler=null,L.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in M))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?U[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...t),this._logHandler(this,M.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...t),this._logHandler(this,M.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.INFO,...t),this._logHandler(this,M.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.WARN,...t),this._logHandler(this,M.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,M.ERROR,...t),this._logHandler(this,M.ERROR,...t)}}let q,$;const H=new WeakMap,W=new WeakMap,K=new WeakMap,G=new WeakMap,Q=new WeakMap;let Y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return W.get(e);if("objectStoreNames"===t)return e.objectStoreNames||K.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Z(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function X(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?($||($=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ee(this),n),Z(H.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Z(e.apply(ee(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ee(this),t,...r);return K.set(s,t.sort?t.sort():[t]),Z(s)}}function J(e){return"function"===typeof e?X(e):(e instanceof IDBTransaction&&function(e){if(W.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});W.set(e,t)}(e),t=e,(q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Y):e);var t}function Z(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Z(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&H.set(t,e)}).catch(()=>{}),Q.set(t,e),t}(e);if(G.has(e))return G.get(e);const t=J(e);return t!==e&&(G.set(e,t),Q.set(t,e)),t}const ee=e=>Q.get(e);const te=["get","getKey","getAll","getAllKeys","count"],ne=["put","add","delete","clear"],re=new Map;function ie(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(re.get(t))return re.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ne.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!te.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return re.set(t,s),s}Y=(e=>({...e,get:(t,n,r)=>ie(t,n)||e.get(t,n,r),has:(t,n)=>!!ie(t,n)||e.has(t,n)}))(Y);class se{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const oe="@firebase/app",ae="0.10.13",le=new B("@firebase/app"),ce="@firebase/app-compat",ue="@firebase/analytics-compat",he="@firebase/analytics",de="@firebase/app-check-compat",fe="@firebase/app-check",me="@firebase/auth",pe="@firebase/auth-compat",ge="@firebase/database",ve="@firebase/data-connect",ye="@firebase/database-compat",we="@firebase/functions",be="@firebase/functions-compat",xe="@firebase/installations",_e="@firebase/installations-compat",Ee="@firebase/messaging",ke="@firebase/messaging-compat",Se="@firebase/performance",Ne="@firebase/performance-compat",Te="@firebase/remote-config",Ce="@firebase/remote-config-compat",Ie="@firebase/storage",Ae="@firebase/storage-compat",Re="@firebase/firestore",De="@firebase/vertexai-preview",Oe="@firebase/firestore-compat",Pe="firebase",je="[DEFAULT]",Le={[oe]:"fire-core",[ce]:"fire-core-compat",[he]:"fire-analytics",[ue]:"fire-analytics-compat",[fe]:"fire-app-check",[de]:"fire-app-check-compat",[me]:"fire-auth",[pe]:"fire-auth-compat",[ge]:"fire-rtdb",[ve]:"fire-data-connect",[ye]:"fire-rtdb-compat",[we]:"fire-fn",[be]:"fire-fn-compat",[xe]:"fire-iid",[_e]:"fire-iid-compat",[Ee]:"fire-fcm",[ke]:"fire-fcm-compat",[Se]:"fire-perf",[Ne]:"fire-perf-compat",[Te]:"fire-rc",[Ce]:"fire-rc-compat",[Ie]:"fire-gcs",[Ae]:"fire-gcs-compat",[Re]:"fire-fst",[Oe]:"fire-fst-compat",[De]:"fire-vertex","fire-js":"fire-js",[Pe]:"fire-js-all"},Me=new Map,Ue=new Map,Fe=new Map;function Ve(e,t){try{e.container.addComponent(t)}catch(n){le.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ze(e){const t=e.name;if(Fe.has(t))return le.debug(`There were multiple attempts to register component ${t}.`),!1;Fe.set(t,e);for(const n of Me.values())Ve(n,e);for(const n of Ue.values())Ve(n,e);return!0}function Be(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qe(e){return void 0!==e.settings}const $e=new _("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class He{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new D("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $e.create("app-deleted",{appName:this._name})}}const We="10.14.1";function Ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:je,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw $e.create("bad-app-name",{appName:String(i)});if(n||(n=m()),!n)throw $e.create("no-options");const s=Me.get(i);if(s){if(k(n,s.options)&&k(r,s.config))return s;throw $e.create("duplicate-app",{appName:i})}const o=new j(i);for(const l of Fe.values())o.addComponent(l);const a=new He(n,r,o);return Me.set(i,a),a}function Ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je;const t=Me.get(e);if(!t&&e===je&&m())return Ke();if(!t)throw $e.create("no-app",{appName:e});return t}function Qe(e,t,n){var r;let i=null!==(r=Le[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void le.warn(e.join(" "))}ze(new D(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const Ye="firebase-heartbeat-store";let Xe=null;function Je(){return Xe||(Xe=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Z(o);return r&&o.addEventListener("upgradeneeded",e=>{r(Z(o.result),e.oldVersion,e.newVersion,Z(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ye)}catch(n){console.warn(n)}}}).catch(e=>{throw $e.create("idb-open",{originalErrorMessage:e.message})})),Xe}async function Ze(e,t){try{const n=(await Je()).transaction(Ye,"readwrite"),r=n.objectStore(Ye);await r.put(t,et(e)),await n.done}catch(n){if(n instanceof x)le.warn(n.message);else{const e=$e.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});le.warn(e.message)}}}function et(e){return`${e.name}!${e.options.appId}`}class tt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=nt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){le.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=nt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),it(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),it(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=l(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return le.warn(t),""}}}function nt(){return(new Date).toISOString().substring(0,10)}class rt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!b()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Je()).transaction(Ye),n=await t.objectStore(Ye).get(et(e));return await t.done,n}catch(t){if(t instanceof x)le.warn(t.message);else{const e=$e.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});le.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ze(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ze(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function it(e){return l(JSON.stringify({version:2,heartbeats:e})).length}var st;st="",ze(new D("platform-logger",e=>new se(e),"PRIVATE")),ze(new D("heartbeat",e=>new tt(e),"PRIVATE")),Qe(oe,ae,st),Qe(oe,ae,"esm2017"),Qe("fire-js","");Qe("firebase","10.14.1","app");function ot(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lt=at,ct=new _("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ut=new B("@firebase/auth");function ht(e){if(ut.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ut.error(`Auth (${We}): ${e}`,...n)}}function dt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw vt(e,...n)}function ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vt(e,...n)}function mt(e,t,n){const r=Object.assign(Object.assign({},lt()),{[t]:n});return new _("auth","Firebase",r).create(t,{appName:e.name})}function pt(e){return mt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&dt(e,"argument-error"),mt(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ct.create(e,...n)}function yt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw vt(t,...r)}}function wt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw ht(t),new Error(t)}function bt(e,t){e||wt(t)}function xt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function _t(){return"http:"===Et()||"https:"===Et()}function Et(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function kt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(_t()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class St{constructor(e,t){this.shortDelay=e,this.longDelay=t,bt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return kt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Nt(e,t){bt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Tt{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void wt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void wt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void wt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ct={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},It=new St(3e4,6e4);function At(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Rt(e,t,n,r){return Dt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=N(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Tt.fetch()(Pt(e,e.config.apiHost,n,o),l)})}async function Dt(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ct),t);try{const t=new Lt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Mt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Mt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Mt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Mt(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw mt(e,a,o);dt(e,a)}}catch(i){if(i instanceof x)throw i;dt(e,"network-request-failed",{message:String(i)})}}async function Ot(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Rt(e,t,n,r,i);return"mfaPendingCredential"in s&&dt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Pt(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Nt(e.config,i):`${e.config.apiScheme}://${i}`}function jt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Lt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(ft(this.auth,"network-request-failed")),It.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ft(e,t,r);return i.customData._tokenResponse=n,i}function Ut(e){return void 0!==e&&void 0!==e.enterprise}class Ft{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return jt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Vt(e,t){return Rt(e,"GET","/v2/recaptchaConfig",At(e,t))}async function zt(e,t){return Rt(e,"POST","/v1/accounts:lookup",t)}function Bt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function qt(e){return 1e3*Number(e)}function $t(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return ht("JWT malformed, contained fewer than 3 sections"),null;try{const e=c(n);return e?JSON.parse(e):(ht("Failed to decode base64 JWT payload"),null)}catch(i){return ht("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Ht(e){const t=$t(e);return yt(t,"internal-error"),yt("undefined"!==typeof t.exp,"internal-error"),yt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Wt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof x&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Kt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class Gt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bt(this.lastLoginAt),this.creationTime=Bt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Qt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Wt(e,zt(n,{idToken:r}));yt(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Yt(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Gt(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Yt(e){return e.map(e=>{var{providerId:t}=e,n=ot(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Xt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt("undefined"!==typeof e.idToken,"internal-error"),yt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ht(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){yt(0!==e.length,"internal-error");const t=Ht(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Dt(e,{},async()=>{const n=N({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Pt(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Tt.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Xt;return n&&(yt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(yt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(yt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xt,this.toJSON())}_performRefresh(){return wt("not implemented")}}function Jt(e,t){yt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Zt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ot(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Wt(this,this.stsTokenManager.getToken(this.auth,e));return yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=R(e),r=await n.getIdToken(t),i=$t(r);yt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Bt(qt(i.auth_time)),issuedAtTime:Bt(qt(i.iat)),expirationTime:Bt(qt(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=R(e);await Qt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Qt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qe(this.auth.app))return Promise.reject(pt(this.auth));const e=await this.getIdToken();return await Wt(this,async function(e,t){return Rt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,p=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:x,stsTokenManager:_}=t;yt(y&&_,e,"internal-error");const E=Xt.fromJSON(this.name,_);yt("string"===typeof y,e,"internal-error"),Jt(u,e.name),Jt(h,e.name),yt("boolean"===typeof w,e,"internal-error"),yt("boolean"===typeof b,e,"internal-error"),Jt(d,e.name),Jt(f,e.name),Jt(m,e.name),Jt(p,e.name),Jt(g,e.name),Jt(v,e.name);const k=new Zt({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:m,stsTokenManager:E,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(k.providerData=x.map(e=>Object.assign({},e))),p&&(k._redirectEventId=p),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Xt;r.updateFromServerResponse(t);const i=new Zt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Qt(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];yt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Yt(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Xt;o.updateFromIdToken(n);const a=new Zt({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Gt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const en=new Map;function tn(e){bt(e instanceof Function,"Expected a class definition");let t=en.get(e);return t?(bt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,en.set(e,t),t)}class nn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nn.type="NONE";const rn=nn;function sn(e,t,n){return`firebase:${e}:${t}:${n}`}class on{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=sn(this.userKey,r.apiKey,i),this.fullPersistenceKey=sn("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new on(tn(rn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||tn(rn);const s=sn(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Zt._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new on(i,e,n)):new on(i,e,n)}}function an(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ln(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fn(t))return"Blackberry";if(mn(t))return"Webos";if(cn(t))return"Safari";if((t.includes("chrome/")||un(t))&&!t.includes("edge/"))return"Chrome";if(dn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/firefox\//i.test(e)}function cn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function un(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/crios\//i.test(e)}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/iemobile/i.test(e)}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/android/i.test(e)}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/blackberry/i.test(e)}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/webos/i.test(e)}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function gn(){return function(){const e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y();return pn(e)||dn(e)||mn(e)||fn(e)||/windows phone/i.test(e)||hn(e)}function yn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=an(y());break;case"Worker":t=`${an(y())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${We}/${r}`}class wn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class bn{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class xn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new En(this),this.idTokenSubscription=new En(this),this.beforeStateQueue=new wn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tn(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await on.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await zt(this,{idToken:e}),n=await Zt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qe(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Qt(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qe(this.app))return Promise.reject(pt(this));const t=e?R(e):null;return t&&yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qe(this.app)?Promise.reject(pt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qe(this.app)?Promise.reject(pt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Rt(e,"GET","/v2/passwordPolicy",At(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new bn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new _("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Rt(e,"POST","/v2/accounts:revokeToken",At(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&tn(e)||this._popupRedirectResolver;yt(t,this,"argument-error"),this.redirectPersistenceManager=await on.create(this,[tn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ut.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ut.warn(`Auth (${We}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function _n(e){return R(e)}class En{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new I(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let kn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sn(e){return kn.loadJS(e)}function Nn(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Tn{constructor(e){this.type="recaptcha-enterprise",this.auth=_n(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ut(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Vt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ft(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Ut(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=kn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Sn(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Cn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Tn(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function In(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Cn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Cn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}function An(e,t,n){const r=_n(e);yt(r._canInitEmulator,r,"emulator-config-failed"),yt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Rn(t),{host:o,port:a}=function(e){const t=Rn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Dn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Dn(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Rn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Dn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class On{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wt("not implemented")}_getIdTokenResponse(e){return wt("not implemented")}_linkToIdToken(e,t){return wt("not implemented")}_getReauthenticationResolver(e){return wt("not implemented")}}async function Pn(e,t){return Rt(e,"POST","/v1/accounts:signUp",t)}async function jn(e,t){return Ot(e,"POST","/v1/accounts:signInWithPassword",At(e,t))}class Ln extends On{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ln(e,t,"password")}static _fromEmailAndCode(e,t){return new Ln(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return In(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",jn);case"emailLink":return async function(e,t){return Ot(e,"POST","/v1/accounts:signInWithEmailLink",At(e,t))}(e,{email:this._email,oobCode:this._password});default:dt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return In(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Pn);case"emailLink":return async function(e,t){return Ot(e,"POST","/v1/accounts:signInWithEmailLink",At(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:dt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Mn(e,t){return Ot(e,"POST","/v1/accounts:signInWithIdp",At(e,t))}class Un extends On{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Un(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ot(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Un(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Mn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Mn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=N(t)}return e}}const Fn={USER_NOT_FOUND:"user-not-found"};class Vn extends On{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Vn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Vn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Ot(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Ot(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,t));if(n.temporaryProof)throw Mt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Ot(e,"POST","/v1/accounts:signInWithPhoneNumber",At(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Fn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Vn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class zn{constructor(e){var t,n,r,i,s,o;const a=T(C(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);yt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=T(C(e)).link,n=t?T(C(t)).deep_link_id:null,r=T(C(e)).deep_link_id;return(r?T(C(r)).link:null)||r||n||t||e}(e);try{return new zn(t)}catch(n){return null}}}class Bn{constructor(){this.providerId=Bn.PROVIDER_ID}static credential(e,t){return Ln._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=zn.parseLink(t);return yt(n,"argument-error"),Ln._fromEmailAndCode(e,n.code,n.tenantId)}}Bn.PROVIDER_ID="password",Bn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Bn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $n extends qn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Hn extends $n{constructor(){super("facebook.com")}static credential(e){return Un._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Hn.credential(t.oauthAccessToken)}catch(n){return null}}}Hn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Hn.PROVIDER_ID="facebook.com";class Wn extends $n{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Un._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Wn.credential(n,r)}catch(i){return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com",Wn.PROVIDER_ID="google.com";class Kn extends $n{constructor(){super("github.com")}static credential(e){return Un._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Kn.credential(t.oauthAccessToken)}catch(n){return null}}}Kn.GITHUB_SIGN_IN_METHOD="github.com",Kn.PROVIDER_ID="github.com";class Gn extends $n{constructor(){super("twitter.com")}static credential(e,t){return Un._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Gn.credential(n,r)}catch(i){return null}}}Gn.TWITTER_SIGN_IN_METHOD="twitter.com",Gn.PROVIDER_ID="twitter.com";class Qn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Zt._fromIdTokenResponse(e,n,r),s=Yn(n);return new Qn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Yn(n);return new Qn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Yn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Xn extends x{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Xn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Xn(e,t,n,r)}}function Jn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Xn._fromErrorAndOperation(e,n,t,r);throw n})}async function Zn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Wt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Qn._forOperation(e,"link",r)}async function er(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(qe(r.app))return Promise.reject(pt(r));const i="reauthenticate";try{const s=await Wt(e,Jn(r,i,t,e),n);yt(s.idToken,r,"internal-error");const o=$t(s.idToken);yt(o,r,"internal-error");const{sub:a}=o;return yt(e.uid===a,r,"user-mismatch"),Qn._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&dt(r,"user-mismatch"),s}}async function tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qe(e.app))return Promise.reject(pt(e));const r="signIn",i=await Jn(e,r,t),s=await Qn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}new WeakMap;const nr="__sak";class rr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nr,"1"),this.storage.removeItem(nr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ir extends rr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);gn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ir.type="LOCAL";const sr=ir;class or extends rr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}or.type="SESSION";const ar=or;class lr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new lr(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}lr.receivers=[];class ur{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=cr("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function hr(){return window}function dr(){return"undefined"!==typeof hr().WorkerGlobalScope&&"function"===typeof hr().importScripts}const fr="firebaseLocalStorageDb",mr="firebaseLocalStorage",pr="fbase_key";class gr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vr(e,t){return e.transaction([mr],t?"readwrite":"readonly").objectStore(mr)}function yr(){const e=indexedDB.open(fr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(mr,{keyPath:pr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(mr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(fr);return new gr(e).toPromise()}(),t(await yr()))})})}async function wr(e,t,n){const r=vr(e,!0).put({[pr]:t,value:n});return new gr(r).toPromise()}function br(e,t){const n=vr(e,!0).delete(t);return new gr(n).toPromise()}class xr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await yr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lr._getInstance(dr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ur(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yr();return await wr(e,nr,"1"),await br(e,nr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=vr(e,!1).get(t),r=await new gr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>br(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=vr(e,!1).getAll();return new gr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}xr.type="LOCAL";const _r=xr;Nn("rcb"),new St(3e4,6e4);const Er="recaptcha";async function kr(e,t,n){var r;const i=await n.verify();try{let s;if(yt("string"===typeof i,e,"argument-error"),yt(n.type===Er,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){yt("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Rt(e,"POST","/v2/accounts/mfaEnrollment:start",At(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{yt("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;yt(n,e,"missing-multi-factor-info");const o=await function(e,t){return Rt(e,"POST","/v2/accounts/mfaSignIn:start",At(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Rt(e,"POST","/v1/accounts:sendVerificationCode",At(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Sr{constructor(e){this.providerId=Sr.PROVIDER_ID,this.auth=_n(e)}verifyPhoneNumber(e,t){return kr(this.auth,e,R(t))}static credential(e,t){return Vn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Sr.credentialFromTaggedObject(t)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Vn._fromTokenResponse(n,r):null}}function Nr(e,t){return t?tn(t):(yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Sr.PROVIDER_ID="phone",Sr.PHONE_SIGN_IN_METHOD="phone";class Tr extends On{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Cr(e){return tr(e.auth,new Tr(e),e.bypassAuthState)}function Ir(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),er(n,new Tr(e),e.bypassAuthState)}async function Ar(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),Zn(n,new Tr(e),e.bypassAuthState)}class Rr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Cr;case"linkViaPopup":case"linkViaRedirect":return Ar;case"reauthViaPopup":case"reauthViaRedirect":return Ir;default:dt(this.auth,"internal-error")}}resolve(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dr=new St(2e3,1e4);async function Or(e,t,n){if(qe(e.app))return Promise.reject(ft(e,"operation-not-supported-in-this-environment"));const r=_n(e);gt(e,t,qn);const i=Nr(r,n);return new Pr(r,"signInViaPopup",t,i).executeNotNull()}class Pr extends Rr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Pr.currentPopupAction&&Pr.currentPopupAction.cancel(),Pr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){bt(1===this.filter.length,"Popup operations only handle one event");const e=cr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(ft(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ft(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Dr.get())};e()}}Pr.currentPopupAction=null;const jr=new Map;class Lr extends Rr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=jr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Fr(t),r=Ur(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}jr.set(this.auth._key(),e)}return this.bypassAuthState||jr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Mr(e,t){jr.set(e._key(),t)}function Ur(e){return tn(e._redirectPersistence)}function Fr(e){return sn("pendingRedirect",e.config.apiKey,e.name)}async function Vr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qe(e.app))return Promise.reject(pt(e));const r=_n(e),i=Nr(r,t),s=new Lr(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class zr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!qr(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ft(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Br(e))}saveEventToCache(e){this.cachedEventUids.add(Br(e)),this.lastProcessedEventTime=Date.now()}}function Br(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function qr(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const $r=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hr=/^https?/;async function Wr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Rt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Kr(r))return}catch(n){}dt(e,"unauthorized-domain")}function Kr(e){const t=xt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Hr.test(n))return!1;if($r.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Gr=new St(3e4,6e4);function Qr(){const e=hr().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Yr(e){return new Promise((t,n)=>{var r,i,s;function o(){Qr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Qr(),n(ft(e,"network-request-failed"))},timeout:Gr.get()})}if(null===(i=null===(r=hr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=hr().gapi)||void 0===s?void 0:s.load)){const t=Nn("iframefcb");return hr()[t]=()=>{gapi.load?o():n(ft(e,"network-request-failed"))},Sn(`${kn.gapiScript}?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Xr=null,e})}let Xr=null;const Jr=new St(5e3,15e3),Zr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ei=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ti(e){const t=e.config;yt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Nt(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:We},i=ei.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${N(r).slice(1)}`}async function ni(e){const t=await function(e){return Xr=Xr||Yr(e),Xr}(e),n=hr().gapi;return yt(n,e,"internal-error"),t.open({where:document.body,url:ti(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=ft(e,"network-request-failed"),s=hr().setTimeout(()=>{r(i)},Jr.get());function o(){hr().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const ri={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ii{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function si(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ri),{width:r.toString(),height:i.toString(),top:s,left:o}),c=y().toLowerCase();n&&(a=un(c)?"_blank":n),ln(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return pn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:y())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ii(null);const h=window.open(t||"",a,u);yt(h,e,"popup-blocked");try{h.focus()}catch(d){}return new ii(h)}const oi="__/auth/handler",ai="emulator/auth/handler",li=encodeURIComponent("fac");async function ci(e,t,n,r,i,s){yt(e.config.authDomain,e,"auth-domain-config-required"),yt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:We,eventId:i};if(t instanceof qn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof $n){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${li}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${oi}`;return Nt(t,ai)}(e)}?${N(a).slice(1)}${c}`}const ui="webStorageSupport";const hi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ar,this._completeRedirectFn=Vr,this._overrideRedirectResult=Mr}async _openPopup(e,t,n,r){var i;bt(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return si(e,await ci(e,t,n,xt(),r),cr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){hr().location.href=e}(await ci(e,t,n,xt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await ni(e),n=new zr(e);return t.register("authEvent",t=>{yt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ui,{type:ui},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ui];void 0!==i&&t(!!i),dt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vn()||cn()||pn()}};var di="@firebase/auth",fi="1.7.9";class mi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const pi=p("authIdTokenMaxAge")||300;let gi=null;var vi;kn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=ft("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},vi="Browser",ze(new D("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;yt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:vi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yn(vi)},c=new xn(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),ze(new D("auth-internal",e=>(e=>new mi(e))(_n(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Qe(di,fi,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(vi)),Qe(di,fi,"esm2017");var yi,wi,bi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},xi={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(a,a);if(h(e))return t=g(d(e),t),new p(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new p(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new p(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new p(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),p=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,m(n,2*i+2*s),n[2*i+2*s+1]+=l*g,m(n,2*i+2*s+1),n[2*i+2*s+1]+=f*p,m(n,2*i+2*s+1),n[2*i+2*s+2]+=l*p,m(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,wi=xi.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},yi=xi.Integer=r}).apply("undefined"!==typeof bi?bi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var _i,Ei,ki,Si,Ni,Ti,Ci,Ii,Ai="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ri={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ai&&Ai];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function w(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function E(e){i.setTimeout(()=>{throw e},0)}function k(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new N,e=>e.reset());class N{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},A=()=>{const e=i.Promise.resolve(void 0);T=()=>{e.then(R)}};var R=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(n){E(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function D(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function j(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&j.aa.h.call(this)}}h(j,O);var L={2:"touch",3:"pen",4:"mouse"};j.prototype.h=function(){j.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function q(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=q(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[$]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=q(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=q(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[$]=null)):V(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new j(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;x(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function we(){O.call(this,"c")}h(ye,O),h(we,O);var be={},xe=null;function _e(){return xe=xe||new ne}function Ee(e){O.call(this,be.La,e)}function ke(e){const t=_e();re(t,new Ee(t))}function Se(e,t){O.call(this,be.STAT_EVENT,e),this.stat=t}function Ne(e){const t=_e();re(t,new Se(t,e))}function Te(e,t){O.call(this,be.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",h(Ee,O),be.STAT_EVENT="statevent",h(Se,O),be.Ma="timingevent",h(Te,O),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Re,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(Pe,me),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Re=new Pe;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),qe(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?w(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function qe(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Ne(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!m(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),qe(a)),r.g=o}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}je.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||ke(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ne(12),Ke(this),We(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Ue){4==d&&(this.s=4,Ne(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Ne(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ne(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ne(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Ae(this.i,this.l,a,null),Ge(this,a);4==d&&Ke(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,qe(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=_(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Ke(this),We(this)}}}catch(Di){}},je.prototype.cancel=function(){this.J=!0,Ke(this)},je.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),Ne(17)),Ke(this),this.s=2,We(this)):$e(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(_t(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Et(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,wt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var pt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,wt=/[#\?@]/g,bt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _t(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Et(e,t){_t(e),t=Nt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return _t(e),t=Nt(e,t),e.g.has(t)}function St(e,t,n){Et(e,t),0<n.length&&(e.i=null,e.g.set(Nt(e,t),d(n)),e.h+=n.length)}function Nt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ct(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function At(e){this.l=e.Ub||null,this.j=e.eb||!1}function Rt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){_t(this),this.i=null,e=Nt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){_t(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){_t(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){_t(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(Nt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return _t(this),this.i=null,kt(this,e=Nt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(At,me),At.prototype.g=function(){return new Rt(this.l,this.j)},At.prototype.i=(pt={},function(){return pt}),h(Rt,ne),(e=Rt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Pt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ne);var Ut=/^https?$/i,Ft=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),qt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ut.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{qt(e)}}}function qt(e,t){if(e.g){$t(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ji){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new je(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),qe(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||A(),C||(T(),C=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new je(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{It(a,e,"req"+n+"_")}catch(Di){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||A(),C||(T(),C=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=_e(),new Te(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else Ne(2);e.G=0,e.l&&e.l.sa(t),hn(e),Xt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new At({eb:n})):new Mt(e.pa)).Ha(e.J),t}function mn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new wn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){we.call(this),this.status=1}function wn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Re.g(),this.v=this.o?pe(this.o):pe(Re),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ne(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new je(this,this.j,e);let s=this.o;if(this.S&&(s?(s=w(s),x(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(jt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ne(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=mn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(vn,ye),h(yn,we),h(wn,mn),wn.prototype.ua=function(){re(this.g,"a")},wn.prototype.ta=function(e){re(this.g,new vn(e))},wn.prototype.sa=function(e){re(this.g,new yn)},wn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Ii=Ri.createWebChannelTransport=function(){return new pn},Ci=Ri.getStatEventTarget=function(){return _e()},Ti=Ri.Event=be,Ni=Ri.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,Si=Ri.ErrorCode=De,Oe.COMPLETE="complete",ki=Ri.EventType=Oe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Ei=Ri.WebChannel=ge,Ri.FetchXmlHttpFactory=At,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,_i=Ri.XhrIo=Mt}).apply("undefined"!==typeof Ai?Ai:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Di="@firebase/firestore";class Oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Oi.UNAUTHENTICATED=new Oi(null),Oi.GOOGLE_CREDENTIALS=new Oi("google-credentials-uid"),Oi.FIRST_PARTY=new Oi("first-party-uid"),Oi.MOCK_USER=new Oi("mock-user");let Pi="10.14.0";const ji=new B("@firebase/firestore");function Li(){return ji.logLevel}function Mi(e){if(ji.logLevel<=M.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vi);ji.debug(`Firestore (${Pi}): ${e}`,...i)}}function Ui(e){if(ji.logLevel<=M.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vi);ji.error(`Firestore (${Pi}): ${e}`,...i)}}function Fi(e){if(ji.logLevel<=M.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vi);ji.warn(`Firestore (${Pi}): ${e}`,...i)}}function Vi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function zi(){const e=`FIRESTORE (${Pi}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Ui(e),new Error(e)}function Bi(e,t){e||zi()}function qi(e,t){return e}const $i={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Hi extends x{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ki{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Oi.UNAUTHENTICATED))}shutdown(){}}class Qi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yi{constructor(e){this.t=e,this.currentUser=Oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Bi(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wi,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Mi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Mi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wi)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Mi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Bi("string"==typeof t.accessToken),new Ki(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bi(null===e||"string"==typeof e),new Oi(e)}}class Xi{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Oi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ji{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Xi(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class es{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Bi(void 0===this.o);const n=e=>{null!=e.error&&Mi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Mi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Mi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Mi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Bi("string"==typeof e.token),this.R=e.token,new Zi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ts(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ns{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ts(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function rs(e,t){return e<t?-1:e>t?1:0}function is(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class ss{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Hi($i.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Hi($i.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Hi($i.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Hi($i.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ss.fromMillis(Date.now())}static fromDate(e){return ss.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new ss(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rs(this.nanoseconds,e.nanoseconds):rs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class os{constructor(e){this.timestamp=e}static fromTimestamp(e){return new os(e)}static min(){return new os(new ss(0,0))}static max(){return new os(new ss(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class as{constructor(e,t,n){void 0===t?t=0:t>e.length&&zi(),void 0===n?n=e.length-t:n>e.length-t&&zi(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===as.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof as?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ls extends as{construct(e,t,n){return new ls(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Hi($i.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new ls(e)}static emptyPath(){return new ls([])}}const cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class us extends as{construct(e,t,n){return new us(e,t,n)}static isValidIdentifier(e){return cs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),us.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new us(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Hi($i.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Hi($i.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Hi($i.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Hi($i.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new us(t)}static emptyPath(){return new us([])}}class hs{constructor(e){this.path=e}static fromPath(e){return new hs(ls.fromString(e))}static fromName(e){return new hs(ls.fromString(e).popFirst(5))}static empty(){return new hs(ls.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ls.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ls.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new hs(new ls(e.slice()))}}class ds{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ds.UNKNOWN_ID=-1;function fs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=os.fromTimestamp(1e9===r?new ss(n+1,0):new ss(n,r));return new ps(i,hs.empty(),t)}function ms(e){return new ps(e.readTime,e.key,-1)}class ps{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ps(os.min(),hs.empty(),-1)}static max(){return new ps(os.max(),hs.empty(),-1)}}function gs(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=hs.comparator(e.documentKey,t.documentKey),0!==n?n:rs(e.largestBatchId,t.largestBatchId))}const vs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ys{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ws(e){if(e.code!==$i.FAILED_PRECONDITION||e.message!==vs)throw e;Mi("LocalStore","Unexpectedly lost primary lease")}class bs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new bs((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof bs?t:bs.resolve(t)}catch(e){return bs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):bs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):bs.reject(t)}static resolve(e){return new bs((t,n)=>{t(e)})}static reject(e){return new bs((t,n)=>{n(e)})}static waitFor(e){return new bs((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=bs.resolve(!1);for(const n of e)t=t.next(e=>e?bs.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new bs((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new bs((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function xs(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _s(e){return"IndexedDbTransactionError"===e.name}class Es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function ks(e){return null==e}function Ss(e){return 0===e&&1/e==-1/0}function Ns(e){return"number"==typeof e&&Number.isInteger(e)&&!Ss(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Es.oe=-1;const Ts=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cs=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Is=Cs,As=[...Is,"indexConfiguration","indexState","indexEntries"];function Rs(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ds(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Os(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ps{constructor(e,t){this.comparator=e,this.root=t||Ls.EMPTY}insert(e,t){return new Ps(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ls.BLACK,null,null))}remove(e){return new Ps(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ls.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new js(this.root,e,this.comparator,!1)}getReverseIterator(){return new js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new js(this.root,e,this.comparator,!0)}}class js{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ls{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ls.RED,this.left=null!=r?r:Ls.EMPTY,this.right=null!=i?i:Ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ls(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ls.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ls.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zi();if(this.right.isRed())throw zi();const e=this.left.check();if(e!==this.right.check())throw zi();return e+(this.isRed()?0:1)}}Ls.EMPTY=null,Ls.RED=!0,Ls.BLACK=!1,Ls.EMPTY=new class{constructor(){this.size=0}get key(){throw zi()}get value(){throw zi()}get color(){throw zi()}get left(){throw zi()}get right(){throw zi()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ls(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ms{constructor(e){this.comparator=e,this.data=new Ps(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Us(this.data.getIterator())}getIteratorFrom(e){return new Us(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ms))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ms(this.comparator);return t.data=e,t}}class Us{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fs{constructor(e){this.fields=e,e.sort(us.comparator)}static empty(){return new Fs([])}unionWith(e){let t=new Ms(us.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Fs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return is(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Vs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class zs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Vs("Invalid base64 string: "+e):e}}(e);return new zs(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new zs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}zs.EMPTY_BYTE_STRING=new zs("");const Bs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qs(e){if(Bi(!!e),"string"==typeof e){let t=0;const n=Bs.exec(e);if(Bi(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$s(e.seconds),nanos:$s(e.nanos)}}function $s(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Hs(e){return"string"==typeof e?zs.fromBase64String(e):zs.fromUint8Array(e)}function Ws(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ks(e){const t=e.mapValue.fields.__previous_value__;return Ws(t)?Ks(t):t}function Gs(e){const t=qs(e.mapValue.fields.__local_write_time__.timestampValue);return new ss(t.seconds,t.nanos)}class Qs{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Ys{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ys("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ys&&e.projectId===this.projectId&&e.database===this.database}}const Xs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Js(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ws(e)?4:po(e)?9007199254740991:fo(e)?10:11:zi()}function Zs(e,t){if(e===t)return!0;const n=Js(e);if(n!==Js(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gs(e).isEqual(Gs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=qs(e.timestampValue),r=qs(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Hs(e.bytesValue).isEqual(Hs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $s(e.geoPointValue.latitude)===$s(t.geoPointValue.latitude)&&$s(e.geoPointValue.longitude)===$s(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $s(e.integerValue)===$s(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=$s(e.doubleValue),r=$s(t.doubleValue);return n===r?Ss(n)===Ss(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return is(e.arrayValue.values||[],t.arrayValue.values||[],Zs);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Rs(n)!==Rs(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zs(n[i],r[i])))return!1;return!0}(e,t);default:return zi()}}function eo(e,t){return void 0!==(e.values||[]).find(e=>Zs(e,t))}function to(e,t){if(e===t)return 0;const n=Js(e),r=Js(t);if(n!==r)return rs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=$s(e.integerValue||e.doubleValue),r=$s(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return no(e.timestampValue,t.timestampValue);case 4:return no(Gs(e),Gs(t));case 5:return rs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Hs(e),r=Hs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=rs(n[i],r[i]);if(0!==e)return e}return rs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=rs($s(e.latitude),$s(t.latitude));return 0!==n?n:rs($s(e.longitude),$s(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ro(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o.value)||void 0===n?void 0:n.arrayValue,c=null===(r=a.value)||void 0===r?void 0:r.arrayValue,u=rs((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:ro(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Xs.mapValue&&t===Xs.mapValue)return 0;if(e===Xs.mapValue)return 1;if(t===Xs.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=rs(r[o],s[o]);if(0!==e)return e;const t=to(n[r[o]],i[s[o]]);if(0!==t)return t}return rs(r.length,s.length)}(e.mapValue,t.mapValue);default:throw zi()}}function no(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rs(e,t);const n=qs(e),r=qs(t),i=rs(n.seconds,r.seconds);return 0!==i?i:rs(n.nanos,r.nanos)}function ro(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=to(n[i],r[i]);if(e)return e}return rs(n.length,r.length)}function io(e){return so(e)}function so(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=qs(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Hs(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return hs.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=so(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${so(e.fields[i])}`;return n+"}"}(e.mapValue):zi()}function oo(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ao(e){return!!e&&"integerValue"in e}function lo(e){return!!e&&"arrayValue"in e}function co(e){return!!e&&"nullValue"in e}function uo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ho(e){return!!e&&"mapValue"in e}function fo(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function mo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ds(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=mo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=mo(e.arrayValue.values[n]);return t}return Object.assign({},e)}function po(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class go{constructor(e){this.value=e}static empty(){return new go({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ho(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mo(t)}setAll(e){let t=us.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=mo(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ho(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ho(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ds(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new go(mo(this.value))}}function vo(e){const t=[];return Ds(e.fields,(e,n)=>{const r=new us([e]);if(ho(n)){const e=vo(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Fs(t)}class yo{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new yo(e,0,os.min(),os.min(),os.min(),go.empty(),0)}static newFoundDocument(e,t,n,r){return new yo(e,1,t,os.min(),n,r,0)}static newNoDocument(e,t){return new yo(e,2,t,os.min(),os.min(),go.empty(),0)}static newUnknownDocument(e,t){return new yo(e,3,t,os.min(),os.min(),go.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(os.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=go.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=go.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=os.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yo&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class wo{constructor(e,t){this.position=e,this.inclusive=t}}function bo(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?hs.comparator(hs.fromName(o.referenceValue),n.key):to(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function xo(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zs(e.position[n],t.position[n]))return!1;return!0}class _o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Eo(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ko{}class So extends ko{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Oo(e,t,n):"array-contains"===t?new Mo(e,n):"in"===t?new Uo(e,n):"not-in"===t?new Fo(e,n):"array-contains-any"===t?new Vo(e,n):new So(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Po(e,n):new jo(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(to(t,this.value)):null!==t&&Js(this.value)===Js(t)&&this.matchesComparison(to(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zi()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class No extends ko{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new No(e,t)}matches(e){return To(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function To(e){return"and"===e.op}function Co(e){return Io(e)&&To(e)}function Io(e){for(const t of e.filters)if(t instanceof No)return!1;return!0}function Ao(e){if(e instanceof So)return e.field.canonicalString()+e.op.toString()+io(e.value);if(Co(e))return e.filters.map(e=>Ao(e)).join(",");{const t=e.filters.map(e=>Ao(e)).join(",");return`${e.op}(${t})`}}function Ro(e,t){return e instanceof So?function(e,t){return t instanceof So&&e.op===t.op&&e.field.isEqual(t.field)&&Zs(e.value,t.value)}(e,t):e instanceof No?function(e,t){return t instanceof No&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ro(n,t.filters[r]),!0)}(e,t):void zi()}function Do(e){return e instanceof So?function(e){return`${e.field.canonicalString()} ${e.op} ${io(e.value)}`}(e):e instanceof No?function(e){return e.op.toString()+" {"+e.getFilters().map(Do).join(" ,")+"}"}(e):"Filter"}class Oo extends So{constructor(e,t,n){super(e,t,n),this.key=hs.fromName(n.referenceValue)}matches(e){const t=hs.comparator(e.key,this.key);return this.matchesComparison(t)}}class Po extends So{constructor(e,t){super(e,"in",t),this.keys=Lo("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jo extends So{constructor(e,t){super(e,"not-in",t),this.keys=Lo("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>hs.fromName(e.referenceValue))}class Mo extends So{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lo(t)&&eo(t.arrayValue,this.value)}}class Uo extends So{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&eo(this.value.arrayValue,t)}}class Fo extends So{constructor(e,t){super(e,"not-in",t)}matches(e){if(eo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!eo(this.value.arrayValue,t)}}class Vo extends So{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>eo(this.value.arrayValue,e))}}class zo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ue=null}}function Bo(e){return new zo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function qo(e){const t=qi(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ao(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ks(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>io(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>io(e)).join(",")),t.ue=e}return t.ue}function $o(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Eo(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ro(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!xo(e.startAt,t.startAt)&&xo(e.endAt,t.endAt)}function Ho(e){return hs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Wo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ko(e,t,n,r,i,s,o,a){return new Wo(e,t,n,r,i,s,o,a)}function Go(e){return new Wo(e)}function Qo(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Yo(e){return null!==e.collectionGroup}function Xo(e){const t=qi(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ms(us.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new _o(r,n))}),e.has(us.keyField().canonicalString())||t.ce.push(new _o(us.keyField(),n))}return t.ce}function Jo(e){const t=qi(e);return t.le||(t.le=Zo(t,Xo(e))),t.le}function Zo(e,t){if("F"===e.limitType)return Bo(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new _o(e.field,t)});const n=e.endAt?new wo(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new wo(e.startAt.position,e.startAt.inclusive):null;return Bo(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ea(e,t){const n=e.filters.concat([t]);return new Wo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ta(e,t,n){return new Wo(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function na(e,t){return $o(Jo(e),Jo(t))&&e.limitType===t.limitType}function ra(e){return`${qo(Jo(e))}|lt:${e.limitType}`}function ia(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Do(e)).join(", ")}]`),ks(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>io(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>io(e)).join(",")),`Target(${t})`}(Jo(e))}; limitType=${e.limitType})`}function sa(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):hs.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Xo(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=bo(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Xo(e),t))&&!(e.endAt&&!function(e,t,n){const r=bo(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Xo(e),t))}(e,t)}function oa(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function aa(e){return(t,n)=>{let r=!1;for(const i of Xo(e)){const e=la(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function la(e,t,n){const r=e.field.isKeyField()?hs.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?to(r,i):zi()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zi()}}class ca{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Os(this.inner)}size(){return this.innerSize}}const ua=new Ps(hs.comparator);function ha(){return ua}const da=new Ps(hs.comparator);function fa(){let e=da;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ma(e){let t=da;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function pa(){return va()}function ga(){return va()}function va(){return new ca(e=>e.toString(),(e,t)=>e.isEqual(t))}const ya=new Ps(hs.comparator),wa=new Ms(hs.comparator);function ba(){let e=wa;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const xa=new Ms(rs);function _a(){return xa}function Ea(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ss(t)?"-0":t}}function ka(e){return{integerValue:""+e}}function Sa(e,t){return Ns(t)?ka(t):Ea(e,t)}class Na{constructor(){this._=void 0}}function Ta(e,t,n){return e instanceof Aa?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ws(t)&&(t=Ks(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ra?Da(e,t):e instanceof Oa?Pa(e,t):function(e,t){const n=Ia(e,t),r=La(n)+La(e.Pe);return ao(n)&&ao(e.Pe)?ka(r):Ea(e.serializer,r)}(e,t)}function Ca(e,t,n){return e instanceof Ra?Da(e,t):e instanceof Oa?Pa(e,t):n}function Ia(e,t){return e instanceof ja?function(e){return ao(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Aa extends Na{}class Ra extends Na{constructor(e){super(),this.elements=e}}function Da(e,t){const n=Ma(t);for(const r of e.elements)n.some(e=>Zs(e,r))||n.push(r);return{arrayValue:{values:n}}}class Oa extends Na{constructor(e){super(),this.elements=e}}function Pa(e,t){let n=Ma(t);for(const r of e.elements)n=n.filter(e=>!Zs(e,r));return{arrayValue:{values:n}}}class ja extends Na{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function La(e){return $s(e.integerValue||e.doubleValue)}function Ma(e){return lo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ua{constructor(e,t){this.field=e,this.transform=t}}class Fa{constructor(e,t){this.version=e,this.transformResults=t}}class Va{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Va}static exists(e){return new Va(void 0,e)}static updateTime(e){return new Va(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function za(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ba{}function qa(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Za(e.key,Va.none()):new Ga(e.key,e.data,Va.none());{const n=e.data,r=go.empty();let i=new Ms(us.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Qa(e.key,r,new Fs(i.toArray()),Va.none())}}function $a(e,t,n){e instanceof Ga?function(e,t,n){const r=e.value.clone(),i=Xa(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Qa?function(e,t,n){if(!za(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xa(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ya(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ha(e,t,n,r){return e instanceof Ga?function(e,t,n,r){if(!za(e.precondition,t))return n;const i=e.value.clone(),s=Ja(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Qa?function(e,t,n,r){if(!za(e.precondition,t))return n;const i=Ja(e.fieldTransforms,r,t),s=t.data;return s.setAll(Ya(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return za(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Wa(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ia(r.transform,e||null);null!=i&&(null===n&&(n=go.empty()),n.set(r.field,i))}return n||null}function Ka(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&is(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ra&&t instanceof Ra||e instanceof Oa&&t instanceof Oa?is(e.elements,t.elements,Zs):e instanceof ja&&t instanceof ja?Zs(e.Pe,t.Pe):e instanceof Aa&&t instanceof Aa}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ga extends Ba{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qa extends Ba{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ya(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xa(e,t,n){const r=new Map;Bi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Ca(o,a,n[i]))}return r}function Ja(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Ta(e,s,t))}return r}class Za extends Ba{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class el extends Ba{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&$a(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ha(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ha(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ga();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=qa(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(os.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ba())}isEqual(e){return this.batchId===e.batchId&&is(this.mutations,e.mutations,(e,t)=>Ka(e,t))&&is(this.baseMutations,e.baseMutations,(e,t)=>Ka(e,t))}}class nl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Bi(e.mutations.length===n.length);let r=ya;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new nl(e,t,n,r)}}class rl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class il{constructor(e,t){this.count=e,this.unchangedNames=t}}var sl,ol;function al(e){switch(e){default:return zi();case $i.CANCELLED:case $i.UNKNOWN:case $i.DEADLINE_EXCEEDED:case $i.RESOURCE_EXHAUSTED:case $i.INTERNAL:case $i.UNAVAILABLE:case $i.UNAUTHENTICATED:return!1;case $i.INVALID_ARGUMENT:case $i.NOT_FOUND:case $i.ALREADY_EXISTS:case $i.PERMISSION_DENIED:case $i.FAILED_PRECONDITION:case $i.ABORTED:case $i.OUT_OF_RANGE:case $i.UNIMPLEMENTED:case $i.DATA_LOSS:return!0}}function ll(e){if(void 0===e)return Ui("GRPC error has no .code"),$i.UNKNOWN;switch(e){case sl.OK:return $i.OK;case sl.CANCELLED:return $i.CANCELLED;case sl.UNKNOWN:return $i.UNKNOWN;case sl.DEADLINE_EXCEEDED:return $i.DEADLINE_EXCEEDED;case sl.RESOURCE_EXHAUSTED:return $i.RESOURCE_EXHAUSTED;case sl.INTERNAL:return $i.INTERNAL;case sl.UNAVAILABLE:return $i.UNAVAILABLE;case sl.UNAUTHENTICATED:return $i.UNAUTHENTICATED;case sl.INVALID_ARGUMENT:return $i.INVALID_ARGUMENT;case sl.NOT_FOUND:return $i.NOT_FOUND;case sl.ALREADY_EXISTS:return $i.ALREADY_EXISTS;case sl.PERMISSION_DENIED:return $i.PERMISSION_DENIED;case sl.FAILED_PRECONDITION:return $i.FAILED_PRECONDITION;case sl.ABORTED:return $i.ABORTED;case sl.OUT_OF_RANGE:return $i.OUT_OF_RANGE;case sl.UNIMPLEMENTED:return $i.UNIMPLEMENTED;case sl.DATA_LOSS:return $i.DATA_LOSS;default:return zi()}}(ol=sl||(sl={}))[ol.OK=0]="OK",ol[ol.CANCELLED=1]="CANCELLED",ol[ol.UNKNOWN=2]="UNKNOWN",ol[ol.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ol[ol.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ol[ol.NOT_FOUND=5]="NOT_FOUND",ol[ol.ALREADY_EXISTS=6]="ALREADY_EXISTS",ol[ol.PERMISSION_DENIED=7]="PERMISSION_DENIED",ol[ol.UNAUTHENTICATED=16]="UNAUTHENTICATED",ol[ol.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ol[ol.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ol[ol.ABORTED=10]="ABORTED",ol[ol.OUT_OF_RANGE=11]="OUT_OF_RANGE",ol[ol.UNIMPLEMENTED=12]="UNIMPLEMENTED",ol[ol.INTERNAL=13]="INTERNAL",ol[ol.UNAVAILABLE=14]="UNAVAILABLE",ol[ol.DATA_LOSS=15]="DATA_LOSS";let cl=null;function ul(){return new TextEncoder}const hl=new yi([4294967295,4294967295],0);function dl(e){const t=ul().encode(e),n=new wi;return n.update(t),new Uint8Array(n.digest())}function fl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new yi([n,r],0),new yi([i,s],0)]}class ml{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new pl(`Invalid padding: ${t}`);if(n<0)throw new pl(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new pl(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new pl(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=yi.fromNumber(this.Ie)}Ee(e,t,n){let r=e.add(t.multiply(yi.fromNumber(n)));return 1===r.compare(hl)&&(r=new yi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=dl(e),[n,r]=fl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ml(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ie)return;const t=dl(e),[n,r]=fl(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gl{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new gl(os.min(),r,new Ps(rs),ha(),ba())}}class vl{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vl(n,t,ba(),ba(),ba())}}class yl{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class wl{constructor(e,t){this.targetId=e,this.me=t}}class bl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zs.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class xl{constructor(){this.fe=0,this.ge=kl(),this.pe=zs.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ba(),t=ba(),n=ba();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zi()}}),new vl(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=kl()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Bi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class _l{constructor(e){this.Le=e,this.Be=new Map,this.ke=ha(),this.qe=El(),this.Qe=new Ps(rs)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:zi()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.ze(n)&&t(n)})}He(e){const t=e.targetId,n=e.me.count,r=this.Je(t);if(r){const i=r.target;if(Ho(i))if(0===n){const e=new hs(i.path);this.Ue(t,e,yo.newNoDocument(e,os.min()))}else Bi(1===n);else{const r=this.Ye(t);if(r!==n){const n=this.Ze(e),i=n?this.Xe(n,e,r):1;if(0!==i){this.je(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,e)}null==cl||cl.et(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.tt(),n,i))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Hs(n).toUint8Array()}catch(e){if(e instanceof Vs)return Fi("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ml(s,r,i)}catch(e){return Fi(e instanceof pl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Ie?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.tt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.Ue(t,n,null),r++)}),r}rt(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Je(r);if(i){if(n.current&&Ho(i.target)){const t=new hs(i.target.path);null!==this.ke.get(t)||this.it(r,t)||this.Ue(r,t,yo.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=ba();this.qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new gl(e,t,this.Qe,this.ke,n);return this.ke=ha(),this.qe=El(),this.Qe=new Ps(rs),r}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new xl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ms(rs),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Mi("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xl),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function El(){return new Ps(hs.comparator)}function kl(){return new Ps(hs.comparator)}const Sl={asc:"ASCENDING",desc:"DESCENDING"},Nl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Tl={and:"AND",or:"OR"};class Cl{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Il(e,t){return e.useProto3Json||ks(t)?t:{value:t}}function Al(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Rl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Dl(e,t){return Al(e,t.toTimestamp())}function Ol(e){return Bi(!!e),os.fromTimestamp(function(e){const t=qs(e);return new ss(t.seconds,t.nanos)}(e))}function Pl(e,t){return jl(e,t).canonicalString()}function jl(e,t){const n=function(e){return new ls(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ll(e){const t=ls.fromString(e);return Bi(nc(t)),t}function Ml(e,t){return Pl(e.databaseId,t.path)}function Ul(e,t){const n=Ll(t);if(n.get(1)!==e.databaseId.projectId)throw new Hi($i.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hi($i.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new hs(Bl(n))}function Fl(e,t){return Pl(e.databaseId,t)}function Vl(e){const t=Ll(e);return 4===t.length?ls.emptyPath():Bl(t)}function zl(e){return new ls(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Bl(e){return Bi(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ql(e,t,n){return{name:Ml(e,t),fields:n.value.mapValue.fields}}function $l(e,t){let n;if(t instanceof Ga)n={update:ql(e,t.key,t.value)};else if(t instanceof Za)n={delete:Ml(e,t.key)};else if(t instanceof Qa)n={update:ql(e,t.key,t.data),updateMask:tc(t.fieldMask)};else{if(!(t instanceof el))return zi();n={verify:Ml(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Aa)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ra)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Oa)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ja)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw zi()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Dl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zi()}(e,t.precondition)),n}function Hl(e,t){return{documents:[Fl(e,t.path)]}}function Wl(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Fl(e,i);const s=function(e){if(0!==e.length)return ec(No.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Jl(e.field),direction:Ql(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Il(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{_t:n,parent:i}}function Kl(e){let t=Vl(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Bi(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Gl(e);return t instanceof No&&Co(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new _o(Zl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ks(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new wo(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new wo(n,t)}(n.endAt)),Ko(t,i,o,s,a,"F",l,c)}function Gl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Zl(e.unaryFilter.field);return So.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Zl(e.unaryFilter.field);return So.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Zl(e.unaryFilter.field);return So.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Zl(e.unaryFilter.field);return So.create(i,"!=",{nullValue:"NULL_VALUE"});default:return zi()}}(e):void 0!==e.fieldFilter?function(e){return So.create(Zl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zi()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return No.create(e.compositeFilter.filters.map(e=>Gl(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zi()}}(e.compositeFilter.op))}(e):zi()}function Ql(e){return Sl[e]}function Yl(e){return Nl[e]}function Xl(e){return Tl[e]}function Jl(e){return{fieldPath:e.canonicalString()}}function Zl(e){return us.fromServerFormat(e.fieldPath)}function ec(e){return e instanceof So?function(e){if("=="===e.op){if(uo(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NAN"}};if(co(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(uo(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NOT_NAN"}};if(co(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(e.field),op:Yl(e.op),value:e.value}}}(e):e instanceof No?function(e){const t=e.getFilters().map(e=>ec(e));return 1===t.length?t[0]:{compositeFilter:{op:Xl(e.op),filters:t}}}(e):zi()}function tc(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function nc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class rc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:os.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:os.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:zs.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ic{constructor(e){this.ct=e}}function sc(e){const t=Kl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ta(t,t.limit,"L"):t}class oc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At($s(e.integerValue));else if("doubleValue"in e){const n=$s(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Ss(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),"string"==typeof n&&(n=qs(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Hs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?po(e)?this.dt(t,Number.MAX_SAFE_INTEGER):fo(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):zi()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const r of Object.keys(n))this.Vt(r,t),this.Tt(n[r],t)}wt(e,t){var n,r;const i=e.fields||{};this.dt(t,53);const s="value",o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.dt(t,15),t.At($s(o)),this.Vt(s,t),this.Tt(i[s],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const r of n)this.Tt(r,t)}yt(e,t){this.dt(t,37),hs.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}oc.vt=new oc;class ac{constructor(){this.un=new lc}addToCollectionParentIndex(e,t){return this.un.add(t),bs.resolve()}getCollectionParents(e,t){return bs.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return bs.resolve()}deleteFieldIndex(e,t){return bs.resolve()}deleteAllFieldIndexes(e){return bs.resolve()}createTargetIndexes(e,t){return bs.resolve()}getDocumentsMatchingTarget(e,t){return bs.resolve(null)}getIndexType(e,t){return bs.resolve(0)}getFieldIndexes(e,t){return bs.resolve([])}getNextCollectionGroupToUpdate(e){return bs.resolve(null)}getMinOffset(e,t){return bs.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return bs.resolve(ps.min())}updateCollectionGroup(e,t,n){return bs.resolve()}updateIndexEntries(e,t){return bs.resolve()}}class lc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ms(ls.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ms(ls.comparator)).toArray()}}new Uint8Array(0);class cc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new cc(e,cc.DEFAULT_COLLECTION_PERCENTILE,cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}cc.DEFAULT_COLLECTION_PERCENTILE=10,cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cc.DEFAULT=new cc(41943040,cc.DEFAULT_COLLECTION_PERCENTILE,cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cc.DISABLED=new cc(-1,0,0);class uc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new uc(0)}static kn(){return new uc(-1)}}class hc{constructor(){this.changes=new ca(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yo.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?bs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ha(n.mutation,e,Fs.empty(),ss.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ba()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ba();const r=pa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=fa();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=pa();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ba()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=ha();const s=va(),o=va();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Qa)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ha(o.mutation,t,o.mutation.getFieldMask(),ss.now())):s.set(t.key,Fs.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new dc(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=va();let r=new Ps((e,t)=>e-t),i=ba();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Fs.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ba()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=ga();l.forEach(e=>{if(!i.has(e)){const r=qa(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return bs.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return hs.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yo(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):bs.resolve(pa());let o=-1,a=i;return s.next(t=>bs.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?bs.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,ba())).next(e=>({batchId:o,changes:ma(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new hs(t)).next(e=>{let t=fa();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=fa();return this.indexManager.getCollectionParents(e,i).next(o=>bs.forEach(o,o=>{const a=function(e,t){return new Wo(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,yo.newInvalidDocument(r)))});let n=fa();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Ha(s.mutation,r,Fs.empty(),ss.now()),sa(t,r)&&(n=n.insert(e,r))}),n})}}class mc{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return bs.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ol(e.createTime)}}(t)),bs.resolve()}getNamedQuery(e,t){return bs.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(e){return{name:e.name,query:sc(e.bundledQuery),readTime:Ol(e.readTime)}}(t)),bs.resolve()}}class pc{constructor(){this.overlays=new Ps(hs.comparator),this.Ir=new Map}getOverlay(e,t){return bs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=pa();return bs.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.ht(e,t,r)}),bs.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Ir.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(n)),bs.resolve()}getOverlaysForCollection(e,t,n){const r=pa(),i=t.length+1,s=new hs(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return bs.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ps((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=pa(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=pa(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return bs.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new rl(t,n));let i=this.Ir.get(t);void 0===i&&(i=ba(),this.Ir.set(t,i)),this.Ir.set(t,i.add(n.key))}}class gc{constructor(){this.sessionToken=zs.EMPTY_BYTE_STRING}getSessionToken(e){return bs.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,bs.resolve()}}class vc{constructor(){this.Tr=new Ms(yc.Er),this.dr=new Ms(yc.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new yc(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new yc(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){const t=new hs(new ls([])),n=new yc(t,e),r=new yc(t,e+1),i=[];return this.dr.forEachInRange([n,r],e=>{this.Vr(e),i.push(e.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new hs(new ls([])),n=new yc(t,e),r=new yc(t,e+1);let i=ba();return this.dr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new yc(e,0),n=this.Tr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yc{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return hs.comparator(e.key,t.key)||rs(e.wr,t.wr)}static Ar(e,t){return rs(e.wr,t.wr)||hs.comparator(e.key,t.key)}}class wc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ms(yc.Er)}checkEmpty(e){return bs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new tl(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.br=this.br.add(new yc(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return bs.resolve(s)}lookupMutationBatch(e,t){return bs.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.vr(n),i=r<0?0:r;return bs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return bs.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return bs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yc(t,0),r=new yc(t,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],e=>{const t=this.Dr(e.wr);i.push(t)}),bs.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ms(rs);return t.forEach(e=>{const t=new yc(e,0),r=new yc(e,Number.POSITIVE_INFINITY);this.br.forEachInRange([t,r],e=>{n=n.add(e.wr)})}),bs.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;hs.isDocumentKey(i)||(i=i.child(""));const s=new yc(new hs(i),0);let o=new Ms(rs);return this.br.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.wr)),!0)},s),bs.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(e=>{const n=this.Dr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Bi(0===this.Fr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.br;return bs.forEach(t.mutations,r=>{const i=new yc(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new yc(t,0),r=this.br.firstAfterOrEqual(n);return bs.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,bs.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bc{constructor(e){this.Mr=e,this.docs=new Ps(hs.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return bs.resolve(n?n.document.mutableCopy():yo.newInvalidDocument(t))}getEntries(e,t){let n=ha();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():yo.newInvalidDocument(e))}),bs.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=ha();const s=t.path,o=new hs(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||gs(ms(o),n)<=0||(r.has(o.key)||sa(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return bs.resolve(i)}getAllFromCollectionGroup(e,t,n,r){zi()}Or(e,t){return bs.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new xc(this)}getSize(e){return bs.resolve(this.size)}}class xc extends hc{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),bs.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class _c{constructor(e){this.persistence=e,this.Nr=new ca(e=>qo(e),$o),this.lastRemoteSnapshotVersion=os.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vc,this.targetCount=0,this.kr=uc.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,n)=>t(n)),bs.resolve()}getLastRemoteSnapshotVersion(e){return bs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return bs.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),bs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),bs.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new uc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,bs.resolve()}updateTargetData(e,t){return this.Kn(t),bs.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,bs.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Nr.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Nr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),bs.waitFor(i).next(()=>r)}getTargetCount(e){return bs.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return bs.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),bs.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),bs.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),bs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return bs.resolve(n)}containsKey(e,t){return bs.resolve(this.Br.containsKey(t))}}class Ec{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Es(0),this.Kr=!1,this.Kr=!0,this.$r=new gc,this.referenceDelegate=e(this),this.Ur=new _c(this),this.indexManager=new ac,this.remoteDocumentCache=function(e){return new bc(e)}(e=>this.referenceDelegate.Wr(e)),this.serializer=new ic(t),this.Gr=new mc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new wc(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Mi("MemoryPersistence","Starting transaction:",e);const r=new kc(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(e=>this.referenceDelegate.jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Hr(e,t){return bs.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class kc extends ys{constructor(e){super(),this.currentSequenceNumber=e}}class Sc{constructor(e){this.persistence=e,this.Jr=new vc,this.Yr=null}static Zr(e){return new Sc(e)}get Xr(){if(this.Yr)return this.Yr;throw zi()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),bs.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),bs.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),bs.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bs.forEach(this.Xr,n=>{const r=hs.fromPath(n);return this.ei(e,r).next(e=>{e||t.removeEntry(r,os.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return bs.or([()=>bs.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class Nc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=r}static Wi(e,t){let n=ba(),r=ba();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Nc(e,t.fromCache,n,r)}}class Tc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Cc{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=w()?8:xs(y())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Yi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.Zi(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Tc;return this.Xi(e,t,n).next(r=>{if(i.result=r,this.zi)return this.es(e,t,n,r.size)})}).next(()=>i.result)}es(e,t,n,r){return n.documentReadCount<this.ji?(Li()<=M.DEBUG&&Mi("QueryEngine","SDK will not create cache indexes for query:",ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),bs.resolve()):(Li()<=M.DEBUG&&Mi("QueryEngine","Query:",ia(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Li()<=M.DEBUG&&Mi("QueryEngine","The SDK decides to create cache indexes for query:",ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jo(t))):bs.resolve())}Yi(e,t){if(Qo(t))return bs.resolve(null);let n=Jo(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=ta(t,null,"F"),n=Jo(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ba(...r);return this.Ji.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ts(t,r);return this.ns(t,s,i,n.readTime)?this.Yi(e,ta(t,null,"F")):this.rs(e,s,t,n)}))})))}Zi(e,t,n,r){return Qo(t)||r.isEqual(os.min())?bs.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const s=this.ts(t,i);return this.ns(t,s,n,r)?bs.resolve(null):(Li()<=M.DEBUG&&Mi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ia(t)),this.rs(e,s,t,fs(r,-1)).next(e=>e))})}ts(e,t){let n=new Ms(aa(e));return t.forEach((t,r)=>{sa(e,r)&&(n=n.add(r))}),n}ns(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,t,n){return Li()<=M.DEBUG&&Mi("QueryEngine","Using full collection scan to execute query:",ia(t)),this.Ji.getDocumentsMatchingQuery(e,t,ps.min(),n)}rs(e,t,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Ic{constructor(e,t,n,r){this.persistence=e,this.ss=t,this.serializer=r,this.os=new Ps(rs),this._s=new ca(e=>qo(e),$o),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function Ac(e,t,n,r){return new Ic(e,t,n,r)}async function Rc(e,t){const n=qi(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=ba();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({hs:e,removedBatchIds:i,addedBatchIds:s}))})})}function Dc(e){const t=qi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function Oc(e,t,n){let r=ba(),i=ba();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=ha();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(os.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Mi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Ps:r,Is:i}})}function Pc(e,t){const n=qi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function jc(e,t){const n=qi(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Ur.getTargetData(e,t).next(i=>i?(r=i,bs.resolve(r)):n.Ur.allocateTargetId(e).next(i=>(r=new rc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Ur.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.os.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(e.targetId,e),n._s.set(t,e.targetId)),e})}async function Lc(e,t,n){const r=qi(e),i=r.os.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!_s(e))throw e;Mi("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Mc(e,t,n){const r=qi(e);let i=os.min(),s=ba();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=qi(e),i=r._s.get(n);return void 0!==i?bs.resolve(r.os.get(i)):r.Ur.getTargetData(t,n)}(r,e,Jo(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.ss.getDocumentsMatchingQuery(e,t,n?i:os.min(),n?s:ba())).next(e=>(Uc(r,oa(t),e),{documents:e,Ts:s})))}function Uc(e,t,n){let r=e.us.get(t)||os.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.us.set(t,r)}class Fc{constructor(){this.activeTargetIds=_a()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vc{constructor(){this.so=new Fc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Fc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class zc{_o(e){}shutdown(){}}class Bc{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Mi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Mi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qc=null;function $c(){return null===qc?qc=268435456+Math.round(2147483648*Math.random()):qc++,"0x"+qc.toString(16)}const Hc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wc{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const Kc="WebChannelConnection";class Gc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${n}/databases/${r}`,this.Co="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get Fo(){return!1}Mo(e,t,n,r,i){const s=$c(),o=this.xo(e,t.toUriEncodedString());Mi("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(a,r,i),this.No(e,o,a,n).then(t=>(Mi("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw Fi("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Lo(e,t,n,r,i,s){return this.Mo(e,t,n,r,i)}Oo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}xo(e,t){const n=Hc[e];return`${this.Do}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,r){const i=$c();return new Promise((s,o)=>{const a=new _i;a.setWithCredentials(!0),a.listenOnce(ki.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Si.NO_ERROR:const t=a.getResponseJson();Mi(Kc,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Si.TIMEOUT:Mi(Kc,`RPC '${e}' ${i} timed out`),o(new Hi($i.DEADLINE_EXCEEDED,"Request time out"));break;case Si.HTTP_ERROR:const n=a.getStatus();if(Mi(Kc,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values($i).indexOf(t)>=0?t:$i.UNKNOWN}(t.status);o(new Hi(e,t.message))}else o(new Hi($i.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Hi($i.UNAVAILABLE,"Connection failed."));break;default:zi()}}finally{Mi(Kc,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);Mi(Kc,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}Bo(e,t,n){const r=$c(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ii(),o=Ci(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Oo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Mi(Kc,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new Wc({Io:t=>{d?Mi(Kc,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Mi(Kc,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Mi(Kc,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},To:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,Ei.EventType.OPEN,()=>{d||(Mi(Kc,`RPC '${e}' stream ${r} transport opened.`),f.yo())}),m(u,Ei.EventType.CLOSE,()=>{d||(d=!0,Mi(Kc,`RPC '${e}' stream ${r} transport closed`),f.So())}),m(u,Ei.EventType.ERROR,t=>{d||(d=!0,Fi(Kc,`RPC '${e}' stream ${r} transport errored:`,t),f.So(new Hi($i.UNAVAILABLE,"The operation could not be completed")))}),m(u,Ei.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];Bi(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Mi(Kc,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=sl[e];if(void 0!==t)return ll(t)}(t),i=o.message;void 0===n&&(n=$i.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.So(new Hi(n,i)),u.close()}else Mi(Kc,`RPC '${e}' stream ${r} received:`,i),f.bo(i)}}),m(o,Ti.STAT_EVENT,t=>{t.stat===Ni.PROXY?Mi(Kc,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ni.NOPROXY&&Mi(Kc,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.wo()},0),f}}function Qc(){return"undefined"!=typeof document?document:null}function Yc(e){return new Cl(e,!0)}class Xc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ui=e,this.timerId=t,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,t-n);r>0&&Mi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Jc{constructor(e,t,n,r,i,s,o,a){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Xc(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===$i.RESOURCE_EXHAUSTED?(Ui(t.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===$i.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Yo===t&&this.P_(n,r)},t=>{e(()=>{const e=new Hi($i.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{n(()=>this.I_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Mi("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Mi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zc extends Jc{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zi()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Bi(void 0===t||"string"==typeof t),zs.fromBase64String(t||"")):(Bi(void 0===t||t instanceof Buffer||t instanceof Uint8Array),zs.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?$i.UNKNOWN:ll(e.code);return new Hi(t,e.message||"")}(o);n=new bl(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ul(e,r.document.name),s=Ol(r.document.updateTime),o=r.document.createTime?Ol(r.document.createTime):os.min(),a=new go({mapValue:{fields:r.document.fields}}),l=yo.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new yl(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Ul(e,r.document),s=r.readTime?Ol(r.readTime):os.min(),o=yo.newNoDocument(i,s),a=r.removedTargetIds||[];n=new yl([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Ul(e,r.document),s=r.removedTargetIds||[];n=new yl([],s,i,null)}else{if(!("filter"in t))return zi();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new il(r,i),o=e.targetId;n=new wl(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return os.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?os.min():t.readTime?Ol(t.readTime):os.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=zl(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ho(r)?{documents:Hl(e,r)}:{query:Wl(e,r)._t},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Rl(e,t.resumeToken);const r=Il(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(os.min())>0){n.readTime=Al(e,t.snapshotVersion.toTimestamp());const r=Il(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zi()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=zl(this.serializer),t.removeTarget=e,this.a_(t)}}class eu extends Jc{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Bi(!!e.streamToken),this.lastStreamToken=e.streamToken,Bi(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){Bi(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=function(e,t){return e&&e.length>0?(Bi(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Ol(e.updateTime):Ol(t);return n.isEqual(os.min())&&(n=Ol(t)),new Fa(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ol(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=zl(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>$l(this.serializer,e))};this.a_(t)}}class tu extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new Hi($i.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Mo(e,jl(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$i.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Hi($i.UNKNOWN,e.toString())})}Lo(e,t,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Lo(e,jl(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===$i.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Hi($i.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ui(t),this.D_=!1):Mi("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class ru{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(e=>{n.enqueueAndForget(async()=>{du(this)&&(Mi("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=qi(e);t.L_.add(4),await su(t),t.q_.set("Unknown"),t.L_.delete(4),await iu(t)}(this))})}),this.q_=new nu(n,r)}}async function iu(e){if(du(e))for(const t of e.B_)await t(!0)}async function su(e){for(const t of e.B_)await t(!1)}function ou(e,t){const n=qi(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),hu(n)?uu(n):Ru(n).r_()&&lu(n,t))}function au(e,t){const n=qi(e),r=Ru(n);n.N_.delete(t),r.r_()&&cu(n,t),0===n.N_.size&&(r.r_()?r.o_():du(n)&&n.q_.set("Unknown"))}function lu(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(os.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ru(e).A_(t)}function cu(e,t){e.Q_.xe(t),Ru(e).R_(t)}function uu(e){e.Q_=new _l({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Ru(e).start(),e.q_.v_()}function hu(e){return du(e)&&!Ru(e).n_()&&e.N_.size>0}function du(e){return 0===qi(e).L_.size}function fu(e){e.Q_=void 0}async function mu(e){e.q_.set("Online")}async function pu(e){e.N_.forEach((t,n)=>{lu(e,t)})}async function gu(e,t){fu(e),hu(e)?(e.q_.M_(t),uu(e)):e.q_.set("Unknown")}async function vu(e,t,n){if(e.q_.set("Online"),t instanceof bl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.N_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.N_.delete(r),e.Q_.removeTarget(r))}(e,t)}catch(n){Mi("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await yu(e,n)}else if(t instanceof yl?e.Q_.Ke(t):t instanceof wl?e.Q_.He(t):e.Q_.We(t),!n.isEqual(os.min()))try{const t=await Dc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Q_.rt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.N_.get(r);i&&e.N_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.N_.get(t);if(!r)return;e.N_.set(t,r.withResumeToken(zs.EMPTY_BYTE_STRING,r.snapshotVersion)),cu(e,t);const i=new rc(r.target,t,n,r.sequenceNumber);lu(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Mi("RemoteStore","Failed to raise snapshot:",t),await yu(e,t)}}async function yu(e,t,n){if(!_s(t))throw t;e.L_.add(1),await su(e),e.q_.set("Offline"),n||(n=()=>Dc(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Mi("RemoteStore","Retrying IndexedDB access"),await n(),e.L_.delete(1),await iu(e)})}function wu(e,t){return t().catch(n=>yu(e,n,t))}async function bu(e){const t=qi(e),n=Du(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;xu(t);)try{const e=await Pc(t.localStore,r);if(null===e){0===t.O_.length&&n.o_();break}r=e.batchId,_u(t,e)}catch(e){await yu(t,e)}Eu(t)&&ku(t)}function xu(e){return du(e)&&e.O_.length<10}function _u(e,t){e.O_.push(t);const n=Du(e);n.r_()&&n.V_&&n.m_(t.mutations)}function Eu(e){return du(e)&&!Du(e).n_()&&e.O_.length>0}function ku(e){Du(e).start()}async function Su(e){Du(e).p_()}async function Nu(e){const t=Du(e);for(const n of e.O_)t.m_(n.mutations)}async function Tu(e,t,n){const r=e.O_.shift(),i=nl.from(r,t,n);await wu(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await bu(e)}async function Cu(e,t){t&&Du(e).V_&&await async function(e,t){if(function(e){return al(e)&&e!==$i.ABORTED}(t.code)){const n=e.O_.shift();Du(e).s_(),await wu(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await bu(e)}}(e,t),Eu(e)&&ku(e)}async function Iu(e,t){const n=qi(e);n.asyncQueue.verifyOperationInProgress(),Mi("RemoteStore","RemoteStore received new credentials");const r=du(n);n.L_.add(3),await su(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),await iu(n)}async function Au(e,t){const n=qi(e);t?(n.L_.delete(2),await iu(n)):t||(n.L_.add(2),await su(n),n.q_.set("Unknown"))}function Ru(e){return e.K_||(e.K_=function(e,t,n){const r=qi(e);return r.w_(),new Zc(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:mu.bind(null,e),Ro:pu.bind(null,e),mo:gu.bind(null,e),d_:vu.bind(null,e)}),e.B_.push(async t=>{t?(e.K_.s_(),hu(e)?uu(e):e.q_.set("Unknown")):(await e.K_.stop(),fu(e))})),e.K_}function Du(e){return e.U_||(e.U_=function(e,t,n){const r=qi(e);return r.w_(),new eu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Su.bind(null,e),mo:Cu.bind(null,e),f_:Nu.bind(null,e),g_:Tu.bind(null,e)}),e.B_.push(async t=>{t?(e.U_.s_(),await bu(e)):(await e.U_.stop(),e.O_.length>0&&(Mi("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class Ou{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Ou(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hi($i.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pu(e,t){if(Ui("AsyncQueue",`${t}: ${e}`),_s(e))return new Hi($i.UNAVAILABLE,`${t}: ${e}`);throw e}class ju{constructor(e){this.comparator=e?(t,n)=>e(t,n)||hs.comparator(t.key,n.key):(e,t)=>hs.comparator(e.key,t.key),this.keyedMap=fa(),this.sortedSet=new Ps(this.comparator)}static emptySet(e){return new ju(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ju))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ju;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Lu{constructor(){this.W_=new Ps(hs.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?0!==e.type&&3===n.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==n.type?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.W_=this.W_.remove(t):1===e.type&&2===n.type?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):zi():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class Mu{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Mu(e,t,ju.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&na(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Uu{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Fu{constructor(){this.queries=Vu(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){const n=qi(e),r=n.queries;n.queries=Vu(),r.forEach((e,n)=>{for(const r of n.j_)r.onError(t)})}(this,new Hi($i.ABORTED,"Firestore shutting down"))}}function Vu(){return new ca(e=>ra(e),na)}async function zu(e,t){const n=qi(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.H_()&&t.J_()&&(r=2):(s=new Uu,r=t.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Pu(e,`Initialization of query '${ia(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.j_.push(t),t.Z_(n.onlineState),s.z_&&t.X_(s.z_)&&Hu(n)}async function Bu(e,t){const n=qi(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.j_.indexOf(t);e>=0&&(s.j_.splice(e,1),0===s.j_.length?i=t.J_()?0:1:!s.H_()&&t.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qu(e,t){const n=qi(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.j_)e.X_(i)&&(r=!0);t.z_=i}}r&&Hu(n)}function $u(e,t,n){const r=qi(e),i=r.queries.get(t);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(t)}function Hu(e){e.Y_.forEach(e=>{e.next()})}var Wu,Ku;(Ku=Wu||(Wu={})).ea="default",Ku.Cache="cache";class Gu{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Mu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache)return!0;if(!this.J_())return!0;const n="Offline"!==t;return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=Mu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Wu.Cache}}class Qu{constructor(e){this.key=e}}class Yu{constructor(e){this.key=e}}class Xu{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ba(),this.mutatedKeys=ba(),this.Aa=aa(e),this.Ra=new ju(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Lu,r=t?t.Ra:this.Ra;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=sa(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ga(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Aa(u,a)>0||l&&this.Aa(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ra:s,fa:n,ns:o,mutatedKeys:i}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zi()}};return n(e)-n(t)}(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(n),r=null!=r&&r;const o=t&&!r?this.ya():[],a=0===this.da.size&&this.current&&!r?1:0,l=a!==this.Ea;return this.Ea=a,0!==s.length||l?{snapshot:new Mu(this.query,e.Ra,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Lu,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ba(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});const t=[];return e.forEach(e=>{this.da.has(e)||t.push(new Yu(e))}),this.da.forEach(n=>{e.has(n)||t.push(new Qu(n))}),t}ba(e){this.Ta=e.Ts,this.da=ba();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Mu.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class Ju{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Zu{constructor(e){this.key=e,this.va=!1}}class eh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ca(e=>ra(e),na),this.Ma=new Map,this.xa=new Set,this.Oa=new Ps(hs.comparator),this.Na=new Map,this.La=new vc,this.Ba={},this.ka=new Map,this.qa=uc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function th(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_h(e);let i;const s=r.Fa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await rh(r,t,n,!0),i}async function nh(e,t){const n=_h(e);await rh(n,t,!0,!1)}async function rh(e,t,n,r){const i=await jc(e.localStore,Jo(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ih(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&ou(e.remoteStore,i),a}async function ih(e,t,n,r,i){e.Ka=(t,n,r)=>async function(e,t,n,r){let i=t.view.ma(n);i.ns&&(i=await Mc(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ma(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return gh(e,t.targetId,a.wa),a.snapshot}(e,t,n,r);const s=await Mc(e.localStore,t,!0),o=new Xu(t,s.Ts),a=o.ma(s.documents),l=vl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);gh(e,n,c.wa);const u=new Ju(t,n,o);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot}async function sh(e,t,n){const r=qi(e),i=r.Fa.get(t),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(e=>!na(e,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Lc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&au(r.remoteStore,i.targetId),mh(r,i.targetId)}).catch(ws)):(mh(r,i.targetId),await Lc(r.localStore,i.targetId,!0))}async function oh(e,t){const n=qi(e),r=n.Fa.get(t),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),au(n.remoteStore,r.targetId))}async function ah(e,t){const n=qi(e);try{const e=await function(e,t){const n=qi(e),r=t.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Ur.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Ur.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(zs.EMPTY_BYTE_STRING,os.min()).withLastLimboFreeSnapshotVersion(os.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Ur.updateTargetData(e,c))});let a=ha(),l=ba();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Oc(e,s,t.documentUpdates).next(e=>{a=e.Ps,l=e.Is})),!r.isEqual(os.min())){const t=n.Ur.getLastRemoteSnapshotVersion(e).next(t=>n.Ur.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return bs.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.os=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Na.get(t);r&&(Bi(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.va=!0:e.modifiedDocuments.size>0?Bi(r.va):e.removedDocuments.size>0&&(Bi(r.va),r.va=!1))}),await wh(n,e,t)}catch(e){await ws(e)}}function lh(e,t,n){const r=qi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Fa.forEach((n,r)=>{const i=r.view.Z_(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=qi(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.j_)i.Z_(t)&&(r=!0)}),r&&Hu(n)}(r.eventManager,t),e.length&&r.Ca.d_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ch(e,t,n){const r=qi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Na.get(t),s=i&&i.key;if(s){let e=new Ps(hs.comparator);e=e.insert(s,yo.newNoDocument(s,os.min()));const n=ba().add(s),i=new gl(os.min(),new Map,new Ps(rs),e,n);await ah(r,i),r.Oa=r.Oa.remove(s),r.Na.delete(t),yh(r)}else await Lc(r.localStore,t,!1).then(()=>mh(r,t,n)).catch(ws)}async function uh(e,t){const n=qi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=qi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=bs.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Bi(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ba();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);fh(n,r,null),dh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wh(n,e)}catch(e){await ws(e)}}async function hh(e,t,n){const r=qi(e);try{const e=await function(e,t){const n=qi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Bi(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);fh(r,t,n),dh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await wh(r,e)}catch(n){await ws(n)}}function dh(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function fh(e,t,n){const r=qi(e);let i=r.Ba[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function mh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Ma.get(t))e.Fa.delete(r),n&&e.Ca.$a(r,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||ph(e,t)})}function ph(e,t){e.xa.delete(t.path.canonicalString());const n=e.Oa.get(t);null!==n&&(au(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),yh(e))}function gh(e,t,n){for(const r of n)r instanceof Qu?(e.La.addReference(r.key,t),vh(e,r)):r instanceof Yu?(Mi("SyncEngine","Document no longer in limbo: "+r.key),e.La.removeReference(r.key,t),e.La.containsKey(r.key)||ph(e,r.key)):zi()}function vh(e,t){const n=t.key,r=n.path.canonicalString();e.Oa.get(n)||e.xa.has(r)||(Mi("SyncEngine","New document in limbo: "+n),e.xa.add(r),yh(e))}function yh(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){const t=e.xa.values().next().value;e.xa.delete(t);const n=new hs(ls.fromString(t)),r=e.qa.next();e.Na.set(r,new Zu(n)),e.Oa=e.Oa.insert(n,r),ou(e.remoteStore,new rc(Jo(Go(n.path)),r,"TargetPurposeLimboResolution",Es.oe))}}async function wh(e,t,n){const r=qi(e),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((e,a)=>{o.push(r.Ka(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Nc.Wi(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(e,t){const n=qi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>bs.forEach(t,t=>bs.forEach(t.$i,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>bs.forEach(t.Ui,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!_s(e))throw e;Mi("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.os.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.os=n.os.insert(e,i)}}}(r.localStore,s))}async function bh(e,t){const n=qi(e);if(!n.currentUser.isEqual(t)){Mi("SyncEngine","User change. New user:",t.toKey());const e=await Rc(n.localStore,t);n.currentUser=t,function(e,t){e.ka.forEach(e=>{e.forEach(e=>{e.reject(new Hi($i.CANCELLED,t))})}),e.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await wh(n,e.hs)}}function xh(e,t){const n=qi(e),r=n.Na.get(t);if(r&&r.va)return ba().add(r.key);{let e=ba();const r=n.Ma.get(t);if(!r)return e;for(const t of r){const r=n.Fa.get(t);e=e.unionWith(r.view.Va)}return e}}function _h(e){const t=qi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ah.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=xh.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ch.bind(null,t),t.Ca.d_=qu.bind(null,t.eventManager),t.Ca.$a=$u.bind(null,t.eventManager),t}function Eh(e){const t=qi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=uh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hh.bind(null,t),t}class kh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return Ac(this.persistence,new Cc,e.initialUser,this.serializer)}Ga(e){return new Ec(Sc.Zr,this.serializer)}Wa(e){return new Vc}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kh.provider={build:()=>new kh};class Sh{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>lh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=bh.bind(null,this.syncEngine),await Au(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Fu}createDatastore(e){const t=Yc(e.databaseInfo.databaseId),n=function(e){return new Gc(e)}(e.databaseInfo);return function(e,t,n,r){return new tu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ru(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>lh(this.syncEngine,e,0),Bc.D()?new Bc:new zc)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new eh(e,t,n,r,i,s);return o&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=qi(e);Mi("RemoteStore","RemoteStore shutting down."),t.L_.add(5),await su(t),t.k_.shutdown(),t.q_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Sh.provider={build:()=>new Sh};class Nh{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Th{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Oi.UNAUTHENTICATED,this.clientId=ns.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Mi("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Mi("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Pu(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ch(e,t){e.asyncQueue.verifyOperationInProgress(),Mi("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Rc(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ih(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ah(e);Mi("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Iu(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Iu(t.remoteStore,n)),e._onlineComponents=t}async function Ah(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Mi("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ch(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===$i.FAILED_PRECONDITION||e.code===$i.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Fi("Error using user provided cache. Falling back to memory cache: "+n),await Ch(e,new kh)}}else Mi("FirestoreClient","Using default OfflineComponentProvider"),await Ch(e,new kh);return e._offlineComponents}async function Rh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Mi("FirestoreClient","Using user provided OnlineComponentProvider"),await Ih(e,e._uninitializedComponentsProvider._online)):(Mi("FirestoreClient","Using default OnlineComponentProvider"),await Ih(e,new Sh))),e._onlineComponents}function Dh(e){return Rh(e).then(e=>e.syncEngine)}async function Oh(e){const t=await Rh(e),n=t.eventManager;return n.onListen=th.bind(null,t.syncEngine),n.onUnlisten=sh.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=nh.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=oh.bind(null,t.syncEngine),n}function Ph(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Wi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Nh({next:n=>{s.Za(),t.enqueueAndForget(()=>Bu(e,o)),n.fromCache&&"server"===r.source?i.reject(new Hi($i.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Gu(n,s,{includeMetadataChanges:!0,_a:!0});return zu(e,o)}(await Oh(e),e.asyncQueue,t,n,r)),r.promise}function jh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Lh=new Map;function Mh(e,t,n){if(!n)throw new Hi($i.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Uh(e){if(!hs.isDocumentKey(e))throw new Hi($i.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Fh(e){if(hs.isDocumentKey(e))throw new Hi($i.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Vh(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":zi()}function zh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hi($i.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vh(e);throw new Hi($i.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Bh(e,t){if(t<=0)throw new Hi($i.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class qh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Hi($i.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Hi($i.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Hi($i.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Hi($i.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Hi($i.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Hi($i.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $h{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Hi($i.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Hi($i.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qh(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Gi;switch(e.type){case"firstParty":return new Ji(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hi($i.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Lh.get(e);t&&(Mi("ComponentProvider","Removing Datastore"),Lh.delete(e),t.terminate())}(this),Promise.resolve()}}class Hh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hh(this.firestore,e,this._query)}}class Wh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wh(this.firestore,e,this._key)}}class Kh extends Hh{constructor(e,t,n){super(e,t,Go(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wh(this.firestore,null,new hs(e))}withConverter(e){return new Kh(this.firestore,e,this._path)}}function Gh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=R(e),Mh("collection","path",t),e instanceof $h){const n=ls.fromString(t,...r);return Fh(n),new Kh(e,null,n)}{if(!(e instanceof Wh||e instanceof Kh))throw new Hi($i.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ls.fromString(t,...r));return Fh(n),new Kh(e.firestore,null,n)}}function Qh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=R(e),1===arguments.length&&(t=ns.newId()),Mh("doc","path",t),e instanceof $h){const n=ls.fromString(t,...r);return Uh(n),new Wh(e,null,new hs(n))}{if(!(e instanceof Wh||e instanceof Kh))throw new Hi($i.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ls.fromString(t,...r));return Uh(n),new Wh(e.firestore,e instanceof Kh?e.converter:null,new hs(n))}}class Yh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Xc(this,"async_queue_retry"),this.Vu=()=>{const e=Qc();e&&Mi("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;const t=Qc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Qc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Wi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_s(e))throw e;Mi("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(e=>{this.Eu=e,this.du=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ui("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const r=Ou.createAndSchedule(this,e,t,n,e=>this.yu(e));return this.Tu.push(r),r}fu(){this.Eu&&zi()}verifyOperationInProgress(){}async wu(){let e;do{e=this.mu,await e}while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function Xh(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Jh extends $h{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Yh,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yh(e),this._firestoreClient=void 0,await e}}}function Zh(e){if(e._terminated)throw new Hi($i.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ed(e),e._firestoreClient}function ed(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Qs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,jh(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Th(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class td{constructor(e){this._byteString=e}static fromBase64String(e){try{return new td(zs.fromBase64String(e))}catch(e){throw new Hi($i.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new td(zs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nd{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Hi($i.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new us(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rd{constructor(e){this._methodName=e}}class id{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Hi($i.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Hi($i.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rs(this._lat,e._lat)||rs(this._long,e._long)}}class sd{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const od=/^__.*__$/;class ad{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Qa(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ga(e,this.data,t,this.fieldTransforms)}}class ld{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Qa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zi()}}class ud{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new ud(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Nd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(cd(this.Cu)&&od.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Yc(e)}Qu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ud({Cu:e,methodName:t,qu:n,path:us.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dd(e){const t=e._freezeSettings(),n=Yc(e._databaseId);return new hd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fd(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Qu(s.merge||s.mergeFields?2:0,t,n,i);_d("Data must be an object, but it was:",o,r);const a=bd(r,o);let l,c;if(s.merge)l=new Fs(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ed(t,r,n);if(!o.contains(i))throw new Hi($i.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Td(e,i)||e.push(i)}l=new Fs(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new ad(new go(a),l,c)}class md extends rd{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}class pd extends rd{_toFieldTransform(e){return new Ua(e.path,new Aa)}isEqual(e){return e instanceof pd}}function gd(e,t,n,r){const i=e.Qu(1,t,n);_d("Data must be an object, but it was:",i,r);const s=[],o=go.empty();Ds(r,(e,r)=>{const a=Sd(t,e,n);r=R(r);const l=i.Nu(a);if(r instanceof md)s.push(a);else{const e=wd(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Fs(s);return new ld(o,a,i.fieldTransforms)}function vd(e,t,n,r,i,s){const o=e.Qu(1,t,n),a=[Ed(t,r,n)],l=[i];if(s.length%2!=0)throw new Hi($i.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Ed(t,s[d])),l.push(s[d+1]);const c=[],u=go.empty();for(let d=a.length-1;d>=0;--d)if(!Td(c,a[d])){const e=a[d];let t=l[d];t=R(t);const n=o.Nu(e);if(t instanceof md)c.push(e);else{const r=wd(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Fs(c);return new ld(u,h,o.fieldTransforms)}function yd(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return wd(n,e.Qu(r?4:3,t))}function wd(e,t){if(xd(e=R(e)))return _d("Unsupported field value:",t,e),bd(e,t);if(e instanceof rd)return function(e,t){if(!cd(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=wd(i,t.Lu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=R(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Sa(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ss.fromDate(e);return{timestampValue:Al(t.serializer,n)}}if(e instanceof ss){const n=new ss(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Al(t.serializer,n)}}if(e instanceof id)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof td)return{bytesValue:Rl(t.serializer,e._byteString)};if(e instanceof Wh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Bu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Pl(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof sd)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return Ea(t.serializer,e)})}}}}}}(e,t);throw t.Bu(`Unsupported field value: ${Vh(e)}`)}(e,t)}function bd(e,t){const n={};return Os(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ds(e,(e,r)=>{const i=wd(r,t.Mu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function xd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ss||e instanceof id||e instanceof td||e instanceof Wh||e instanceof rd||e instanceof sd)}function _d(e,t,n){if(!xd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Vh(n);throw"an object"===r?t.Bu(e+" a custom object"):t.Bu(e+" "+r)}}function Ed(e,t,n){if((t=R(t))instanceof nd)return t._internalPath;if("string"==typeof t)return Sd(e,t);throw Nd("Field path arguments must be of type string or ",e,!1,void 0,n)}const kd=new RegExp("[~\\*/\\[\\]]");function Sd(e,t,n){if(t.search(kd)>=0)throw Nd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new nd(...t.split("."))._internalPath}catch(r){throw Nd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Nd(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Hi($i.INVALID_ARGUMENT,a+e+l)}function Td(e,t){return e.some(e=>e.isEqual(t))}class Cd{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Wh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Id(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ad("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Id extends Cd{data(){return super.data()}}function Ad(e,t){return"string"==typeof t?Sd(e,t):t instanceof nd?t._internalPath:t._delegate._internalPath}function Rd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hi($i.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dd{}class Od extends Dd{}function Pd(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Dd&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Md).length,n=e.filter(e=>e instanceof jd).length;if(t>1||t>0&&n>0)throw new Hi($i.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class jd extends Od{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new jd(e,t,n)}_apply(e){const t=this._parse(e);return $d(e._query,t),new Hh(e.firestore,e.converter,ea(e._query,t))}_parse(e){const t=dd(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Hi($i.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){qd(o,s);const t=[];for(const n of o)t.push(Bd(r,e,n));a={arrayValue:{values:t}}}else a=Bd(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||qd(o,s),a=yd(n,t,o,"in"===s||"not-in"===s);return So.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Ld(e,t,n){const r=t,i=Ad("where",e);return jd._create(i,r,n)}class Md extends Dd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Md(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:No.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)$d(n,i),n=ea(n,i)}(e._query,t),new Hh(e.firestore,e.converter,ea(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ud extends Od{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ud(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Hi($i.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Hi($i.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _o(t,n)}(e._query,this._field,this._direction);return new Hh(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Wo(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Fd(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ad("orderBy",e);return Ud._create(n,t)}class Vd extends Od{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Vd(e,t,n)}_apply(e){return new Hh(e.firestore,e.converter,ta(e._query,this._limit,this._limitType))}}function zd(e){return Bh("limit",e),Vd._create("limit",e,"F")}function Bd(e,t,n){if("string"==typeof(n=R(n))){if(""===n)throw new Hi($i.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yo(t)&&-1!==n.indexOf("/"))throw new Hi($i.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ls.fromString(n));if(!hs.isDocumentKey(r))throw new Hi($i.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oo(e,new hs(r))}if(n instanceof Wh)return oo(e,n._key);throw new Hi($i.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vh(n)}.`)}function qd(e,t){if(!Array.isArray(e)||0===e.length)throw new Hi($i.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function $d(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Hi($i.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Hi($i.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Hd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Js(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $s(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw zi()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ds(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>$s(e.doubleValue));return new sd(i)}convertGeoPoint(e){return new id($s(e.latitude),$s(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ks(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gs(e));default:return null}}convertTimestamp(e){const t=qs(e);return new ss(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ls.fromString(e);Bi(nc(n));const r=new Ys(n.get(1),n.get(3)),i=new hs(n.popFirst(5));return r.isEqual(t)||Ui(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Wd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Kd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gd extends Cd{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Qd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ad("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Qd extends Gd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Yd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Kd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Qd(this._firestore,this._userDataWriter,n.key,n,new Kd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hi($i.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Qd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Kd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Qd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Kd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Xd(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Xd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zi()}}class Jd extends Hd{constructor(e){super(),this.firestore=e}convertBytes(e){return new td(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wh(this.firestore,null,t)}}function Zd(e){e=zh(e,Hh);const t=zh(e.firestore,Jh),n=Zh(t),r=new Jd(t);return Rd(e._query),Ph(n,e._query).then(n=>new Yd(t,r,e,n))}function ef(e,t,n){e=zh(e,Wh);const r=zh(e.firestore,Jh),i=dd(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=R(t))||t instanceof nd?vd(i,"updateDoc",e._key,t,n,a):gd(i,"updateDoc",e._key,t),rf(r,[s.toMutation(e._key,Va.exists(!0))])}function tf(e){return rf(zh(e.firestore,Jh),[new Za(e._key,Va.none())])}function nf(e,t){const n=zh(e.firestore,Jh),r=Qh(e),i=Wd(e.converter,t);return rf(n,[fd(dd(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Va.exists(!1))]).then(()=>r)}function rf(e,t){return function(e,t){const n=new Wi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Eh(e);try{const e=await function(e,t){const n=qi(e),r=ss.now(),i=t.reduce((e,t)=>e.add(t.key),ba());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=ha(),l=ba();return n.cs.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Wa(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Qa(e.key,t,vo(t.value.mapValue),Va.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:ma(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ba[e.currentUser.toKey()];r||(r=new Ps(rs)),r=r.insert(t,n),e.Ba[e.currentUser.toKey()]=r}(r,e.batchId,n),await wh(r,e.changes),await bu(r.remoteStore)}catch(e){const t=Pu(e,"Failed to persist write");n.reject(t)}}(await Dh(e),t,n)),n.promise}(Zh(e),t)}function sf(e,t,n){const r=n.docs.get(t._key),i=new Jd(e);return new Gd(e,i,t._key,r,new Kd(n.hasPendingWrites,n.fromCache),t.converter)}function of(){return new pd("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Pi=e}(We),ze(new D("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Jh(new Yi(e.getProvider("auth-internal")),new es(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hi($i.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ys(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Qe(Di,"4.7.3",e),Qe(Di,"4.7.3","esm2017")}();const af="firebasestorage.googleapis.com",lf="storageBucket";class cf extends x{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(df(e),`Firebase Storage: ${t} (${df(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cf.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return df(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var uf,hf;function df(e){return"storage/"+e}function ff(){return new cf(uf.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function mf(){return new cf(uf.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pf(){return new cf(uf.CANCELED,"User canceled the upload/download.")}function gf(){return new cf(uf.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function vf(e){return new cf(uf.INVALID_ARGUMENT,e)}function yf(){return new cf(uf.APP_DELETED,"The Firebase app was deleted.")}function wf(e,t){return new cf(uf.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function bf(e){throw new cf(uf.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(uf||(uf={}));class xf{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=xf.makeFromUrl(e,t)}catch(i){return new xf(e,"")}if(""===n.path)return n;throw r=e,new cf(uf.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===af?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new xf(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new cf(uf.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class _f{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ef(e){return"string"===typeof e||e instanceof String}function kf(e){return Sf()&&e instanceof Blob}function Sf(){return"undefined"!==typeof Blob}function Nf(e,t,n,r){if(r<t)throw vf(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw vf(`Invalid value for '${e}'. Expected ${n} or less.`)}function Tf(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function Cf(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function If(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(hf||(hf={}));class Af{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Rf(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===hf.NO_ERROR,i=n.getStatus();if(!t||If(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===hf.ABORT;return void e(!1,new Rf(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Rf(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=ff();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?yf():pf())}else{r(mf())}};this.canceled_?t(0,new Rf(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let m=!1;function p(e){m||(m=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,p(!0)},n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Rf{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Df(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Of(){const e=Df();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Sf())return new Blob(n);throw new cf(uf.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Pf(e){if("undefined"===typeof atob)throw t="base-64",new cf(uf.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const jf="raw",Lf="base64",Mf="base64url",Uf="data_url";class Ff{constructor(e,t){this.data=e,this.contentType=t||null}}function Vf(e,t){switch(e){case jf:return new Ff(zf(t));case Lf:case Mf:return new Ff(Bf(e,t));case Uf:return new Ff(function(e){const t=new qf(e);return t.base64?Bf(Lf,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw wf(Uf,"Malformed data URL.")}return zf(t)}(t.rest)}(t),new qf(t).contentType)}throw ff()}function zf(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Bf(e,t){switch(e){case Lf:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw wf(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Mf:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw wf(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Pf(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw wf(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class qf{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw wf(Uf,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class $f{constructor(e,t){let n=0,r="";kf(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(kf(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new $f(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new $f(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Sf()){const e=t.map(e=>e instanceof $f?e.data_:e);return new $f(Of.apply(null,e))}{const e=t.map(e=>Ef(e)?Vf(jf,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new $f(r,!0)}}uploadData(){return this.data_}}function Hf(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Wf(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Kf(e,t){return t}class Gf{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Kf}}let Qf=null;function Yf(){if(Qf)return Qf;const e=[];e.push(new Gf("bucket")),e.push(new Gf("generation")),e.push(new Gf("metageneration")),e.push(new Gf("name","fullPath",!0));const t=new Gf("name");t.xform=function(e,t){return function(e){return!Ef(e)||e.length<2?e:Wf(e)}(t)},e.push(t);const n=new Gf("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Gf("timeCreated")),e.push(new Gf("updated")),e.push(new Gf("md5Hash",null,!0)),e.push(new Gf("cacheControl",null,!0)),e.push(new Gf("contentDisposition",null,!0)),e.push(new Gf("contentEncoding",null,!0)),e.push(new Gf("contentLanguage",null,!0)),e.push(new Gf("contentType",null,!0)),e.push(new Gf("metadata","customMetadata",!0)),Qf=e,Qf}function Xf(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new xf(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Jf(e,t,n){const r=Hf(t);if(null===r)return null;return Xf(e,r,n)}function Zf(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const em="prefixes",tm="items";function nm(e,t,n){const r=Hf(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[em])for(const i of n[em]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new xf(t,n));r.prefixes.push(s)}if(n[tm])for(const i of n[tm]){const n=e._makeStorageReference(new xf(t,i.name));r.items.push(n)}return r}(e,t,r)}class rm{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function im(e){if(!e)throw ff()}function sm(e,t){return function(n,r){const i=Jf(e,r,t);return im(null!==i),i}}function om(e,t){return function(n,r){const i=Jf(e,r,t);return im(null!==i),function(e,t,n,r){const i=Hf(t);if(null===i)return null;if(!Ef(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const i=e.bucket,s=e.fullPath;return Tf("/b/"+o(i)+"/o/"+o(s),n,r)+Cf({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function am(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new cf(uf.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new cf(uf.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new cf(uf.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new cf(uf.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function lm(e){const t=am(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new cf(uf.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function cm(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=Tf(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new rm(o,"GET",function(e,t){return function(n,r){const i=nm(e,t,r);return im(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=am(t),l}function um(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function hm(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=um(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Zf(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=$f.getBlob(c,r,u);if(null===h)throw gf();const d={name:l.fullPath},f=Tf(s,e.host,e._protocol),m=e.maxUploadRetryTime,p=new rm(f,"POST",sm(e,n),m);return p.urlParams=d,p.headers=o,p.body=h.uploadData(),p.errorHandler=am(t),p}class dm{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r){if(this.sent_)throw bf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bf("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw bf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class fm extends dm{initXhr(){this.xhr_.responseType="text"}}function mm(){return new fm}class pm{constructor(e,t){this._service=e,this._location=t instanceof xf?t:xf.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new pm(e,t)}get root(){const e=new xf(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wf(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new xf(this._location.bucket,e);return new pm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new cf(uf.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function gm(e,t,n){e._throwIfRoot("uploadBytes");const r=hm(e.storage,e._location,Yf(),new $f(t,!0),n);return e.storage.makeRequestWithTokens(r,mm).then(t=>({metadata:t,ref:e}))}function vm(e){const t={prefixes:[],items:[]};return ym(e,t).then(()=>t)}async function ym(e,t,n){const r={pageToken:n},i=await wm(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await ym(e,t,i.nextPageToken)}function wm(e,t){null!=t&&"number"===typeof t.maxResults&&Nf("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=cm(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,mm)}function bm(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Tf(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new rm(r,"GET",om(e,n),i);return s.errorHandler=lm(t),s}(e.storage,e._location,Yf());return e.storage.makeRequestWithTokens(t,mm).then(e=>{if(null===e)throw new cf(uf.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function xm(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new xf(e._location.bucket,n);return new pm(e.storage,r)}function _m(e,t){if(e instanceof Sm){const n=e;if(null==n._bucket)throw new cf(uf.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lf+"' property when initializing the app?");const r=new pm(n,n._bucket);return null!=t?_m(r,t):r}return void 0!==t?xm(e,t):e}function Em(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Sm)return new pm(e,t);throw vf("To use ref(service, url), the first argument must be a Storage instance.")}return _m(e,t)}function km(e,t){const n=null===t||void 0===t?void 0:t[lf];return null==n?null:xf.makeFromBucketSpec(n,e)}class Sm{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=af,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?xf.makeFromBucketSpec(r,this._host):km(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=xf.makeFromBucketSpec(this._url,e):this._bucket=km(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Nf("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Nf("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pm(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new _f(yf());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Cf(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Af(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Nm="@firebase/storage",Tm="0.13.2",Cm="storage";function Im(e,t,n){return gm(e=R(e),t,n)}function Am(e){return bm(e=R(e))}function Rm(e,t){return Em(e=R(e),t)}function Dm(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Sm(r,i,s,n,We)}ze(new D(Cm,Dm,"PUBLIC").setMultipleInstances(!0)),Qe(Nm,Tm,""),Qe(Nm,Tm,"esm2017");const Om=Ke({apiKey:"AIzaSyCkVr1LP1Gz8dKlX8yFVRwUMReBH-C9v2A",authDomain:"warpedsofi.firebaseapp.com",projectId:"warpedsofi",storageBucket:"warpedsofi.firebasestorage.app",messagingSenderId:"459231357069",appId:"1:459231357069:web:91795694bbd00cd2345ac4"}),Pm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge();const t=Be(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Be(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(k(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;dt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:hi,persistence:[_r,sr,ar]}),r=p("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>pi)return;const r=null===t||void 0===t?void 0:t.token;gi!==r&&(gi=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){R(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){R(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=d("auth");return s&&An(n,`http://${s}`),n}(Om),jm=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Be("object"==typeof e?e:Ge(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=f("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=zh(e,$h))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&Fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Oi.MOCK_USER;else{t=v(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Hi($i.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Oi(s)}e._authCredentials=new Qi(new Ki(t,n))}}(r,...e)}return r}(Om),Lm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge(),t=arguments.length>1?arguments[1]:void 0;e=R(e);const n=Be(e,Cm).getImmediate({identifier:t}),r=f("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:v(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(Om),Mm="1.2.0";var Um=n(579);function Fm(e){let{photos:t,setPhotos:n,availableStoragePhotos:i,setAvailableStoragePhotos:s,handlePhotoSelection:o,handleRemovePhoto:a,handleReplacePhoto:l,handleUploadPhotos:c}=e;const[u,h]=(0,r.useState)(!1);return(0,Um.jsxs)("div",{className:"card stagger-children",children:[(0,Um.jsx)("h3",{className:"text-xl font-bold mb-4 text-gradient",children:"\ud83d\udcf8 Galeria de Fotos"}),(0,Um.jsx)("div",{onDrop:e=>{e.preventDefault(),h(!1);const t=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("image/"));t.length>0&&o(t)},onDragOver:e=>{e.preventDefault(),h(!0)},onDragLeave:e=>{e.preventDefault(),h(!1)},className:"border-2 border-dashed rounded-lg p-6 mb-4 cursor-pointer transition-all duration-300 "+(u?"border-emerald-400 bg-emerald-500/10 scale-105":"border-emerald-400/50 bg-slate-900/40 hover:border-emerald-400 hover:bg-slate-900/60"),children:(0,Um.jsxs)("div",{className:"text-center",children:[(0,Um.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcf7"}),(0,Um.jsx)("label",{className:"text-sm text-slate-400 block mb-2",children:"Fotos P\xfablicas (a primeira ser\xe1 a capa)"}),(0,Um.jsx)("input",{type:"file",onChange:e=>o(Array.from(e.target.files)),multiple:!0,accept:"image/jpeg,image/png,image/webp",className:"w-full text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-emerald-500 file:text-white hover:file:bg-emerald-600 cursor-pointer focus-visible"}),(0,Um.jsx)("div",{className:"text-xs text-slate-400 mt-2",children:"Arraste e solte ou clique para selecionar. Formatos aceitos: JPG, PNG, WEBP. M\xe1ximo 10 fotos."})]})}),t.length>0&&(0,Um.jsx)("div",{className:"flex flex-wrap gap-4 mt-4",children:t.map((e,t)=>{var n;return(0,Um.jsxs)("div",{className:"relative bg-slate-700 rounded-lg p-3 flex flex-col items-center w-32 hover-lift animate-fade-in-up",style:{animationDelay:.1*t+"s"},children:[(0,Um.jsx)("img",{src:e.url||"",alt:"Pr\xe9via",className:"w-24 h-24 object-cover rounded mb-2 bg-slate-900 hover:scale-105 transition-transform duration-300",onError:t=>{console.warn("Erro ao carregar imagem:",e.url),t.target.style.display="none"}}),(0,Um.jsx)("div",{className:"text-xs text-slate-200 truncate w-full text-center font-medium",children:e.name}),(0,Um.jsxs)("div",{className:"text-xs text-slate-400",children:[((null===(n=e.file)||void 0===n?void 0:n.size)/1024/1024).toFixed(2),"MB"]}),(0,Um.jsx)("div",{className:"w-full h-2 bg-slate-600 rounded mt-2 overflow-hidden",children:(0,Um.jsx)("div",{className:"h-2 bg-gradient-to-r from-emerald-400 to-cyan-400 rounded transition-all duration-500",style:{width:`${e.progress}%`}})}),(0,Um.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Um.jsxs)("label",{className:"text-xs text-blue-400 cursor-pointer hover:text-blue-300 transition-colors",children:[(0,Um.jsx)("input",{type:"file",style:{display:"none"},accept:"image/jpeg,image/png,image/webp",onChange:e=>l(e.target.files[0],t)}),"\ud83d\udd04 Substituir"]}),(0,Um.jsx)("button",{type:"button",onClick:()=>a(t),className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"\ud83d\uddd1\ufe0f Remover"})]})]},t)})}),t.some(e=>!e.uploaded)&&(0,Um.jsx)("button",{type:"button",onClick:c,className:"btn-primary mt-4 animate-bounce-in",children:"\ud83d\udce4 Enviar Fotos"}),i.length>0&&(0,Um.jsxs)("div",{className:"mt-6 p-4 bg-slate-800/50 rounded-lg border border-slate-600/50",children:[(0,Um.jsx)("div",{className:"text-sm text-slate-300 mb-3 font-medium",children:"\ud83d\uddbc\ufe0f Imagens j\xe1 presentes no Storage (opcional):"}),(0,Um.jsx)("div",{className:"flex flex-wrap gap-3",children:i.map((e,t)=>(0,Um.jsxs)("div",{className:"relative border-2 rounded-lg p-1 w-20 h-20 flex items-center justify-center transition-all duration-300 hover:scale-110 cursor-pointer "+(e.selected?"border-emerald-400 bg-emerald-500/20":"border-slate-600 hover:border-slate-500"),onClick:()=>{return e=t,void s(t=>t.map((t,n)=>n===e?{...t,selected:!t.selected}:t));var e},children:[(0,Um.jsx)("img",{src:e.url,alt:e.name,className:"w-full h-full object-cover rounded",onError:t=>{console.warn("Erro ao carregar imagem do Storage:",e.url),t.target.style.display="none"}}),e.selected&&(0,Um.jsx)("div",{className:"absolute top-1 right-1 bg-emerald-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs animate-bounce-in",children:"\u2713"})]},t))})]}),t.length>0&&t.every(e=>e.uploaded)&&(0,Um.jsx)("div",{className:"mt-4 p-3 bg-emerald-500/20 border border-emerald-500/30 rounded-lg text-emerald-300 text-center animate-fade-in-up",children:"\u2728 Todos os uploads conclu\xeddos!"})]})}function Vm(e){var t;let{video:n,handleVideoSelection:i,handleRemoveVideo:s,handleReplaceVideo:o,handleUploadVideo:a}=e;const[l,c]=(0,r.useState)(!1);return(0,Um.jsxs)("div",{className:"card stagger-children",children:[(0,Um.jsx)("h3",{className:"text-xl font-bold mb-4 text-gradient",children:"\ud83c\udfac V\xeddeo Secreto"}),(0,Um.jsx)("div",{onDrop:e=>{e.preventDefault(),c(!1);const t=Array.from(e.dataTransfer.files).filter(e=>e.type.startsWith("video/"));t.length>0&&i(t[0])},onDragOver:e=>{e.preventDefault(),c(!0)},onDragLeave:e=>{e.preventDefault(),c(!1)},className:"border-2 border-dashed rounded-lg p-6 mb-4 cursor-pointer transition-all duration-300 "+(l?"border-pink-400 bg-pink-500/10 scale-105":"border-pink-400/50 bg-slate-900/40 hover:border-pink-400 hover:bg-slate-900/60"),children:(0,Um.jsxs)("div",{className:"text-center",children:[(0,Um.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfa5"}),(0,Um.jsx)("label",{className:"text-sm text-slate-400 block mb-2",children:"V\xeddeo Secreto (apenas para Secret Love)"}),(0,Um.jsx)("input",{type:"file",onChange:e=>i(e.target.files[0]),accept:"video/mp4,video/webm,video/ogg",className:"w-full text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-500 file:text-white hover:file:bg-pink-600 cursor-pointer focus-visible"}),(0,Um.jsx)("div",{className:"text-xs text-slate-400 mt-2",children:"Arraste e solte ou clique para selecionar. Formatos aceitos: MP4, WEBM, OGG."})]})}),n&&(0,Um.jsxs)("div",{className:"flex flex-col items-center gap-3 mt-4 p-4 bg-slate-700 rounded-lg w-full max-w-sm mx-auto animate-fade-in-up",children:[(0,Um.jsxs)("div",{className:"relative",children:[(0,Um.jsx)("video",{src:n.url,controls:!0,className:"w-48 h-32 rounded bg-slate-900 hover:scale-105 transition-transform duration-300"}),!n.uploaded&&(0,Um.jsx)("div",{className:"absolute inset-0 bg-black/50 rounded flex items-center justify-center",children:(0,Um.jsx)("div",{className:"text-white text-sm",children:"\u23f3 Aguardando upload..."})})]}),(0,Um.jsxs)("div",{className:"text-center w-full",children:[(0,Um.jsx)("div",{className:"text-sm text-slate-200 truncate font-medium",children:n.name}),(0,Um.jsxs)("div",{className:"text-xs text-slate-400",children:[((null===(t=n.file)||void 0===t?void 0:t.size)/1024/1024).toFixed(2),"MB"]})]}),(0,Um.jsx)("div",{className:"w-full h-2 bg-slate-600 rounded overflow-hidden",children:(0,Um.jsx)("div",{className:"h-2 bg-gradient-to-r from-pink-400 to-purple-400 rounded transition-all duration-500",style:{width:`${n.progress}%`}})}),(0,Um.jsxs)("div",{className:"flex gap-3 mt-2",children:[(0,Um.jsxs)("label",{className:"text-xs text-blue-400 cursor-pointer hover:text-blue-300 transition-colors",children:[(0,Um.jsx)("input",{type:"file",style:{display:"none"},accept:"video/mp4,video/webm,video/ogg",onChange:e=>o(e.target.files[0])}),"\ud83d\udd04 Substituir"]}),(0,Um.jsx)("button",{type:"button",onClick:s,className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"\ud83d\uddd1\ufe0f Remover"})]})]}),n&&!n.uploaded&&(0,Um.jsx)("button",{type:"button",onClick:a,className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg transition-all duration-300 transform hover:scale-105 active:scale-95 mt-4 animate-bounce-in",children:"\ud83d\udce4 Enviar V\xeddeo"}),n&&n.uploaded&&(0,Um.jsx)("div",{className:"mt-4 p-3 bg-pink-500/20 border border-pink-500/30 rounded-lg text-pink-300 text-center animate-fade-in-up",children:"\u2728 V\xeddeo enviado com sucesso!"})]})}function zm(e){let{error:t,uploadError:n,loading:r,children:i}=e;return(0,Um.jsxs)("div",{className:"mb-6",children:[t&&(0,Um.jsx)("div",{className:"bg-red-500/20 text-red-300 p-4 rounded-lg mb-3 border border-red-500/30 animate-bounce-in",children:(0,Um.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Um.jsx)("span",{className:"text-lg",children:"\u26a0\ufe0f"}),(0,Um.jsx)("span",{className:"font-medium",children:t})]})}),n&&(0,Um.jsx)("div",{className:"bg-red-500/20 text-red-300 p-4 rounded-lg mb-3 border border-red-500/30 animate-bounce-in",children:(0,Um.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Um.jsx)("span",{className:"text-lg",children:"\ud83d\udce4"}),(0,Um.jsx)("span",{className:"font-medium",children:n})]})}),r&&(0,Um.jsxs)("div",{className:"flex items-center gap-3 text-emerald-400 p-4 bg-emerald-500/10 rounded-lg border border-emerald-500/30 animate-fade-in-up",children:[(0,Um.jsx)("div",{className:"loading-spinner h-6 w-6"}),(0,Um.jsx)("span",{className:"font-medium",children:"\u23f3 Processando upload..."})]}),i]})}const Bm=r.memo(e=>{let{className:t}=e;return(0,Um.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",children:(0,Um.jsx)("polygon",{points:"5 3 19 12 5 21 5 3"})})}),qm=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("polygon",{points:"19 20 9 12 19 4 19 20"}),(0,Um.jsx)("line",{x1:"5",x2:"5",y1:"19",y2:"5"})]})}),$m=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("polygon",{points:"5 4 15 12 5 20 5 4"}),(0,Um.jsx)("line",{x1:"19",x2:"19",y1:"5",y2:"19"})]})}),Hm=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("path",{d:"m18 14 4 4-4 4"}),(0,Um.jsx)("path",{d:"m18 2 4 4-4 4"}),(0,Um.jsx)("path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22"}),(0,Um.jsx)("path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2"}),(0,Um.jsx)("path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45"})]})}),Wm=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("path",{d:"m17 2 4 4-4 4"}),(0,Um.jsx)("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),(0,Um.jsx)("path",{d:"m7 22-4-4 4-4"}),(0,Um.jsx)("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]})}),Km=r.memo(e=>{let{className:t}=e;return(0,Um.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,Um.jsx)("path",{d:"m6 9 6 6 6-6"})})}),Gm=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("circle",{cx:"12",cy:"12",r:"1"}),(0,Um.jsx)("circle",{cx:"19",cy:"12",r:"1"}),(0,Um.jsx)("circle",{cx:"5",cy:"12",r:"1"})]})}),Qm=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),(0,Um.jsx)("circle",{cx:"12",cy:"13",r:"3"})]})}),Ym=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,Um.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),Xm=r.memo(e=>{let{className:t}=e;return(0,Um.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,Um.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),Jm=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,Um.jsx)("path",{d:"M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"})]})}),Zm=r.memo(e=>{let{className:t}=e;return(0,Um.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,Um.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,Um.jsx)("circle",{cx:"12",cy:"7",r:"4"})]})}),ep=e=>{if(!e||isNaN(e))return"0:00";return`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`},tp=r.memo(e=>{let{onNavigate:t}=e;return(0,Um.jsxs)("div",{className:"text-center p-8 max-w-2xl mx-auto bg-slate-900 text-white h-screen flex flex-col justify-center",children:[(0,Um.jsx)("h1",{className:"text-5xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400 mb-4",children:"RewindSofi"}),(0,Um.jsx)("p",{className:"mb-8 text-lg text-slate-300",children:"Guarde aqui suas mem\xf3rias e sentimentos mais especiais."}),(0,Um.jsx)("button",{onClick:()=>t("form"),className:"bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105",children:"Criar nova mem\xf3ria"})]})}),np=r.memo(e=>{let{startDate:t}=e;const[n,i]=(0,r.useState)(Date.now());(0,r.useEffect)(()=>{const e=setInterval(()=>i(Date.now()),50);return()=>clearInterval(e)},[]);const s=(0,r.useMemo)(()=>{const e=t?new Date(t):null;if(!e||isNaN(e.getTime()))return null;let r=new Date(n),i=r.getFullYear()-e.getFullYear(),s=r.getMonth()-e.getMonth(),o=r.getDate()-e.getDate(),a=r.getHours()-e.getHours(),l=r.getMinutes()-e.getMinutes(),c=r.getSeconds()-e.getSeconds(),u=r.getMilliseconds()-e.getMilliseconds();if(u<0&&(u+=1e3,c--),c<0&&(c+=60,l--),l<0&&(l+=60,a--),a<0&&(a+=24,o--),o<0){o+=new Date(r.getFullYear(),r.getMonth(),0).getDate(),s--}s<0&&(s+=12,i--);let h=Math.floor(o/7);return o%=7,{years:i,months:s,weeks:h,days:o,hours:a,minutes:l,seconds:c}},[t,n]);if(!s)return(0,Um.jsx)("span",{className:"text-red-400",children:"Data inv\xe1lida"});const o=[{value:s.years,label:"ano",color:"from-emerald-500 to-emerald-600",textColor:"text-emerald-100"},{value:s.months,label:"m\xeas",color:"from-cyan-500 to-cyan-600",textColor:"text-cyan-100"},{value:s.weeks,label:"semana",color:"from-blue-500 to-blue-600",textColor:"text-blue-100"},{value:s.days,label:"dia",color:"from-purple-500 to-purple-600",textColor:"text-purple-100"},{value:s.hours,label:"hora",color:"from-pink-500 to-pink-600",textColor:"text-pink-100"},{value:s.minutes,label:"min",color:"from-orange-500 to-orange-600",textColor:"text-orange-100"},{value:s.seconds,label:"seg",color:"from-red-500 to-red-600",textColor:"text-red-100"}];return(0,Um.jsx)("div",{className:"flex flex-wrap gap-3 mt-4",children:o.map((e,t)=>(0,Um.jsxs)("div",{className:`bg-gradient-to-br ${e.color} rounded-xl p-3 text-center min-w-[80px] transform hover:scale-105 transition-all duration-300 shadow-lg`,children:[(0,Um.jsx)("div",{className:"text-2xl font-bold text-white",children:e.value}),(0,Um.jsxs)("div",{className:`text-xs ${e.textColor}`,children:[e.label,1!==e.value?"m\xeas"===e.label?"es":"s":""]})]},t))})}),rp=r.memo(e=>{let{startDate:t}=e;const[n,i]=(0,r.useState)({years:0,months:0,days:0,hours:0,minutes:0,seconds:0}),[s,o]=(0,r.useState)(!1),a=(0,r.useCallback)(()=>{if(!t)return{years:0,months:0,days:0,hours:0,minutes:0,seconds:0};const e=new Date(t),n=new Date;if(isNaN(e.getTime()))return console.error("\u274c DatingTimer: Data inv\xe1lida:",t),{years:0,months:0,days:0,hours:0,minutes:0,seconds:0};console.log("\ud83d\udd0d DatingTimer: Calculando dura\xe7\xe3o - startDate:",t,"start:",e,"now:",n);let r=n.getFullYear()-e.getFullYear(),i=n.getMonth()-e.getMonth(),s=n.getDate()-e.getDate();if(s<0){i--;s+=new Date(n.getFullYear(),n.getMonth(),0).getDate()}i<0&&(r--,i+=12);const o=n-e,a={years:r,months:i,days:s,hours:Math.floor(o/36e5%24),minutes:Math.floor(o/6e4%60),seconds:Math.floor(o/1e3%60)};return console.log("\ud83d\udd0d DatingTimer: Resultado do c\xe1lculo:",a),a},[t]);(0,r.useEffect)(()=>{console.log("\ud83d\udd0d DatingTimer: useEffect - startDate mudou para:",t),i(a()),o(!1),setTimeout(()=>o(!0),100);const e=setInterval(()=>{const e=a();i(e)},1e3);return()=>clearInterval(e)},[a]);const l=[{label:"ano",value:n.years,color:"from-pink-500 to-pink-600",textColor:"text-pink-100"},{label:"m\xeas",value:n.months,color:"from-red-500 to-red-600",textColor:"text-red-100"},{label:"dia",value:n.days,color:"from-rose-500 to-rose-600",textColor:"text-rose-100"},{label:"hora",value:n.hours,color:"from-purple-500 to-purple-600",textColor:"text-purple-100"},{label:"min",value:n.minutes,color:"from-fuchsia-500 to-fuchsia-600",textColor:"text-fuchsia-100"},{label:"seg",value:n.seconds,color:"from-violet-500 to-violet-600",textColor:"text-violet-100"}];return(0,Um.jsxs)("div",{className:"mt-6 p-4 bg-gradient-to-r from-pink-500/20 to-red-500/20 rounded-xl border border-pink-500/30 transition-all duration-700 ease-out "+(s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:[(0,Um.jsxs)("div",{className:"text-center mb-4",children:[(0,Um.jsx)("h3",{className:"text-lg font-semibold text-white mb-2 animate-pulse",children:"\ud83d\udc95 Tempo de Namoro"}),(0,Um.jsx)("p",{className:"text-sm text-pink-200",children:'Contando desde que ela disse "sim"!'})]}),(0,Um.jsx)("div",{className:"flex flex-wrap gap-3",children:l.map((e,t)=>(0,Um.jsxs)("div",{className:`bg-gradient-to-br ${e.color} rounded-xl p-3 text-center min-w-[80px] transform hover:scale-105 transition-all duration-300 shadow-lg animate-bounce`,style:{animationDelay:100*t+"ms"},children:[(0,Um.jsx)("div",{className:"text-2xl font-bold text-white",children:e.value}),(0,Um.jsxs)("div",{className:`text-xs ${e.textColor}`,children:[e.label,1!==e.value?"m\xeas"===e.label?"es":"s":""]})]},t))})]})}),ip=r.memo(()=>(0,Um.jsxs)("div",{className:"mt-6 transition-all duration-500 ease-in-out",children:[(0,Um.jsxs)("div",{className:"text-center mb-4",children:[(0,Um.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"\u23f0 Cron\xf4metro do Suspense"}),(0,Um.jsx)("p",{className:"text-sm text-slate-300",children:"Aguardando o momento especial..."})]}),(0,Um.jsx)("div",{className:"flex flex-wrap gap-3",children:[{label:"ano",color:"from-emerald-500 to-emerald-600",textColor:"text-emerald-100"},{label:"m\xeas",color:"from-cyan-500 to-cyan-600",textColor:"text-cyan-100"},{label:"semana",color:"from-blue-500 to-blue-600",textColor:"text-blue-100"},{label:"dia",color:"from-purple-500 to-purple-600",textColor:"text-purple-100"},{label:"hora",color:"from-pink-500 to-pink-600",textColor:"text-pink-100"},{label:"min",color:"from-orange-500 to-orange-600",textColor:"text-orange-100"},{label:"seg",color:"from-red-500 to-red-600",textColor:"text-red-100"}].map((e,t)=>(0,Um.jsxs)("div",{className:`bg-gradient-to-br ${e.color} rounded-xl p-3 text-center min-w-[80px] transform hover:scale-105 transition-all duration-300 shadow-lg animate-pulse`,style:{animationDelay:50*t+"ms"},children:[(0,Um.jsx)("div",{className:"text-2xl font-bold text-white animate-bounce",children:"?"}),(0,Um.jsx)("div",{className:`text-xs ${e.textColor}`,children:e.label})]},t))})]})),sp=r.memo(()=>{const[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{const e=Array.from({length:50},(e,t)=>({id:t,x:Math.random()*window.innerWidth,y:-10,vx:8*(Math.random()-.5),vy:3*Math.random()+2,color:["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff"][Math.floor(7*Math.random())],size:4*Math.random()+2}));t(e);const n=setTimeout(()=>t([]),3e3);return()=>clearTimeout(n)},[]),(0,r.useEffect)(()=>{if(0===e.length)return;const n=setInterval(()=>{t(e=>e.map(e=>({...e,x:e.x+e.vx,y:e.y+e.vy,vy:e.vy+.1})).filter(e=>e.y<window.innerHeight+10))},50);return()=>clearInterval(n)},[e]),0===e.length?null:(0,Um.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:e.map(e=>(0,Um.jsx)("div",{className:"absolute rounded-full",style:{left:e.x,top:e.y,width:e.size,height:e.size,backgroundColor:e.color,transform:`rotate(${.1*e.x}deg)`}},e.id))})}),op=r.memo(e=>{let{memory:t}=e;const[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[h,d]=(0,r.useState)(0),[f,m]=(0,r.useState)(new Date);return console.log("\ud83d\udd0d SmartTimer: Renderizando - memory.datingStartDate:",t.datingStartDate),console.log("\ud83d\udd0d SmartTimer: showDatingTimer atual:",s),console.log("\ud83d\udd0d SmartTimer: forceUpdate:",h),(0,r.useEffect)(()=>{console.log("\ud83d\udd0d SmartTimer: useEffect - memory.datingStartDate mudou para:",t.datingStartDate),console.log("\ud83d\udd0d SmartTimer: showDatingTimer atual:",s),t.datingStartDate&&!s?(console.log("\u2705 SmartTimer: Ativando cron\xf4metro de namoro com anima\xe7\xe3o"),u(!0),setTimeout(()=>u(!1),3e3),l(!0),i(!0),setTimeout(()=>{o(!0),l(!1),i(!1),console.log("\u2705 SmartTimer: Cron\xf4metro de namoro ativado")},400)):!t.datingStartDate&&s&&(console.log("\u23f0 SmartTimer: Desativando cron\xf4metro de namoro"),o(!1)),m(new Date)},[t.datingStartDate,s]),(0,r.useEffect)(()=>{console.log("\ud83d\udd0d SmartTimer: Efeito adicional - memory.datingStartDate:",t.datingStartDate),t.datingStartDate?(console.log("\u2705 SmartTimer: Mem\xf3ria tem datingStartDate, ativando cron\xf4metro"),o(!0)):(console.log("\u23f0 SmartTimer: Mem\xf3ria n\xe3o tem datingStartDate, mostrando suspense"),o(!1))},[t.datingStartDate]),(0,r.useEffect)(()=>{console.log("\ud83d\udd0d SmartTimer: Mem\xf3ria mudou completamente:",t),d(e=>e+1)},[t]),(0,r.useEffect)(()=>{console.log("\ud83d\udd0d SmartTimer: datingStartDate mudou para:",t.datingStartDate),t.datingStartDate&&(console.log("\u2705 SmartTimer: For\xe7ando ativa\xe7\xe3o do cron\xf4metro"),o(!0))},[t.datingStartDate]),(0,Um.jsxs)(Um.Fragment,{children:[c&&(0,Um.jsx)(sp,{}),t.datingStartDate&&s?(0,Um.jsx)("div",{className:"transition-all duration-700 ease-out "+(n?"opacity-0 scale-90 rotate-2":"opacity-100 scale-100 rotate-0"),children:(0,Um.jsx)(rp,{startDate:t.datingStartDate})}):(0,Um.jsx)("div",{className:"transition-all duration-700 ease-out "+(a?"opacity-0 scale-90 -rotate-2":"opacity-100 scale-100 rotate-0"),children:(0,Um.jsx)(ip,{})})]})}),ap=r.memo(e=>{let{onSubmit:t,isSubmitting:n}=e;const[i,s]=(0,r.useState)("");return(0,Um.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-4 mb-4",children:[(0,Um.jsxs)("h3",{className:"text-lg font-semibold text-white mb-3 flex items-center gap-2",children:[(0,Um.jsx)(Xm,{className:"w-5 h-5 text-emerald-400"}),"Deixe seu coment\xe1rio"]}),(0,Um.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i.trim()&&(t(i.trim()),s(""))},className:"space-y-3",children:[(0,Um.jsx)("textarea",{value:i,onChange:e=>s(e.target.value),placeholder:"Escreva seu coment\xe1rio aqui...",className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 text-white resize-none focus:ring-2 focus:ring-emerald-500 outline-none",rows:3,maxLength:500}),(0,Um.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Um.jsxs)("span",{className:"text-xs text-slate-400",children:[i.length,"/500 caracteres"]}),(0,Um.jsx)("button",{type:"submit",disabled:!i.trim()||n,className:"bg-emerald-500 hover:bg-emerald-600 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-bold py-2 px-4 rounded-lg transition-colors",children:n?"Enviando...":"Enviar Coment\xe1rio"})]})]})]})}),lp=r.memo(e=>{let{comment:t,onDelete:n,isAdmin:r}=e;return(0,Um.jsx)("div",{className:"bg-slate-800/50 rounded-xl p-4 mb-3",children:(0,Um.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Um.jsx)("div",{className:"flex-shrink-0",children:t.userPhoto?(0,Um.jsx)("img",{src:t.userPhoto,alt:t.userName,className:"w-10 h-10 rounded-full object-cover"}):(0,Um.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center",children:(0,Um.jsx)(Zm,{className:"w-5 h-5 text-slate-400"})})}),(0,Um.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Um.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Um.jsxs)("div",{children:[(0,Um.jsx)("h4",{className:"text-white font-semibold text-sm",children:t.userName}),(0,Um.jsx)("p",{className:"text-slate-400 text-xs",children:(e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})(t.createdAt)})]}),r&&(0,Um.jsx)("button",{onClick:()=>n(t.id),className:"text-red-400 hover:text-red-300 transition-colors p-1",title:"Excluir coment\xe1rio",children:(0,Um.jsx)(Jm,{className:"w-4 h-4"})})]}),(0,Um.jsx)("p",{className:"text-white text-sm leading-relaxed whitespace-pre-wrap break-words",children:t.text})]})]})})}),cp=r.memo(e=>{let{memoryId:t,isAdmin:n}=e;const[i,s]=(0,r.useState)([]),[o,a]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{if(t){console.log("=== CARREGANDO COMENT\xc1RIOS ==="),console.log("memoryId:",t),console.log("isAdmin:",n);try{h(!0),console.log("Fazendo query para coment\xe1rios ativos...");const e=Pd(Gh(jm,"comments"),Ld("memoryId","==",t),Ld("deleted","==",!1),Fd("createdAt","desc")),r=(await Zd(e)).docs.map(e=>({id:e.id,...e.data()}));console.log("\u2705 Coment\xe1rios ativos carregados:",r.length),console.log("Coment\xe1rios ativos:",r);let i=[];if(n){console.log("Carregando coment\xe1rios deletados (admin)...");const e=Pd(Gh(jm,"comments"),Ld("memoryId","==",t),Ld("deleted","==",!0),Fd("createdAt","desc"));i=(await Zd(e)).docs.map(e=>({id:e.id,...e.data()})),console.log("\u2705 Coment\xe1rios deletados carregados:",i.length)}s(r),a(i),console.log("\u2705 Estado atualizado com coment\xe1rios")}catch(e){console.error("\u274c Erro ao carregar coment\xe1rios:",e),console.error("Detalhes do erro:",e.message),console.error("C\xf3digo do erro:",e.code)}finally{h(!1)}}})()},[t,n]),(0,r.useEffect)(()=>{if(t){const e=async()=>{try{h(!0);const e=Pd(Gh(jm,"comments"),Ld("memoryId","==",t),Ld("deleted","==",!1),Fd("createdAt","desc")),n=(await Zd(e)).docs.map(e=>({id:e.id,...e.data()}));s(n)}catch(e){console.error("Erro ao recarregar coment\xe1rios:",e)}finally{h(!1)}};e()}},[t]);const d=async e=>{if(n)try{const t=Qh(jm,"comments",e);await ef(t,{deleted:!0});const n=i.find(t=>t.id===e);n&&(s(t=>t.filter(t=>t.id!==e)),a(e=>[n,...e]))}catch(t){console.error("Erro ao deletar coment\xe1rio:",t),alert("Erro ao deletar coment\xe1rio. Tente novamente.")}};return u?(0,Um.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,Um.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-400"})}):(0,Um.jsxs)("div",{className:"mt-8 mb-8",children:[n&&(0,Um.jsxs)("div",{className:"mb-4 p-4 bg-yellow-900/20 border border-yellow-500/30 rounded-xl",children:[(0,Um.jsx)("h4",{className:"text-yellow-300 font-semibold mb-2",children:"\ud83d\udd27 Teste de Debug (Admin)"}),(0,Um.jsx)("button",{onClick:async()=>{try{console.log("=== TESTE DE CONEX\xc3O COM FIRESTORE ==="),console.log("Teste 1: Tentando ler coment\xe1rios...");const e=Pd(Gh(jm,"comments"),zd(1)),r=await Zd(e);if(console.log("\u2705 Leitura funcionando. Documentos encontrados:",r.docs.length),n){console.log("Teste 2: Tentando escrever coment\xe1rio de teste...");const e={memoryId:t,text:"Coment\xe1rio de teste - "+(new Date).toISOString(),userName:"Teste",userEmail:"teste@teste.com",userPhoto:null,createdAt:of(),deleted:!1},n=await nf(Gh(jm,"comments"),e);console.log("\u2705 Escrita funcionando. ID do teste:",n.id),await tf(Qh(jm,"comments",n.id)),console.log("\u2705 Deletado coment\xe1rio de teste")}}catch(e){console.error("\u274c Erro no teste de conex\xe3o:",e),console.error("Detalhes:",e.message)}},className:"bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded-lg text-sm",children:"Testar Conex\xe3o Firestore"})]}),(0,Um.jsxs)("div",{className:"mb-6",children:[(0,Um.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,Um.jsx)(Xm,{className:"w-5 h-5 text-emerald-400"}),"Coment\xe1rios (",i.length,")"]}),0===i.length?(0,Um.jsxs)("div",{className:"text-center py-8 text-slate-400",children:[(0,Um.jsx)(Xm,{className:"w-12 h-12 mx-auto mb-3 text-slate-600"}),(0,Um.jsx)("p",{children:"Nenhum coment\xe1rio ainda. Seja o primeiro a comentar!"})]}):(0,Um.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,Um.jsx)(lp,{comment:e,onDelete:d,isAdmin:n},e.id))})]}),Pm.currentUser&&(0,Um.jsx)(ap,{onSubmit:async e=>{if(Pm.currentUser){c(!0);try{console.log("=== IN\xcdCIO DO ENVIO DE COMENT\xc1RIO ==="),console.log("memoryId:",t),console.log("Usu\xe1rio logado:",Pm.currentUser.email),console.log("Texto do coment\xe1rio:",e);const n={memoryId:t,text:e,userName:Pm.currentUser.displayName||"Usu\xe1rio",userEmail:Pm.currentUser.email,userPhoto:Pm.currentUser.photoURL,createdAt:of(),deleted:!1};console.log("Dados do coment\xe1rio a serem enviados:",n),console.log("Tentando salvar no Firestore...");const r=await nf(Gh(jm,"comments"),n);console.log("\u2705 Coment\xe1rio salvo com sucesso no Firestore!"),console.log("ID do documento:",r.id),console.log("Recarregando coment\xe1rios do Firestore...");const i=Pd(Gh(jm,"comments"),Ld("memoryId","==",t),Ld("deleted","==",!1),Fd("createdAt","desc")),o=(await Zd(i)).docs.map(e=>({id:e.id,...e.data()}));console.log("Coment\xe1rios carregados do Firestore:",o.length),console.log("Coment\xe1rios:",o),s(o),console.log("\u2705 Coment\xe1rios atualizados no estado!")}catch(n){console.error("\u274c Erro ao enviar coment\xe1rio:",n),console.error("Detalhes do erro:",n.message),console.error("C\xf3digo do erro:",n.code),alert(`Erro ao enviar coment\xe1rio: ${n.message}`)}finally{c(!1)}}},isSubmitting:l}),!Pm.currentUser&&(0,Um.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-4 text-center",children:[(0,Um.jsx)(Xm,{className:"w-8 h-8 mx-auto mb-3 text-slate-400"}),(0,Um.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"Fa\xe7a login para comentar"}),(0,Um.jsx)("p",{className:"text-slate-400 mb-4",children:"Entre com sua conta Google para deixar um coment\xe1rio"}),(0,Um.jsxs)("button",{onClick:()=>{const e=new Wn;Or(Pm,e).catch(e=>{console.error("Erro ao fazer login:",e),alert("Erro ao fazer login. Tente novamente.")})},className:"bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[(0,Um.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:(0,Um.jsxs)("g",{children:[(0,Um.jsx)("path",{fill:"#4285F4",d:"M24 9.5c3.54 0 6.7 1.22 9.19 3.23l6.85-6.85C36.68 2.69 30.77 0 24 0 14.82 0 6.71 5.13 2.69 12.56l7.98 6.2C12.13 13.09 17.62 9.5 24 9.5z"}),(0,Um.jsx)("path",{fill:"#34A853",d:"M46.1 24.55c0-1.64-.15-3.22-.42-4.74H24v9.01h12.42c-.54 2.9-2.18 5.36-4.65 7.04l7.19 5.59C43.99 37.13 46.1 31.3 46.1 24.55z"}),(0,Um.jsx)("path",{fill:"#FBBC05",d:"M10.67 28.13a14.5 14.5 0 0 1 0-8.26l-7.98-6.2A23.94 23.94 0 0 0 0 24c0 3.77.9 7.34 2.69 10.56l7.98-6.43z"}),(0,Um.jsx)("path",{fill:"#EA4335",d:"M24 48c6.48 0 11.92-2.14 15.89-5.82l-7.19-5.59c-2.01 1.35-4.6 2.15-8.7 2.15-6.38 0-11.87-3.59-14.33-8.79l-7.98 6.43C6.71 42.87 14.82 48 24 48z"})]})}),"Entrar com Google"]})]}),n&&o.length>0&&(0,Um.jsxs)("div",{className:"mt-8 border-t border-slate-700 pt-6",children:[(0,Um.jsxs)("h3",{className:"text-lg font-semibold text-red-400 mb-4 flex items-center gap-2",children:[(0,Um.jsx)(Jm,{className:"w-5 h-5"}),"Coment\xe1rios Exclu\xeddos (",o.length,")"]}),(0,Um.jsx)("div",{className:"space-y-3",children:o.map(e=>{var t;return(0,Um.jsx)("div",{className:"bg-red-900/20 border border-red-500/30 rounded-xl p-4 mb-3",children:(0,Um.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Um.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,Um.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"w-10 h-10 rounded-full object-cover opacity-50"}):(0,Um.jsx)("div",{className:"w-10 h-10 rounded-full bg-slate-600 flex items-center justify-center opacity-50",children:(0,Um.jsx)(Zm,{className:"w-5 h-5 text-slate-400"})})}),(0,Um.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Um.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Um.jsxs)("div",{children:[(0,Um.jsx)("h4",{className:"text-red-300 font-semibold text-sm",children:e.userName}),(0,Um.jsx)("p",{className:"text-red-400 text-xs",children:null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate().toLocaleString("pt-BR"):"Data n\xe3o dispon\xedvel"})]}),(0,Um.jsx)("button",{onClick:()=>(async e=>{if(n)try{const t=Qh(jm,"comments",e);await ef(t,{deleted:!1});const n=o.find(t=>t.id===e);n&&(a(t=>t.filter(t=>t.id!==e)),s(e=>[n,...e]))}catch(t){console.error("Erro ao restaurar coment\xe1rio:",t),alert("Erro ao restaurar coment\xe1rio. Tente novamente.")}})(e.id),className:"text-emerald-400 hover:text-emerald-300 transition-colors p-1",title:"Restaurar coment\xe1rio",children:(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),(0,Um.jsx)("p",{className:"text-red-300 text-sm leading-relaxed whitespace-pre-wrap break-words opacity-75",children:e.text})]})]})},e.id)})})]})]})}),up=r.memo(e=>{let{onNavigate:t}=e;const[n,i]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)("active");(0,r.useEffect)(()=>{(async()=>{try{l(!0),console.log("=== CARREGANDO TODOS OS COMENT\xc1RIOS (ADMIN) ==="),console.log("Carregando coment\xe1rios ativos...");const e=Pd(Gh(jm,"comments"),Ld("deleted","==",!1)),t=(await Zd(e)).docs.map(e=>({id:e.id,...e.data()}));t.sort((e,t)=>{var n,r,i,s;const o=(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date(e.createdAt);return((null===(i=t.createdAt)||void 0===i||null===(s=i.toDate)||void 0===s?void 0:s.call(i))||new Date(t.createdAt))-o}),console.log("\u2705 Coment\xe1rios ativos carregados:",t.length),console.log("Carregando coment\xe1rios deletados...");const n=Pd(Gh(jm,"comments"),Ld("deleted","==",!0)),r=(await Zd(n)).docs.map(e=>({id:e.id,...e.data()}));r.sort((e,t)=>{var n,r,i,s;const o=(null===(n=e.createdAt)||void 0===n||null===(r=n.toDate)||void 0===r?void 0:r.call(n))||new Date(e.createdAt);return((null===(i=t.createdAt)||void 0===i||null===(s=i.toDate)||void 0===s?void 0:s.call(i))||new Date(t.createdAt))-o}),console.log("\u2705 Coment\xe1rios deletados carregados:",r.length),i(t),o(r),console.log("\u2705 Painel admin atualizado com sucesso!")}catch(e){console.error("\u274c Erro ao carregar coment\xe1rios:",e),console.error("Detalhes do erro:",e.message);try{console.log("Tentando fallback: carregar todos os coment\xe1rios...");const e=Pd(Gh(jm,"comments")),t=(await Zd(e)).docs.map(e=>({id:e.id,...e.data()})),n=t.filter(e=>!e.deleted),r=t.filter(e=>e.deleted);i(n),o(r),console.log("\u2705 Fallback executado com sucesso!")}catch(t){console.error("\u274c Erro no fallback:",t)}}finally{l(!1)}})()},[]);return a?(0,Um.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-slate-900",children:(0,Um.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-400"})}):(0,Um.jsx)("div",{className:"min-h-screen bg-slate-900 text-white p-4 md:p-8",children:(0,Um.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Um.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,Um.jsxs)("div",{children:[(0,Um.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Administra\xe7\xe3o de Coment\xe1rios"}),(0,Um.jsx)("p",{className:"text-slate-400",children:"Gerencie todos os coment\xe1rios da aplica\xe7\xe3o"})]}),(0,Um.jsx)("button",{onClick:()=>t("home"),className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"\u2190 Voltar"})]}),(0,Um.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,Um.jsxs)("button",{onClick:()=>u("active"),className:"px-4 py-2 rounded-lg font-semibold transition-colors "+("active"===c?"bg-emerald-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:["Coment\xe1rios Ativos (",n.length,")"]}),(0,Um.jsxs)("button",{onClick:()=>u("deleted"),className:"px-4 py-2 rounded-lg font-semibold transition-colors "+("deleted"===c?"bg-red-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:["Coment\xe1rios Exclu\xeddos (",s.length,")"]})]}),"active"===c?(0,Um.jsx)("div",{className:"space-y-4",children:0===n.length?(0,Um.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,Um.jsx)(Xm,{className:"w-16 h-16 mx-auto mb-4 text-slate-600"}),(0,Um.jsx)("p",{className:"text-lg",children:"Nenhum coment\xe1rio ativo encontrado."})]}):n.map(e=>{var t;return(0,Um.jsx)("div",{className:"bg-slate-800 rounded-xl p-6",children:(0,Um.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Um.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,Um.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"w-12 h-12 rounded-full object-cover"}):(0,Um.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-600 flex items-center justify-center",children:(0,Um.jsx)(Zm,{className:"w-6 h-6 text-slate-400"})})}),(0,Um.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Um.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Um.jsxs)("div",{children:[(0,Um.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.userName}),(0,Um.jsx)("p",{className:"text-slate-400 text-sm",children:e.userEmail}),(0,Um.jsx)("p",{className:"text-slate-500 text-xs",children:null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate().toLocaleString("pt-BR"):"Data n\xe3o dispon\xedvel"})]}),(0,Um.jsx)("div",{className:"flex gap-2",children:(0,Um.jsx)("button",{onClick:()=>(async e=>{try{const t=Qh(jm,"comments",e);await ef(t,{deleted:!0});const r=n.find(t=>t.id===e);r&&(i(t=>t.filter(t=>t.id!==e)),o(e=>[r,...e]))}catch(t){console.error("Erro ao deletar coment\xe1rio:",t),alert("Erro ao deletar coment\xe1rio. Tente novamente.")}})(e.id),className:"text-red-400 hover:text-red-300 transition-colors p-2",title:"Excluir coment\xe1rio",children:(0,Um.jsx)(Jm,{className:"w-5 h-5"})})})]}),(0,Um.jsx)("p",{className:"text-white text-base leading-relaxed whitespace-pre-wrap break-words",children:e.text})]})]})},e.id)})}):(0,Um.jsx)("div",{className:"space-y-4",children:0===s.length?(0,Um.jsxs)("div",{className:"text-center py-12 text-slate-400",children:[(0,Um.jsx)(Jm,{className:"w-16 h-16 mx-auto mb-4 text-slate-600"}),(0,Um.jsx)("p",{className:"text-lg",children:"Nenhum coment\xe1rio exclu\xeddo encontrado."})]}):s.map(e=>{var t;return(0,Um.jsx)("div",{className:"bg-red-900/20 border border-red-500/30 rounded-xl p-6",children:(0,Um.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Um.jsx)("div",{className:"flex-shrink-0",children:e.userPhoto?(0,Um.jsx)("img",{src:e.userPhoto,alt:e.userName,className:"w-12 h-12 rounded-full object-cover opacity-50"}):(0,Um.jsx)("div",{className:"w-12 h-12 rounded-full bg-slate-600 flex items-center justify-center opacity-50",children:(0,Um.jsx)(Zm,{className:"w-6 h-6 text-slate-400"})})}),(0,Um.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Um.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Um.jsxs)("div",{children:[(0,Um.jsx)("h4",{className:"text-red-300 font-semibold text-lg",children:e.userName}),(0,Um.jsx)("p",{className:"text-red-400 text-sm",children:e.userEmail}),(0,Um.jsx)("p",{className:"text-red-500 text-xs",children:null!==(t=e.createdAt)&&void 0!==t&&t.toDate?e.createdAt.toDate().toLocaleString("pt-BR"):"Data n\xe3o dispon\xedvel"})]}),(0,Um.jsxs)("div",{className:"flex gap-2",children:[(0,Um.jsx)("button",{onClick:()=>(async e=>{try{const t=Qh(jm,"comments",e);await ef(t,{deleted:!1});const n=s.find(t=>t.id===e);n&&(o(t=>t.filter(t=>t.id!==e)),i(e=>[n,...e]))}catch(t){console.error("Erro ao restaurar coment\xe1rio:",t),alert("Erro ao restaurar coment\xe1rio. Tente novamente.")}})(e.id),className:"text-emerald-400 hover:text-emerald-300 transition-colors p-2",title:"Restaurar coment\xe1rio",children:(0,Um.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,Um.jsx)("button",{onClick:()=>(async e=>{if(confirm("Tem certeza que deseja excluir permanentemente este coment\xe1rio? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{const t=Qh(jm,"comments",e);await tf(t),o(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Erro ao excluir permanentemente:",t),alert("Erro ao excluir coment\xe1rio. Tente novamente.")}})(e.id),className:"text-red-600 hover:text-red-500 transition-colors p-2",title:"Excluir permanentemente",children:(0,Um.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),(0,Um.jsx)("p",{className:"text-red-300 text-base leading-relaxed whitespace-pre-wrap break-words opacity-75",children:e.text})]})]})},e.id)})})]})})}),hp=r.memo(e=>{let{videoUrl:t,secretMessage:n}=e;const[i,s]=(0,r.useState)(!1),[o,a]=(0,r.useState)(0),[l,c]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[d,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[y,w]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[_,E]=(0,r.useState)(!1),[k,S]=(0,r.useState)(0),[N,T]=(0,r.useState)(!1),C=(0,r.useRef)(null),I=(0,r.useRef)(null),A=[{id:1,question:"Pense no nosso primeiro encontro. Onde o hashi e a conversa flu\xedram soltos, em um mar de sabores que selou nosso come\xe7o. A fachada mostra a entrada.",answer:"maru",successMessage:"Exato. O primeiro de incont\xe1veis momentos perfeitos que viriam."},{id:2,question:"Do restaurante para o caf\xe9. O cheiro dos gr\xe3os, o aconchego das nossas conversas... e um observador silencioso no balc\xe3o. Nem tubar\xe3o, nem dinossauro. Aquele animal libera o caminho para a mem\xf3ria seguinte.",answer:"ornitorrinco",successMessage:"Sabia que voc\xea n\xe3o esqueceria do nosso c\xfamplice de pel\xfacia."},{id:3,question:"Depois da velocidade na pista, veio a vontade de parar o tempo e eternizar aquele momento. Mas, para isso, nossa m\xe1quina de mem\xf3rias instant\xe2neas se recusou a funcionar, pois nos faltava um item essencial.",answer:"pilha",successMessage:"Isso! A prova de que nem tudo precisa dar certo pra ser perfeito com voc\xea."},{id:4,question:"A noite prometia uma vista do alto da roda gigante, mas o destino (e a centopeia) nos deixou tontos e com uma larica incontrol\xe1vel. A salva\xe7\xe3o veio em fatias, com um formato peculiar.",answer:"quadrada",successMessage:"Nossa especialidade: transformar qualquer imprevisto na melhor mem\xf3ria."},{id:5,question:"O Enigma Final:\n\nA \xfaltima palavra n\xe3o se l\xea, se decifra. A chave est\xe1 na numerologia do nosso come\xe7o.\nVolte \xe0 semente da nossa hist\xf3ria: 14/06.\nDa for\xe7a do dia, retire a for\xe7a do m\xeas que o abra\xe7ou. O que resta desta uni\xe3o te apontar\xe1 o primeiro dia secreto de Julho.\nO segundo dia secreto \xe9 o eco do primeiro; sua imagem dobrada no tempo.\nCom estes dois dias de Julho agora em seu poder, saiba que em cada uma de suas manh\xe3s, uma declara\xe7\xe3o chegou em fragmentos.",answer:"te amo",successMessage:"Perfeito! Voc\xea decifrou o c\xf3digo do nosso amor. Agora prepare-se para a surpresa final..."}],R=["Ainda n\xe3o \xe9 essa a palavra. Tente mergulhar um pouco mais fundo na lembran\xe7a...","Hmm, n\xe3o. Pense nos detalhes, voc\xea \xe9 \xf3tima nisso. Tenho certeza que vai acertar.","Tente outra vez, meu amor. A resposta est\xe1 a\xed, em algum lugar da nossa hist\xf3ria.","Essa palavra n\xe3o abriu a porta, mas cada tentativa me faz lembrar o quanto amo construir essas mem\xf3rias com voc\xea."];(0,r.useEffect)(()=>{if(i)try{const e=document.querySelector('iframe[src*="youtube"]');e&&(e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),e.contentWindow.postMessage('{"event":"command","func":"mute","args":""}',"*"))}catch(u){console.error("Erro ao controlar YouTube:",u)}},[i]),(0,r.useEffect)(()=>{if(i&&t){const e=I.current;e&&e.load()}},[i,t]),(0,r.useEffect)(()=>{if(y&&b)try{var e;const t=null===(e=C.current)||void 0===e?void 0:e.querySelector("iframe");t&&t.contentWindow.postMessage('{"command":"pause"}',"*")}catch(u){console.error("Erro ao pausar Spotify:",u)}else m&&b&&setTimeout(()=>{try{var e;const t=null===(e=C.current)||void 0===e?void 0:e.querySelector("iframe");t&&t.contentWindow.postMessage('{"command":"play"}',"*")}catch(u){console.error("Erro ao retomar Spotify:",u)}},1e3)},[y,m,b]);const D=()=>{const e=A[o];if(l.toLowerCase().trim()===e.answer.toLowerCase().trim())if(f(e.successMessage),h(""),o===A.length-1){E(!0),T(!0);[{time:0,text:"\u2728 Desbloqueando o amor..."},{time:1500,text:"\ud83d\udc95 Carregando mem\xf3rias especiais..."},{time:3e3,text:"\ud83c\udf39 Preparando surpresas..."},{time:4500,text:"\ud83d\udcab Quase l\xe1..."},{time:6e3,text:"\ud83d\udc9d Abrindo o cora\xe7\xe3o..."},{time:7500,text:"\ud83d\udc96 Secret Love ativado!"}].forEach((e,t)=>{setTimeout(()=>{S(t)},e.time)});const e=()=>new Promise(e=>{if(t){const n=document.createElement("video");n.src=t,n.preload="metadata",n.onloadedmetadata=()=>{e()},n.onerror=()=>{e()},setTimeout(e,3e3)}else e()});Promise.all([e(),new Promise(e=>setTimeout(e,7500))]).then(()=>{s(!0),E(!1),T(!1)})}else setTimeout(()=>{a(o+1),c(""),f("")},3e3);else{const e=R[Math.floor(Math.random()*R.length)];h(e),f("")}},O=()=>{w(!0)},P=()=>{w(!1)},j=()=>{w(!1),p(!0),setTimeout(()=>{v(!0),setTimeout(()=>{C.current&&C.current.scrollIntoView({behavior:"smooth",block:"center"})},300)},500)},L=()=>{x(!0),setTimeout(()=>{try{var e;const t=null===(e=C.current)||void 0===e?void 0:e.querySelector("iframe");t&&t.contentWindow.postMessage('{"command":"play"}',"*")}catch(u){console.error("Erro ao iniciar playlist:",u)}},500)};if(_){const e=["\u2728 Desbloqueando o amor...","\ud83d\udc95 Carregando mem\xf3rias especiais...","\ud83c\udf39 Preparando surpresas...","\ud83d\udcab Quase l\xe1...","\ud83d\udc9d Abrindo o cora\xe7\xe3o...","\ud83d\udc96 Secret Love ativado!"];return(0,Um.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",children:(0,Um.jsxs)("div",{className:"bg-gradient-to-br from-pink-500 via-rose-500 to-purple-600 p-8 rounded-3xl shadow-2xl text-center max-w-md mx-4",children:[(0,Um.jsxs)("div",{className:"mb-6",children:[(0,Um.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 bg-white/20 rounded-full flex items-center justify-center animate-pulse",children:(0,Um.jsx)("span",{className:"text-4xl",children:"\ud83d\udc96"})}),(0,Um.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Secret Love"}),(0,Um.jsx)("p",{className:"text-white/90 text-lg animate-fade-in",children:e[k]})]}),(0,Um.jsx)("div",{className:"w-full bg-white/20 rounded-full h-2 mb-4",children:(0,Um.jsx)("div",{className:"bg-white rounded-full h-2 transition-all duration-1000 ease-out",style:{width:(k+1)/e.length*100+"%"}})}),N&&(0,Um.jsx)("div",{className:"text-white/70 text-sm mb-4",children:"Carregando recursos em segundo plano..."}),(0,Um.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[...Array(20)].map((e,t)=>(0,Um.jsx)("div",{className:"absolute text-pink-300 animate-float",style:{left:100*Math.random()+"%",top:100*Math.random()+"%",animationDelay:3*Math.random()+"s",animationDuration:3+2*Math.random()+"s"},children:["\ud83d\udc95","\ud83d\udc96","\ud83d\udc9d","\ud83c\udf39","\u2728"][Math.floor(5*Math.random())]},t))})]})})}return i?(0,Um.jsxs)("div",{className:"flex flex-col gap-5 p-6 h-fit w-full z-10 rounded-2xl bg-gradient-to-br from-pink-500 to-rose-600 animate-fade-in",children:[(0,Um.jsx)("h3",{className:"font-bold text-white text-xl",children:"Secret Love \u2728"}),t&&(0,Um.jsx)("video",{ref:I,controls:!0,src:t,className:"w-full rounded-xl shadow-lg aspect-video",onPlay:O,onPause:P,onEnded:j,children:"Seu navegador n\xe3o suporta o player de v\xeddeo."}),m&&(0,Um.jsxs)("div",{ref:C,className:"w-full rounded-xl shadow-lg transition-all duration-700 ease-out "+(g?"opacity-100 transform translate-y-0":"opacity-0 transform translate-y-8"),children:[(0,Um.jsx)("div",{className:"bg-gradient-to-r from-green-400 to-green-600 p-2 rounded-t-xl",children:(0,Um.jsxs)("div",{className:"flex items-center justify-between text-white text-sm font-semibold",children:[(0,Um.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Um.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),(0,Um.jsx)("span",{children:"\ud83c\udfb5 Playlist Especial"})]}),!b&&(0,Um.jsx)("button",{onClick:L,className:"bg-white/20 hover:bg-white/30 text-white px-3 py-1 rounded-lg text-xs font-medium transition-colors",children:"\u25b6\ufe0f Iniciar Playlist"})]})}),(0,Um.jsx)("iframe",{"data-testid":"embed-iframe",style:{borderRadius:"0 0 12px 12px"},src:"https://open.spotify.com/embed/playlist/5f3kszyKEEZj4YhukoEEus?utm_source=generator",width:"100%",height:"352",frameBorder:"0",allowFullScreen:"",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy"})]}),(0,Um.jsx)("div",{className:"font-semibold text-lg leading-relaxed text-white whitespace-pre-line break-words w-full max-w-3xl",style:{wordBreak:"break-word"},children:n})]}):(0,Um.jsxs)("div",{className:"flex flex-col gap-4 p-6 h-fit w-full z-10 rounded-2xl bg-slate-800/80 border-2 border-dashed border-pink-400 text-center",children:[(0,Um.jsx)(Ym,{className:"w-10 h-10 mx-auto text-pink-400"}),(0,Um.jsx)("h3",{className:"font-bold text-white text-xl",children:"Secret Love"}),(0,Um.jsx)("p",{className:"text-slate-300",children:"Esta \xe1rea cont\xe9m uma surpresa especial e \xe9 protegida por charadas."}),(0,Um.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 mb-4",children:[(0,Um.jsx)("div",{className:"flex items-center justify-center gap-2 mb-3",children:(0,Um.jsxs)("span",{className:"text-pink-400 font-bold",children:["Charada ",o+1," de ",A.length]})}),(0,Um.jsx)("p",{className:"text-white text-sm leading-relaxed whitespace-pre-line mb-4",children:A[o].question})]}),(0,Um.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[(0,Um.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&D(),className:"bg-slate-700 border border-slate-600 rounded-lg p-2 text-white text-center focus:ring-2 focus:ring-pink-500 outline-none",placeholder:"Digite sua resposta"}),(0,Um.jsx)("button",{onClick:D,className:"bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg",children:"Responder"})]}),u&&(0,Um.jsx)("p",{className:"text-red-400 mt-2 text-sm",children:u}),d&&(0,Um.jsx)("div",{className:"mt-2 p-3 bg-green-500/20 border border-green-400/30 rounded-lg",children:(0,Um.jsx)("p",{className:"text-green-400 text-sm",children:d})})]})});function dp(e){var t;let{onCreateMemory:n,onNavigate:i,initialData:s,loadingMemory:o}=e;const[a,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[h,d]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[w,b]=(0,r.useState)(""),[x,_]=(0,r.useState)(!1),[E,k]=(0,r.useState)(""),[S,N]=(0,r.useState)(""),[T,C]=(0,r.useState)(""),[I,A]=(0,r.useState)([]),[D,O]=(0,r.useState)(null),[P,j]=(0,r.useState)([]);(0,r.useEffect)(()=>{s&&(l(s.title||""),u(s.message||""),d(s.musicUrl||""),m(s.musicTitle||""),g(s.musicArtist||""),y(s.coupleNames||""),b(s.startDate||""),_(s.secretLoveEnabled||!1),k(s.secretMessage||""),s.photos&&Array.isArray(s.photos)&&A(s.photos.map(e=>({file:null,url:e,name:e.split("/").pop(),uploaded:!0,progress:100}))),s.secretVideo&&O({file:null,url:s.secretVideo,name:s.secretVideo.split("/").pop(),uploaded:!0,progress:100}))},[s]),(0,r.useEffect)(()=>{!async function(){if(!s)try{const e=Rm(Lm,"memories/photos/"),t=await function(e){return vm(e=R(e))}(e),n=await Promise.all(t.items.map(async e=>{try{return{url:await Am(e),name:e.name,selected:!1}}catch(S){return console.warn("Erro ao carregar imagem do Storage:",S),null}})),r=n.filter(e=>null!==e);j(r)}catch(e){console.warn("Erro ao buscar fotos do Storage:",e)}}()},[s]);const L=e=>{const t=Array.from(e).map(e=>({file:e,url:URL.createObjectURL(e),name:e.name,uploaded:!1,progress:0}));A(e=>[...e,...t].slice(0,10))},M=e=>{O({file:e,url:URL.createObjectURL(e),name:e.name,uploaded:!1,progress:0})},U=()=>{O(null)},F=e=>{O({file:e,url:URL.createObjectURL(e),name:e.name,uploaded:!1,progress:0})};function V(e,t){const n=new Date;return`${e}_${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}_${String(n.getHours()).padStart(2,"0")}-${String(n.getMinutes()).padStart(2,"0")}-${String(n.getSeconds()).padStart(2,"0")}-${String(n.getMilliseconds()).padStart(3,"0")}_${t.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-zA-Z0-9.\-_]/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"")}`}const z=async()=>{if(D&&!D.uploaded){C("");try{const e=V("video",D.name),t=Rm(Lm,`memories/secret_videos/${e}`),n=await Im(t,D.file),r=await Am(n.ref);O(t=>({...t,url:r,uploaded:!0,progress:100,name:e}))}catch(S){console.error("Erro no upload do v\xeddeo:",S),C(`Erro ao enviar v\xeddeo: ${S.message}`)}}},B=I.some(e=>!e.uploaded)||D&&!D.uploaded,q=B||o;return(0,Um.jsxs)("div",{className:"p-4 md:p-8 max-w-3xl mx-auto w-full bg-slate-800 text-white rounded-2xl shadow-xl",children:[(0,Um.jsx)(zm,{error:S,uploadError:T,loading:q}),(0,Um.jsx)("button",{onClick:()=>i("home"),className:"mb-6 text-emerald-400 hover:text-emerald-300",disabled:q,children:"\u2190 Voltar"}),(0,Um.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"Configure sua mem\xf3ria"}),S&&(0,Um.jsx)("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-lg mb-4",children:S}),T&&(0,Um.jsx)("div",{className:"bg-red-500/20 text-red-300 p-3 rounded-lg mb-4",children:T}),(0,Um.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!a||!c||!w||!v||!f||!p)return void N("Todos os campos principais s\xe3o obrigat\xf3rios.");if(x&&(!E||!D||!D.uploaded))return void N('Para a se\xe7\xe3o "Secret Love", a mensagem secreta e o v\xeddeo s\xe3o obrigat\xf3rios.');N("");const t=P.filter(e=>e.selected).map(e=>e.url);n({title:a,message:c,musicUrl:h,musicTitle:f,musicArtist:p,coupleNames:v,startDate:w,photos:[...I.filter(e=>e.uploaded).map(e=>e.url),...t],secretLoveEnabled:x,secretVideo:D&&D.uploaded?D.url:null,secretMessage:E})},className:"space-y-4",children:[(0,Um.jsx)("input",{type:"text",value:a,onChange:e=>l(e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"T\xedtulo da mem\xf3ria (Ex: Nosso Primeiro Ano)"}),(0,Um.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Nomes do Casal (Ex: Marcelo e Sofia)"}),(0,Um.jsxs)("div",{children:[(0,Um.jsx)("label",{className:"text-sm text-slate-400",children:"Data e hora do primeiro encontro"}),(0,Um.jsx)("input",{type:"datetime-local",value:w,onChange:e=>b(e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-emerald-500 outline-none"}),(0,Um.jsx)("div",{className:"text-xs text-slate-400 mt-1",children:"O formato se adapta ao seu sistema (12h ou 24h)."})]}),(0,Um.jsx)("input",{type:"text",value:f,onChange:e=>m(e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Nome da M\xfasica"}),(0,Um.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Artista da M\xfasica"}),(0,Um.jsxs)("div",{children:[(0,Um.jsx)("input",{type:"text",value:h,onChange:e=>d(e.target.value),className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"C\xf3digo de incorpora\xe7\xe3o do YouTube ou link do Spotify"}),(0,Um.jsxs)("div",{className:"text-xs text-slate-400 mt-1",children:[(0,Um.jsx)("strong",{children:"Para YouTube:"})," Cole o c\xf3digo de incorpora\xe7\xe3o completo (iframe) do YouTube.",(0,Um.jsx)("br",{}),'Para obter: Clique em "Compartilhar" \u2192 "Incorporar" \u2192 Copie o c\xf3digo iframe.',(0,Um.jsx)("br",{}),(0,Um.jsx)("strong",{children:"Para Spotify:"})," Cole o link direto da m\xfasica/playlist."]})]}),(0,Um.jsx)(Fm,{photos:I,setPhotos:A,availableStoragePhotos:P,setAvailableStoragePhotos:j,handlePhotoSelection:L,handleRemovePhoto:e=>{A(t=>t.filter((t,n)=>n!==e))},handleReplacePhoto:(e,t)=>{A(n=>n.map((n,r)=>r===t?{file:e,url:URL.createObjectURL(e),name:e.name,uploaded:!1,progress:0}:n))},handleUploadPhotos:async()=>{C("");try{const e=await Promise.all(I.map(async(e,t)=>{if(e.uploaded)return e;const n=V("foto",e.name),r=Rm(Lm,`memories/photos/${n}`),i=await Im(r,e.file),s=await Am(i.ref);return{...e,url:s,uploaded:!0,progress:100,name:n}}));A(e)}catch(S){console.error("Erro no upload:",S),C(`Erro ao enviar fotos: ${S.message}`)}},isUploading:q}),(0,Um.jsx)(Vm,{video:D,handleVideoSelection:M,handleRemoveVideo:U,handleReplaceVideo:F,handleUploadVideo:z,isUploading:q}),(0,Um.jsx)("div",{children:(0,Um.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),rows:5,style:{minHeight:100,resize:"vertical"},className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-emerald-500 outline-none",placeholder:"Sua Mensagem Especial (p\xfablica)..."})}),(0,Um.jsxs)("div",{className:"border-t-2 border-dashed border-slate-600 pt-4 mt-6",children:[(0,Um.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,Um.jsx)("input",{type:"checkbox",checked:x,onChange:()=>_(!x),className:"w-5 h-5 text-pink-500 bg-slate-600 border-slate-500 rounded focus:ring-pink-500"}),(0,Um.jsx)("span",{className:"text-lg font-semibold text-pink-400",children:'Ativar "Secret Love"'})]}),x&&(0,Um.jsxs)("div",{className:"mt-4 space-y-4 p-4 bg-slate-900/50 rounded-lg",children:[(0,Um.jsx)("h3",{className:"text-md font-bold text-pink-300",children:"Conte\xfado Secreto"}),(0,Um.jsx)("textarea",{value:E,onChange:e=>k(e.target.value),rows:5,style:{minHeight:100,resize:"vertical"},className:"w-full bg-slate-700 border border-slate-600 rounded-lg p-3 focus:ring-2 focus:ring-pink-500 outline-none",placeholder:"Escreva a sua grande mensagem secreta aqui..."}),(0,Um.jsxs)("div",{children:[(0,Um.jsx)("label",{className:"text-sm text-slate-400",children:"V\xeddeo Secreto"}),(0,Um.jsx)("input",{type:"file",onChange:e=>M(e.target.files[0]),accept:"video/mp4,video/webm,video/ogg",className:"w-full text-slate-400 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-pink-500 file:text-white hover:file:bg-pink-600 cursor-pointer"}),(0,Um.jsx)("div",{className:"text-xs text-slate-400 mt-1",children:"Formatos aceitos: MP4, WEBM, OGG. M\xe1ximo 50MB."}),D&&(0,Um.jsxs)("div",{className:"flex flex-col items-center gap-2 mt-2 bg-slate-700 rounded-lg p-2 w-56",children:[(0,Um.jsx)("video",{src:D.url,controls:!0,className:"w-40 h-24 rounded bg-slate-900"}),(0,Um.jsx)("div",{className:"text-xs text-slate-200 truncate w-full text-center",children:D.name}),(0,Um.jsxs)("div",{className:"text-xs text-slate-400",children:[((null===(t=D.file)||void 0===t?void 0:t.size)/1024/1024).toFixed(2),"MB"]}),(0,Um.jsx)("div",{className:"w-full h-2 bg-slate-600 rounded mt-1",children:(0,Um.jsx)("div",{className:"h-2 bg-pink-400 rounded",style:{width:`${D.progress}%`}})}),(0,Um.jsxs)("div",{className:"flex gap-1 mt-1",children:[(0,Um.jsxs)("label",{className:"text-xs text-blue-400 cursor-pointer",children:[(0,Um.jsx)("input",{type:"file",style:{display:"none"},accept:"video/mp4,video/webm,video/ogg",onChange:e=>F(e.target.files[0])}),"Substituir"]}),(0,Um.jsx)("button",{type:"button",onClick:U,className:"text-xs text-red-400 ml-2",children:"Remover"})]})]}),D&&!D.uploaded&&(0,Um.jsx)("button",{type:"button",onClick:z,className:"bg-pink-500 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded-lg mt-2",children:"Enviar v\xeddeo"})]})]})]}),s&&(0,Um.jsx)("button",{type:"submit",disabled:q,className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg transition-transform transform hover:scale-101 mt-4",children:"Salvar altera\xe7\xf5es"}),!s&&(0,Um.jsx)("button",{type:"submit",disabled:q,className:"w-full bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-6 rounded-full text-lg shadow-lg transition-transform transform hover:scale-101 mt-4",children:"Criar mem\xf3ria"})]})]})}const fp=r.memo(e=>{let{memory:t,onExit:n,isCreator:i,onEditMemory:s,onDeleteMemory:o}=e;const{title:a,message:l,musicUrl:c,musicTitle:u,musicArtist:h,coupleNames:d,startDate:f,photos:m,secretLoveEnabled:p,secretVideoUrl:g,secretMessage:v,secretVideo:y}=t,w=m&&m.length>0?m[0]:null,b=(e=>{if(!e)return null;try{let t=e.match(/<iframe[^>]*src="([^"]*youtube\.com\/embed\/[^"]*)"[^>]*>/i);if(t&&t[1]){let e=t[1];return e.includes("enablejsapi=1")||(e+=(e.includes("?")?"&":"?")+"enablejsapi=1"),e.includes("autoplay=1")||(e+=(e.includes("?")?"&":"?")+"autoplay=1"),e}let n=e.match(/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/|v\/|)([\w-]{11})(?:\S+)?/);if(n&&n[1])return`https://www.youtube.com/embed/${n[1]}?enablejsapi=1&autoplay=1`;let r=e.match(/(?:https?:\/\/)?open\.spotify\.com\/(track|album|playlist)\/([a-zA-Z0-9]+)/);return r?`https://open.spotify.com/embed/${r[1]}/${r[2]}`:null}catch(t){return console.error("Erro ao processar input:",t),null}})(c),[x,_]=(0,r.useState)(!0),[E,k]=(0,r.useState)({x:"right",y:"bottom"}),[S,N]=(0,r.useState)(!1),[T,C]=(0,r.useState)({x:0,y:0}),[I,A]=(0,r.useState)(!1),[R,D]=(0,r.useState)(0),[O,P]=(0,r.useState)(0),j=(0,r.useRef)(null),L=e=>{if("https://www.youtube.com"===e.origin)try{const t=JSON.parse(e.data);if("onStateChange"===t.event)A(1===t.info),0===t.info&&D(0);else if("onReady"===t.event){const e=document.querySelector('iframe[src*="youtube"]');e&&e.contentWindow.postMessage('{"event":"command","func":"getDuration","args":""}',"*")}else"infoDelivery"===t.event&&t.info&&t.info.duration&&P(t.info.duration)}catch(t){console.error("Erro ao processar mensagem do YouTube:",t)}};return(0,r.useEffect)(()=>{const e=setInterval(()=>{I&&R<O&&D(e=>Math.min(e+1,O))},1e3);return window.addEventListener("message",L),()=>{window.removeEventListener("message",L),clearInterval(e)}},[I,R,O]),(0,Um.jsx)("div",{className:"w-full h-screen overflow-y-auto",style:{backgroundImage:"linear-gradient(rgb(71, 98, 125) 0%, rgb(71, 98, 125) 45%, rgb(49, 68, 87) 65%, rgb(18, 18, 18) 85%)",backgroundColor:"rgb(18, 18, 18)",color:"white"},children:(0,Um.jsxs)("div",{className:"flex flex-col w-full h-full gap-5 px-6",children:[(0,Um.jsxs)("div",{className:"flex w-full items-center h-fit pt-4 justify-between text-white",children:[(0,Um.jsxs)("button",{onClick:n,className:"flex items-center gap-2 hover:bg-white/10 p-2 rounded-lg transition-colors",children:[(0,Um.jsx)(Km,{className:"w-7 h-7"}),(0,Um.jsx)("span",{className:"text-sm",children:"Voltar"})]}),(0,Um.jsx)("span",{className:"font-semibold",children:a}),(0,Um.jsx)("div",{className:"flex items-center gap-2",children:(0,Um.jsx)("button",{className:"hover:bg-white/10 p-2 rounded-lg transition-colors",children:(0,Um.jsx)(Gm,{className:"w-7 h-7"})})})]}),(0,Um.jsxs)("div",{className:"flex w-full flex-col flex-grow gap-4",children:[(0,Um.jsx)("div",{className:"flex w-full justify-center items-center px-9",children:w?(0,Um.jsx)("img",{src:w,alt:"Capa da mem\xf3ria",className:"w-full max-w-sm aspect-square object-cover rounded-lg shadow-2xl transform hover:scale-105 transition-all duration-500 animate-fade-in",style:{animation:"fadeIn 1s ease-out, float 3s ease-in-out infinite"},onError:e=>{console.warn("Erro ao carregar capa da mem\xf3ria:",w),e.target.style.display="none"}}):(0,Um.jsxs)("div",{className:"w-full max-w-sm aspect-square bg-slate-700 rounded-lg flex flex-col items-center justify-center text-slate-400 animate-pulse",children:[(0,Um.jsx)(Qm,{className:"w-12 h-12"}),(0,Um.jsx)("p",{className:"mt-2",children:"Nenhuma foto adicionada"})]})}),(0,Um.jsxs)("div",{className:"flex flex-col w-full h-fit gap-2 animate-fade-in-up",children:[(0,Um.jsx)("div",{className:"flex w-full justify-between items-center h-fit",children:(0,Um.jsxs)("div",{className:"flex flex-col w-[80%] overflow-hidden",children:[(0,Um.jsx)("h3",{className:"text-white font-extrabold text-2xl scrolling-text-container animate-heartbeat",children:(0,Um.jsxs)("span",{className:"scrolling-text",children:[u,"\xa0\xa0\xa0\xa0\xa0\xa0"]})}),(0,Um.jsx)("span",{className:"text-slate-300 font-light animate-fade-in",style:{animationDelay:"0.5s"},children:h})]})}),(0,Um.jsxs)("div",{className:"flex w-full h-1.5 rounded-lg bg-white/25 relative items-center cursor-pointer",onClick:e=>{const t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width*O,r=document.querySelector('iframe[src*="youtube"]');r&&r.contentWindow.postMessage(`{"event":"command","func":"seekTo","args":[${n}]}`,"*")},children:[(0,Um.jsx)("div",{className:"absolute left-0 top-0 bg-white rounded-l-lg h-full transition-all duration-100",style:{width:(O>0?R/O*100:0)+"%"}}),(0,Um.jsx)("div",{className:"absolute h-3 w-3 rounded-full bg-white z-10 transition-all duration-100",style:{left:(O>0?R/O*100:0)+"%",transform:"translateX(-50%)"}})]}),(0,Um.jsxs)("div",{className:"flex w-full h-fit justify-between text-xs text-slate-300",children:[(0,Um.jsx)("p",{children:ep(R)}),(0,Um.jsx)("p",{children:ep(O)})]})]}),(0,Um.jsxs)("div",{className:"flex justify-between items-center h-fit text-white animate-fade-in-up",style:{animationDelay:"0.3s"},children:[(0,Um.jsx)(Hm,{className:"w-6 h-6 sm:w-7 sm:h-7 text-emerald-400 cursor-pointer hover:scale-110 transition-transform animate-glow"}),(0,Um.jsxs)("div",{className:"flex flex-row h-fit items-center justify-center gap-6 sm:gap-8",children:[(0,Um.jsx)(qm,{className:"w-7 h-7 sm:w-8 sm:h-8 cursor-pointer hover:scale-110 transition-transform",onClick:()=>{const e=document.querySelector('iframe[src*="youtube"]');e&&e.contentWindow.postMessage('{"event":"command","func":"seekTo","args":[Math.max(0, currentTime - 10)]}',"*")}}),(0,Um.jsx)("div",{className:"flex p-0 items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-full bg-white text-black cursor-pointer hover:scale-105 transition-transform animate-heartbeat",onClick:()=>{const e=document.querySelector('iframe[src*="youtube"]');e&&(I?(e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),A(!1)):(e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"),A(!0)))},children:I?(0,Um.jsxs)("svg",{className:"w-8 h-8 sm:w-10 sm:h-10",viewBox:"0 0 24 24",fill:"currentColor",children:[(0,Um.jsx)("rect",{x:"6",y:"4",width:"4",height:"16"}),(0,Um.jsx)("rect",{x:"14",y:"4",width:"4",height:"16"})]}):(0,Um.jsx)(Bm,{className:"w-8 h-8 sm:w-10 sm:h-10"})}),(0,Um.jsx)($m,{className:"w-7 h-7 sm:w-8 sm:h-8 cursor-pointer hover:scale-110 transition-transform",onClick:()=>{const e=document.querySelector('iframe[src*="youtube"]');e&&e.contentWindow.postMessage('{"event":"command","func":"seekTo","args":[Math.min(duration, currentTime + 10)]}',"*")}})]}),(0,Um.jsx)(Wm,{className:"w-6 h-6 sm:w-7 sm:h-7 cursor-pointer hover:scale-110 transition-transform animate-glow"})]}),b&&x&&(0,Um.jsx)("div",{ref:j,className:"fixed z-30 cursor-move",style:{width:"280px",height:"157px",bottom:"bottom"===E.y?"16px":"auto",top:"top"===E.y?"16px":"auto",right:"right"===E.x?"16px":"auto",left:"left"===E.x?"16px":"auto",transform:S?"scale(1.05)":"scale(1)",transition:S?"none":"all 0.2s ease"},onMouseDown:e=>{if("IFRAME"===e.target.tagName)return;N(!0);const t=e.currentTarget.getBoundingClientRect();C({x:e.clientX-t.left,y:e.clientY-t.top})},onMouseMove:e=>{if(!S)return;e.preventDefault();e.currentTarget.getBoundingClientRect();const t=e.clientX-T.x,n=e.clientY-T.y,r=window.innerWidth,i=window.innerHeight;k(t<r/2?e=>({...e,x:"left"}):e=>({...e,x:"right"})),k(n<i/2?e=>({...e,y:"top"}):e=>({...e,y:"bottom"}))},onMouseUp:()=>{N(!1)},onMouseLeave:()=>{N(!1)},children:(0,Um.jsxs)("div",{className:"relative w-full h-full",children:[(0,Um.jsx)("iframe",{src:b,style:{width:"100%",height:"100%",border:0,borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",pointerEvents:S?"none":"auto"},allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Embedded Music Player",onLoad:()=>{const e=document.querySelector('iframe[src*="youtube"]');e&&e.contentWindow.postMessage('{"event":"listening"}',"*")}}),(0,Um.jsx)("button",{onClick:()=>_(!1),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold transition-colors z-10",title:"Minimizar player",children:"\xd7"})]})}),b&&!x&&(0,Um.jsx)("button",{onClick:()=>_(!0),className:"fixed bottom-4 right-4 z-30 bg-red-500 hover:bg-red-600 text-white rounded-full w-12 h-12 flex items-center justify-center text-lg font-bold transition-colors shadow-lg",title:"Restaurar player",children:"\u25b6\ufe0f"})]}),(0,Um.jsx)("div",{className:"flex flex-col gap-6 h-fit w-full mt-4",children:(0,Um.jsx)("div",{className:"flex flex-col bg-[#332f2f] h-fit w-full z-10 rounded-2xl",children:(0,Um.jsxs)("div",{className:"flex flex-col gap-4 p-4 w-full",children:[(0,Um.jsxs)("div",{className:"flex flex-col text-white",children:[(0,Um.jsx)("span",{className:"font-black text-2xl",children:d}),(0,Um.jsxs)("span",{className:"font-extralight text-base text-slate-300",children:["Juntos desde ",new Date(f).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})]})]}),(0,Um.jsx)(np,{startDate:f}),(0,Um.jsx)(op,{memory:t})]})})}),(0,Um.jsx)("div",{className:"flex w-full h-fit items-center justify-center mb-4",children:(0,Um.jsxs)("div",{className:"flex gap-5 p-6 flex-col h-fit w-full z-10 rounded-2xl",style:{backgroundColor:"rgb(228, 44, 20)"},children:[(0,Um.jsx)("span",{className:"font-bold text-white text-xl",children:"Mensagem especial"}),(0,Um.jsx)("div",{className:"font-bold text-2xl leading-9 text-white whitespace-pre-line break-words w-full max-w-3xl",style:{wordBreak:"break-word"},children:l})]})}),m&&m.length>1&&(0,Um.jsx)("div",{className:"flex flex-col gap-5 w-full items-center mb-4",children:m.slice(1).map((e,t)=>(0,Um.jsx)("img",{src:e,alt:`Foto da mem\xf3ria ${t+2}`,className:"w-full max-w-3xl h-auto rounded-2xl shadow-lg"},t))}),p&&(0,Um.jsx)("div",{className:"flex w-full h-fit items-center justify-center mb-4",children:(0,Um.jsx)(hp,{videoUrl:y||g,secretMessage:v})}),(0,Um.jsx)(cp,{memoryId:t.id,isAdmin:i}),(0,Um.jsx)("div",{className:"flex w-full h-fit items-center justify-center mb-6",children:(0,Um.jsx)("div",{className:"w-full h-48 bg-gradient-to-br from-pink-500 via-red-500 to-purple-600 rounded-2xl flex items-center justify-center text-white text-center p-8",children:(0,Um.jsx)("div",{className:"text-2xl font-bold",children:"Para a melhor coisa que me aconteceu \u2764\ufe0f"})})}),i&&(0,Um.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,Um.jsx)("button",{onClick:()=>s(t.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg",children:"Editar"}),(0,Um.jsx)("button",{onClick:()=>o(t.id),className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg",children:"Apagar"})]})]})})});function mp(){(0,r.useEffect)(()=>{localStorage.getItem("app_version")!==Mm&&(localStorage.setItem("app_version",Mm),1)&&("serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(e){for(let t of e)t.unregister()}),window.location.reload(!0))},[]);const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)(()=>localStorage.getItem("visitorName")||""),[a,l]=(0,r.useState)(()=>localStorage.getItem("visitorSurname")||""),[c,u]=(0,r.useState)(()=>localStorage.getItem("visitorStep")||"ask"),[h,d]=(0,r.useState)(()=>localStorage.getItem("visitorMsg")||""),[f,m]=(0,r.useState)("home"),[p,g]=(0,r.useState)({}),[v,y]=(0,r.useState)(null),[w,b]=(0,r.useState)(!0),[x,_]=(0,r.useState)(null),[E,k]=(0,r.useState)(!1),[S,N]=(0,r.useState)(null),[T,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{localStorage.setItem("visitorName",s)},[s]),(0,r.useEffect)(()=>{localStorage.setItem("visitorSurname",a)},[a]),(0,r.useEffect)(()=>{localStorage.setItem("visitorStep",c)},[c]),(0,r.useEffect)(()=>{localStorage.setItem("visitorMsg",h)},[h]),(0,r.useEffect)(()=>{const e=Pm.onAuthStateChanged(e=>{e&&"marcelop.smile@gmail.com"===e.email?(t(!0),i(e),m("home")):(t(!1),i(e))});return()=>e()},[]),(0,r.useEffect)(()=>{B()},[]),(0,r.useEffect)(()=>{console.log("\ud83d\udd0d App: Configurando listener em tempo real");const e=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=R(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Xh(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Xh(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Wh)h=zh(e.firestore,Jh),d=Go(e._key.path),u={next:t=>{n[l]&&n[l](sf(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=zh(e,Hh);h=zh(t.firestore,Jh),d=t._query;const r=new Jd(h);u={next:e=>{n[l]&&n[l](new Yd(h,r,t,e))},error:n[l+1],complete:n[l+2]},Rd(e._query)}return function(e,t,n,r){const i=new Nh(r),s=new Gu(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>zu(await Oh(e),s)),()=>{i.Za(),e.asyncQueue.enqueueAndForget(async()=>Bu(await Oh(e),s))}}(Zh(h),d,c,u)}(Pd(Gh(jm,"memorias"),Fd("createdAt","desc"),zd(1)),e=>{console.log("\ud83d\udd0d App: Listener detectou mudan\xe7a no Firestore");let t={},n=null;e.forEach(e=>{const r=e.data();console.log("\ud83d\udd0d App: Dados atualizados da mem\xf3ria:",r),console.log("\ud83d\udd0d App: datingStartDate atualizado:",r.datingStartDate),t[e.id]={id:e.id,...r},n=e.id}),console.log("\ud83d\udd0d App: Mem\xf3rias atualizadas via listener:",t),console.log("\ud83d\udd0d App: \xdaltimo ID:",n),g(t),n&&(y(n),console.log("\u2705 App: currentMemoryId atualizado via listener:",n)),console.log("\u2705 App: Listener sincronizou dados em tempo real")},e=>{console.error("\u274c App: Erro no listener em tempo real:",e)});return()=>{console.log("\ud83d\udd0d App: Removendo listener em tempo real"),e()}},[]),(0,r.useEffect)(()=>{const e=p[v];e&&(console.log("\ud83d\udd0d App: Mem\xf3ria atual mudou:",e),console.log("\ud83d\udd0d App: datingStartDate:",e.datingStartDate))},[p,v]);const I=(0,r.useMemo)(()=>{const e=Object.keys(p);if(0===e.length)return null;const t=e.sort((e,t)=>{const n=p[e],r=p[t],i=new Date(n.createdAt||0);return new Date(r.createdAt||0)-i});return t[0]},[p]),A=()=>I,D=async()=>{const e=new Wn;e.setCustomParameters({prompt:"select_account"});try{await Or(Pm,e)}catch(t){if(console.error("Erro ao fazer login com Google:",t),"auth/popup-blocked"===t.code)alert("O popup de login foi bloqueado pelo navegador. Por favor, permita popups para este site.");else if("auth/popup-closed-by-user"===t.code)alert("O popup de login foi fechado. Tente novamente.");else{if("auth/cancelled-popup-request"===t.code)return;alert("Erro ao fazer login com Google. Tente novamente.")}}},O=async()=>{await function(e){return R(e).signOut()}(Pm),t(!1),i(null),u("ask"),d(""),m("home"),y(null),localStorage.removeItem("visitorName"),localStorage.removeItem("visitorSurname"),localStorage.removeItem("visitorStep"),localStorage.removeItem("visitorMsg")},P=e=>{if(e.preventDefault(),!s||!a)return;let t="";t="sofia"===s.trim().toLowerCase()&&"miketem"===a.trim().toLowerCase()?"Oi minha gatinha, bem vinda \xe0 nossa retrospectiva.":"miketem"===a.trim().toLowerCase()?`Bem-vindo(a) ${s} ${a}, \xe9 um prazer receber a fam\xedlia!`:`Bem-vindo(a) ${s}! Obrigado pela visita. Aqui est\xe3o minhas mem\xf3rias com a Sofi.`,d(t),u("showMsg"),setTimeout(()=>u("showMemory"),2e3)};(0,r.useEffect)(()=>{if(n&&!e){const[e,...t]=(n.displayName||"").split(" "),r=t.join(" ");let i="";i=e&&r&&"sofia"===e.toLowerCase()&&"miketem"===r.toLowerCase()?"Oi minha gatinha, bem vinda \xe0 nossa retrospectiva.":r&&"miketem"===r.toLowerCase()?`Bem-vindo(a) ${e} ${r}, \xe9 um prazer receber a fam\xedlia!`:e?`Bem-vindo(a) ${e}! Obrigado pela visita. Aqui est\xe3o minhas mem\xf3rias com a Sofi.`:"Bem-vindo(a)! Obrigado pela visita. Aqui est\xe3o minhas mem\xf3rias com a Sofi.",d(i),u("showMsg"),setTimeout(()=>u("showMemory"),2e3)}},[n,e]),(0,r.useEffect)(()=>{e&&C(null)},[e]);const j=e=>{_({...e,createdAt:(new Date).toISOString()}),m("preview")},L=async()=>{if(!x)return;const e=await nf(Gh(jm,"memorias"),x);g({[e.id]:{...x,id:e.id}}),y(e.id),_(null),m("memory")},M=()=>{m("form")},U=async e=>{await tf(Qh(jm,"memorias",e)),g({}),y(null),m("home")},F=()=>{y(null),e?m("home"):u("ask")},V=()=>{k(!0),m("edit")},z=async e=>{v&&(await(async(e,t)=>{const n=Qh(jm,"memorias",e);await ef(n,t),g(n=>({...n,[e]:{...n[e],...t}}))})(v,e),_({...e,id:v}),k(!1),m("preview"),C(null))},B=async()=>{b(!0);try{console.log("\ud83d\udd0d fetchLatestMemory: Iniciando busca da mem\xf3ria mais recente");const e=Pd(Gh(jm,"memorias"),Fd("createdAt","desc"),zd(1)),t=await Zd(e);let n={},r=null;t.forEach(e=>{const t=e.data();console.log("\ud83d\udd0d fetchLatestMemory: Dados da mem\xf3ria encontrada:",t),console.log("\ud83d\udd0d fetchLatestMemory: datingStartDate:",t.datingStartDate),n[e.id]={id:e.id,...t},r=e.id}),console.log("\ud83d\udd0d fetchLatestMemory: Mem\xf3rias carregadas:",n),console.log("\ud83d\udd0d fetchLatestMemory: \xdaltimo ID:",r),g(n),r&&(y(r),console.log("\u2705 fetchLatestMemory: currentMemoryId definido como:",r)),console.log("\u2705 fetchLatestMemory: Carregamento conclu\xeddo")}catch(e){console.error("\u274c fetchLatestMemory: Erro ao recarregar mem\xf3ria:",e)}finally{b(!1)}},q=async()=>{try{if(0===Object.keys(p).length)return void alert("Nenhuma mem\xf3ria encontrada. Crie uma mem\xf3ria primeiro.");const e=A(),t=Qh(jm,"memorias",e),n=new Date;console.log("\ud83d\udd0d Ativando cron\xf4metro de namoro para mem\xf3ria:",e),console.log("\ud83d\udd0d Data atual:",n.toISOString()),g(t=>{const r={...t,[e]:{...t[e],datingStartDate:n.toISOString()}};return console.log("\u2705 Estado local atualizado imediatamente:",r),r}),console.log("\u2705 Estado local atualizado imediatamente"),setTimeout(()=>{console.log("\ud83d\udd04 For\xe7ando re-render do componente"),g(e=>({...e}))},100),await ef(t,{datingStartDate:n.toISOString()}),console.log("\u2705 Cron\xf4metro ativado no Firestore"),alert("\u2705 Cron\xf4metro de namoro ativado com sucesso! O tempo come\xe7ar\xe1 a contar a partir de agora."),C(null),console.log("\u2705 Listener em tempo real vai sincronizar para todos os usu\xe1rios")}catch(e){console.error("\u274c Erro ao ativar cron\xf4metro de namoro:",e),alert("Erro ao ativar cron\xf4metro de namoro. Tente novamente.");const t=A();g(e=>({...e,[t]:{...e[t],datingStartDate:null}}))}},$=async()=>{try{if(0===Object.keys(p).length)return void alert("Nenhuma mem\xf3ria encontrada.");const e=A(),t=Qh(jm,"memorias",e);console.log("\ud83d\udd0d Resetando cron\xf4metro de namoro para mem\xf3ria:",e),g(t=>({...t,[e]:{...t[e],datingStartDate:null}})),console.log("\u2705 Estado local atualizado imediatamente"),await ef(t,{datingStartDate:null}),console.log("\u2705 Cron\xf4metro resetado no Firestore"),alert("\u2705 Cron\xf4metro de namoro resetado com sucesso!"),C(null),m("home"),console.log("\u2705 Listener em tempo real vai sincronizar para todos os usu\xe1rios")}catch(e){console.error("\u274c Erro ao resetar cron\xf4metro de namoro:",e),alert("Erro ao resetar cron\xf4metro de namoro. Tente novamente.");const t=A();g(e=>{var n;return{...e,[t]:{...e[t],datingStartDate:(null===(n=e[t])||void 0===n?void 0:n.datingStartDate)||null}}})}},H=e=>{let{onNavigate:t}=e;const n=Object.keys(p).length>0,r=A(),i=n?p[r]:null,s=i&&i.datingStartDate;return(0,Um.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white gap-6 p-6",children:(0,Um.jsxs)("div",{className:"bg-slate-800 p-8 rounded-2xl shadow-xl w-full max-w-md text-center",children:[(0,Um.jsx)("h2",{className:"text-3xl font-bold mb-6 text-pink-400",children:"\ud83d\udc8d Ela falou sim!"}),n?s?(0,Um.jsxs)("div",{className:"space-y-4",children:[(0,Um.jsxs)("div",{className:"bg-green-500/20 border border-green-500/30 rounded-xl p-4",children:[(0,Um.jsx)("p",{className:"text-green-300 font-semibold",children:"\u2705 Cron\xf4metro j\xe1 ativado!"}),(0,Um.jsxs)("p",{className:"text-green-200 text-sm mt-2",children:["Ativado em: ",new Date(i.datingStartDate).toLocaleString("pt-BR")]})]}),(0,Um.jsx)("p",{className:"text-slate-300",children:'O cron\xf4metro de namoro j\xe1 est\xe1 ativo e contando o tempo desde que ela disse "sim"!'}),(0,Um.jsxs)("div",{className:"bg-red-500/20 border border-red-500/30 rounded-xl p-4",children:[(0,Um.jsx)("p",{className:"text-red-300 font-semibold",children:"\u26a0\ufe0f Resetar Cron\xf4metro"}),(0,Um.jsx)("p",{className:"text-red-200 text-sm mt-1",children:"Clique no bot\xe3o abaixo para resetar o cron\xf4metro e voltar ao estado inicial."})]}),(0,Um.jsx)("button",{onClick:$,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-6 rounded-lg transition-colors w-full",children:"\ud83d\udd04 Resetar Cron\xf4metro de Namoro"})]}):(0,Um.jsxs)("div",{className:"space-y-4",children:[(0,Um.jsx)("p",{className:"text-slate-300",children:"Tem certeza que quer ativar o cron\xf4metro de namoro?"}),(0,Um.jsx)("p",{className:"text-slate-400 text-sm",children:"Isso ir\xe1 definir o momento atual como o in\xedcio do namoro e o cron\xf4metro come\xe7ar\xe1 a contar a partir de agora."}),(0,Um.jsxs)("div",{className:"bg-yellow-500/20 border border-yellow-500/30 rounded-xl p-4",children:[(0,Um.jsx)("p",{className:"text-yellow-300 font-semibold",children:"\u26a0\ufe0f A\xe7\xe3o irrevers\xedvel"}),(0,Um.jsx)("p",{className:"text-yellow-200 text-sm mt-1",children:"Uma vez ativado, o cron\xf4metro n\xe3o pode ser desativado."})]}),(0,Um.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Um.jsx)("button",{onClick:t,className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 px-6 rounded-lg transition-colors flex-1",children:"Cancelar"}),(0,Um.jsxs)("button",{onClick:q,className:"bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white font-bold py-3 px-6 rounded-lg transition-colors flex-1 flex items-center justify-center gap-2",children:[(0,Um.jsx)("span",{className:"text-xl",children:"\ud83d\udc8d"}),"Ativar!"]})]})]}):(0,Um.jsxs)("div",{className:"space-y-4",children:[(0,Um.jsx)("p",{className:"text-slate-300",children:"Nenhuma mem\xf3ria encontrada."}),(0,Um.jsx)("p",{className:"text-slate-400 text-sm",children:"Crie uma mem\xf3ria primeiro para ativar o cron\xf4metro de namoro."}),(0,Um.jsx)("button",{onClick:()=>C("new"),className:"bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Criar Nova Mem\xf3ria"})]})]})})};if(!e&&!n){if("ask"===c)return(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsx)("span",{className:"text-white text-sm",children:"Visitante"}),(0,Um.jsxs)("button",{onClick:()=>{u("ask"),d(""),m("home"),y(null)},className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Voltar ao in\xedcio",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"In\xedcio"]})]}),(0,Um.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white",children:(0,Um.jsxs)("div",{className:"bg-slate-800 p-8 rounded-2xl shadow-xl w-full max-w-md flex flex-col gap-4",children:[(0,Um.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Um.jsx)("h2",{className:"text-2xl font-bold",children:"Quem est\xe1 acessando?"}),(0,Um.jsx)("button",{onClick:()=>{o(""),l(""),d(""),m("home"),y(null)},className:"text-slate-400 hover:text-white transition-colors",title:"Limpar e voltar",children:(0,Um.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Um.jsxs)("form",{onSubmit:P,className:"flex flex-col gap-3",children:[(0,Um.jsx)("input",{type:"text",placeholder:"Nome",value:s,onChange:e=>o(e.target.value),className:"bg-slate-700 border border-slate-600 rounded-lg p-3 text-white"}),(0,Um.jsx)("input",{type:"text",placeholder:"Sobrenome",value:a,onChange:e=>l(e.target.value),className:"bg-slate-700 border border-slate-600 rounded-lg p-3 text-white"}),(0,Um.jsx)("button",{type:"submit",className:"bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg",children:"Acessar"})]}),(0,Um.jsx)("div",{className:"mt-4 text-center text-slate-400 text-sm",children:"Ou"}),(0,Um.jsxs)("button",{onClick:D,className:"bg-white text-slate-900 font-bold py-2 px-4 rounded-lg flex items-center justify-center gap-2",children:[(0,Um.jsx)("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:(0,Um.jsxs)("g",{children:[(0,Um.jsx)("path",{fill:"#4285F4",d:"M24 9.5c3.54 0 6.7 1.22 9.19 3.23l6.85-6.85C36.68 2.69 30.77 0 24 0 14.82 0 6.71 5.13 2.69 12.56l7.98 6.2C12.13 13.09 17.62 9.5 24 9.5z"}),(0,Um.jsx)("path",{fill:"#34A853",d:"M46.1 24.55c0-1.64-.15-3.22-.42-4.74H24v9.01h12.42c-.54 2.9-2.18 5.36-4.65 7.04l7.19 5.59C43.99 37.13 46.1 31.3 46.1 24.55z"}),(0,Um.jsx)("path",{fill:"#FBBC05",d:"M10.67 28.13a14.5 14.5 0 0 1 0-8.26l-7.98-6.2A23.94 23.94 0 0 0 0 24c0 3.77.9 7.34 2.69 10.56l7.98-6.43z"}),(0,Um.jsx)("path",{fill:"#EA4335",d:"M24 48c6.48 0 11.92-2.14 15.89-5.82l-7.19-5.59c-2.01 1.35-4.6 2.15-8.7 2.15-6.38 0-11.87-3.59-14.33-8.79l-7.98 6.43C6.71 42.87 14.82 48 24 48z"})]})}),"Entrar com Google"]})]})})]});if("showMsg"===c)return(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsx)("span",{className:"text-white text-sm",children:"Visitante"}),(0,Um.jsxs)("button",{onClick:()=>{u("ask"),d(""),m("home"),y(null)},className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Voltar ao in\xedcio",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"In\xedcio"]})]}),(0,Um.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white",children:(0,Um.jsx)("div",{className:"bg-slate-800 p-8 rounded-2xl shadow-xl w-full max-w-md flex flex-col gap-4 text-center",children:(0,Um.jsx)("span",{className:"text-2xl font-bold",children:h})})})]});if("showMemory"===c){const t=Object.keys(p),n=A(),r=t.length>0?p[n]:null;return r?(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsx)("span",{className:"text-white text-sm",children:"Visitante"}),(0,Um.jsxs)("button",{onClick:()=>{u("ask"),d(""),m("home"),y(null)},className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Voltar ao in\xedcio",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"In\xedcio"]})]}),(0,Um.jsx)(fp,{memory:r,onExit:()=>u("ask"),isCreator:e})]}):(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsx)("span",{className:"text-white text-sm",children:"Visitante"}),(0,Um.jsxs)("button",{onClick:()=>{u("ask"),d(""),m("home"),y(null)},className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Voltar ao in\xedcio",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"In\xedcio"]})]}),(0,Um.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white",children:(0,Um.jsx)("span",{children:"Nenhuma mem\xf3ria encontrada."})})]})}}if(!e&&n){if("showMsg"===c)return(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsxs)("span",{className:"text-white text-sm",children:["Ol\xe1, ",n.displayName||n.email]}),(0,Um.jsxs)("button",{onClick:O,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Sair da conta",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sair"]})]}),(0,Um.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white",children:(0,Um.jsx)("div",{className:"bg-slate-800 p-8 rounded-2xl shadow-xl w-full max-w-md flex flex-col gap-4 text-center",children:(0,Um.jsx)("span",{className:"text-2xl font-bold",children:h})})})]});if("showMemory"===c){const t=Object.keys(p),r=A(),i=t.length>0?p[r]:null;return i?(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsxs)("span",{className:"text-white text-sm",children:["Ol\xe1, ",n.displayName||n.email]}),(0,Um.jsxs)("button",{onClick:O,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Sair da conta",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sair"]})]}),(0,Um.jsx)(fp,{memory:i,onExit:()=>u("ask"),isCreator:e})]}):(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsxs)("span",{className:"text-white text-sm",children:["Ol\xe1, ",n.displayName||n.email]}),(0,Um.jsxs)("button",{onClick:O,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Sair da conta",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sair"]})]}),(0,Um.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white",children:(0,Um.jsx)("span",{children:"Nenhuma mem\xf3ria encontrada."})})]})}{const t=Object.keys(p),r=A(),i=t.length>0?p[r]:null;return i?(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsxs)("span",{className:"text-white text-sm",children:["Ol\xe1, ",n.displayName||n.email]}),(0,Um.jsxs)("button",{onClick:O,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Sair da conta",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sair"]})]}),(0,Um.jsx)(fp,{memory:i,onExit:()=>u("ask"),isCreator:e})]}):(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsxs)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:[(0,Um.jsxs)("span",{className:"text-white text-sm",children:["Ol\xe1, ",n.displayName||n.email]}),(0,Um.jsxs)("button",{onClick:O,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Sair da conta",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sair"]})]}),(0,Um.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white",children:(0,Um.jsx)("span",{children:"Nenhuma mem\xf3ria encontrada."})})]})}}return(0,Um.jsxs)("main",{className:"w-full h-screen bg-slate-900",children:[(0,Um.jsx)("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-3",children:n?(0,Um.jsxs)(Um.Fragment,{children:[(0,Um.jsxs)("span",{className:"text-white text-sm",children:["Ol\xe1, ",n.displayName||n.email]}),(0,Um.jsxs)("button",{onClick:O,className:"bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Sair da conta",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sair"]})]}):(0,Um.jsxs)(Um.Fragment,{children:[(0,Um.jsx)("span",{className:"text-white text-sm",children:"Visitante"}),(0,Um.jsxs)("button",{onClick:()=>{u("ask"),d(""),m("home"),y(null)},className:"bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",title:"Voltar ao in\xedcio",children:[(0,Um.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Um.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"In\xedcio"]})]})}),(()=>{if(e&&!T){const e=Object.keys(p).length>0;return(0,Um.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white gap-6",children:[(0,Um.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"O que deseja fazer?"}),(0,Um.jsx)("button",{onClick:()=>{e?(y(A()),C("edit")):C("no-memory")},className:"bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105",children:"Editar mem\xf3ria mais recente"}),(0,Um.jsx)("button",{onClick:()=>C("new"),className:"bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105",children:"Criar nova mem\xf3ria"}),(0,Um.jsxs)("button",{onClick:()=>C("comments"),className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105 flex items-center gap-2",children:[(0,Um.jsx)(Xm,{className:"w-5 h-5"}),"Administrar Coment\xe1rios"]}),(0,Um.jsxs)("button",{onClick:()=>C("she-said-yes"),className:"bg-gradient-to-r from-pink-500 to-red-500 hover:from-pink-600 hover:to-red-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105 flex items-center gap-2",children:[(0,Um.jsx)("span",{className:"text-2xl",children:"\ud83d\udc8d"}),"Ela falou sim!"]})]})}if(e&&"no-memory"===T)return(0,Um.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white gap-6",children:[(0,Um.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Nenhuma mem\xf3ria encontrada."}),(0,Um.jsx)("p",{className:"mb-4",children:"Crie uma nova mem\xf3ria para come\xe7ar."}),(0,Um.jsx)("button",{onClick:()=>C("new"),className:"bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-8 rounded-full text-xl shadow-lg transition-transform transform hover:scale-105",children:"Criar nova mem\xf3ria"})]});if(e&&"edit"===T)return v&&p[v]?(0,Um.jsx)(dp,{onCreateMemory:z,onNavigate:()=>{k(!1),m("memory"),C(null)},initialData:p[v],loadingMemory:w}):(0,Um.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white gap-6",children:[(0,Um.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Carregando mem\xf3ria para edi\xe7\xe3o..."}),(0,Um.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-400"})]});if(e&&"new"===T)return(0,Um.jsx)(dp,{onCreateMemory:j,onNavigate:()=>{C(null),m("home")},initialData:null,loadingMemory:w});if(e&&"comments"===T)return(0,Um.jsx)(up,{onNavigate:()=>{C(null),m("home")}});if(e&&"she-said-yes"===T)return(0,Um.jsx)(H,{onNavigate:()=>{C(null),m("home")}});if("preview"===f&&x)return(0,Um.jsxs)("div",{children:[(0,Um.jsx)(fp,{memory:x,onExit:M,isCreator:!0}),(0,Um.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,Um.jsx)("button",{onClick:M,className:"bg-slate-500 hover:bg-slate-600 text-white font-bold py-2 px-4 rounded-lg",children:"Editar"}),(0,Um.jsx)("button",{onClick:L,className:"bg-emerald-500 hover:bg-emerald-600 text-white font-bold py-2 px-4 rounded-lg",children:"Publicar"})]})]});if("edit"===f&&v&&p[v])return(0,Um.jsx)(dp,{onCreateMemory:z,onNavigate:()=>{k(!1),m("memory"),C(null)},initialData:p[v],loadingMemory:w});if("memory"===f)return v&&p[v]?(0,Um.jsx)(fp,{memory:p[v],onExit:F,isCreator:e,onEditMemory:V,onDeleteMemory:U}):(0,Um.jsxs)("div",{className:"text-center p-8 text-white bg-slate-900 h-screen flex flex-col justify-center",children:[(0,Um.jsx)("h2",{className:"text-2xl text-amber-400",children:"Mem\xf3ria n\xe3o encontrada."}),(0,Um.jsx)("p",{className:"mt-2",children:"Este link pode ser inv\xe1lido ou de uma sess\xe3o diferente."}),(0,Um.jsx)("button",{onClick:F,className:"mt-4 bg-emerald-500 p-2 rounded-lg",children:"Voltar"})]});switch(f){case"form":return e?(0,Um.jsx)(dp,{onCreateMemory:j,onNavigate:m,loadingMemory:w}):(0,Um.jsx)(tp,{onNavigate:m});case"home":return e?(0,Um.jsx)(tp,{onNavigate:m}):(0,Um.jsxs)("div",{className:"text-center p-8 text-white bg-slate-900 h-screen flex flex-col justify-center",children:[(0,Um.jsx)("h1",{className:"text-4xl font-bold",children:"Bem-vindo(a) ao RewindSofi"}),(0,Um.jsx)("p",{className:"text-slate-300 mt-2",children:"Acesse uma mem\xf3ria atrav\xe9s de um link compartilhado."})]});default:return(0,Um.jsxs)("div",{className:"text-center p-8 text-white bg-slate-900 h-screen flex flex-col justify-center",children:[(0,Um.jsx)("h1",{className:"text-4xl font-bold",children:"Bem-vindo(a) ao RewindSofi"}),(0,Um.jsx)("p",{className:"text-slate-300 mt-2",children:"Acesse uma mem\xf3ria atrav\xe9s de um link compartilhado."})]})}})()]})}const pp=document.getElementById("root");(0,i.H)(pp).render((0,Um.jsx)(mp,{}))})();
//# sourceMappingURL=main.abed48be.js.map